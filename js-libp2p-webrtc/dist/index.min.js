(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PWebrtc = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PWebrtc=(()=>{var fb=Object.create;var Ys=Object.defineProperty;var lb=Object.getOwnPropertyDescriptor;var hb=Object.getOwnPropertyNames;var db=Object.getPrototypeOf,pb=Object.prototype.hasOwnProperty;var He=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Je=(t,e)=>{for(var r in e)Ys(t,r,{get:e[r],enumerable:!0})},ul=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hb(e))!pb.call(t,i)&&i!==r&&Ys(t,i,{get:()=>e[i],enumerable:!(n=lb(e,i))||n.enumerable});return t};var W=(t,e,r)=>(r=t!=null?fb(db(t)):{},ul(e||!t||!t.__esModule?Ys(r,"default",{value:t,enumerable:!0}):r,t)),yb=t=>ul(Ys({},"__esModule",{value:!0}),t);var Rl=E((oC,Ll)=>{Ll.exports=$c;var Nl=128,Am=127,Cm=~Am,Dm=Math.pow(2,31);function $c(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw $c.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Dm;)e[r++]=t&255|Nl,t/=128;for(;t&Cm;)e[r++]=t&255|Nl,t>>>=7;return e[r]=t|0,$c.bytes=r-n+1,e}});var Ul=E((aC,Pl)=>{Pl.exports=Xc;var Tm=128,Ol=127;function Xc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a||i>49)throw Xc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Ol)<<i:(o&Ol)*Math.pow(2,i),i+=7}while(o>=Tm);return Xc.bytes=s-n,r}});var Ml=E((cC,Fl)=>{var Bm=Math.pow(2,7),Im=Math.pow(2,14),km=Math.pow(2,21),Nm=Math.pow(2,28),Lm=Math.pow(2,35),Rm=Math.pow(2,42),Om=Math.pow(2,49),Pm=Math.pow(2,56),Um=Math.pow(2,63);Fl.exports=function(t){return t<Bm?1:t<Im?2:t<km?3:t<Nm?4:t<Lm?5:t<Rm?6:t<Om?7:t<Pm?8:t<Um?9:10}});var to=E((uC,Kl)=>{Kl.exports={encode:Rl(),decode:Ul(),encodingLength:Ml()}});var ih=E((FD,nh)=>{var Zn=1e3,Qn=Zn*60,ei=Qn*60,ln=ei*24,lx=ln*7,hx=ln*365.25;nh.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return dx(t);if(r==="number"&&isFinite(t))return e.long?yx(t):px(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function dx(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hx;case"weeks":case"week":case"w":return r*lx;case"days":case"day":case"d":return r*ln;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ei;case"minutes":case"minute":case"mins":case"min":case"m":return r*Qn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Zn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function px(t){var e=Math.abs(t);return e>=ln?Math.round(t/ln)+"d":e>=ei?Math.round(t/ei)+"h":e>=Qn?Math.round(t/Qn)+"m":e>=Zn?Math.round(t/Zn)+"s":t+"ms"}function yx(t){var e=Math.abs(t);return e>=ln?oo(t,e,ln,"day"):e>=ei?oo(t,e,ei,"hour"):e>=Qn?oo(t,e,Qn,"minute"):e>=Zn?oo(t,e,Zn,"second"):t+" ms"}function oo(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var au=E((MD,sh)=>{function gx(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=ih(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,h=null,p,d;function y(...g){if(!y.enabled)return;let b=y,v=Number(new Date),w=v-(l||v);b.diff=w,b.prev=l,b.curr=v,l=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let C=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(_,T)=>{if(_==="%%")return"%";C++;let I=r.formatters[T];if(typeof I=="function"){let O=g[C];_=I.call(b,O),g.splice(C,1),C--}return _}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,d=r.enabled(f)),d),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(l=0;l<p;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}sh.exports=gx});var oh=E((vt,ao)=>{vt.formatArgs=mx;vt.save=xx;vt.load=wx;vt.useColors=bx;vt.storage=vx();vt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bx(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mx(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ao.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}vt.log=console.debug||console.log||(()=>{});function xx(t){try{t?vt.storage.setItem("debug",t):vt.storage.removeItem("debug")}catch{}}function wx(){let t;try{t=vt.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function vx(){try{return localStorage}catch{}}ao.exports=au()(vt);var{formatters:Ex}=ao.exports;Ex.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ch=E((KD,ah)=>{"use strict";ah.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var fh=E((VD,uh)=>{"use strict";var Sx=He("os"),Mt=ch(),ut=process.env,ti;Mt("no-color")||Mt("no-colors")||Mt("color=false")?ti=!1:(Mt("color")||Mt("colors")||Mt("color=true")||Mt("color=always"))&&(ti=!0);"FORCE_COLOR"in ut&&(ti=ut.FORCE_COLOR.length===0||parseInt(ut.FORCE_COLOR,10)!==0);function _x(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Ax(t){if(ti===!1)return 0;if(Mt("color=16m")||Mt("color=full")||Mt("color=truecolor"))return 3;if(Mt("color=256"))return 2;if(t&&!t.isTTY&&ti!==!0)return 0;let e=ti?1:0;if(process.platform==="win32"){let r=Sx.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ut)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in ut)||ut.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in ut)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ut.TEAMCITY_VERSION)?1:0;if(ut.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ut){let r=parseInt((ut.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ut.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ut.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ut.TERM)||"COLORTERM"in ut?1:(ut.TERM==="dumb",e)}function cu(t){let e=Ax(t);return _x(e)}uh.exports={supportsColor:cu,stdout:cu(process.stdout),stderr:cu(process.stderr)}});var hh=E((Qe,uo)=>{var Cx=He("tty"),co=He("util");Qe.init=Lx;Qe.log=Ix;Qe.formatArgs=Tx;Qe.save=kx;Qe.load=Nx;Qe.useColors=Dx;Qe.destroy=co.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Qe.colors=[6,2,3,4,5,1];try{let t=fh();t&&(t.stderr||t).level>=2&&(Qe.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Qe.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Dx(){return"colors"in Qe.inspectOpts?!!Qe.inspectOpts.colors:Cx.isatty(process.stderr.fd)}function Tx(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+uo.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Bx()+e+" "+t[0]}function Bx(){return Qe.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ix(...t){return process.stderr.write(co.format(...t)+`
`)}function kx(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Nx(){return process.env.DEBUG}function Lx(t){t.inspectOpts={};let e=Object.keys(Qe.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Qe.inspectOpts[e[r]]}uo.exports=au()(Qe);var{formatters:lh}=uo.exports;lh.o=function(t){return this.inspectOpts.colors=this.useColors,co.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};lh.O=function(t){return this.inspectOpts.colors=this.useColors,co.inspect(t,this.inspectOpts)}});var dh=E((qD,uu)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?uu.exports=oh():uu.exports=hh()});var wo=E((vT,Sh)=>{"use strict";function Eh(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Wx(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Eh(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Eh(new i,r)}}Sh.exports=Wx});var Ch=E((PT,Ah)=>{"use strict";Ah.exports=function(){let e=process.hrtime();return Math.floor(e[0]*1e3+e[1]/1e6)}});var Th=E((UT,Dh)=>{"use strict";var So=Ch(),wu=class{constructor(e,r,n){let i=this;this._started=So(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(So()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=So();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=So(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function Jx(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new wu(arguments[0],arguments[1],t)}Dh.exports=Jx});var kh=E((FT,Ih)=>{"use strict";var{AbortController:Zx}=globalThis,Bh=Th(),ts=class extends Zx{constructor(e){super(),this._ms=e,this._timer=Bh(()=>this.abort(),e),Object.setPrototypeOf(this,ts.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=Bh(()=>this.abort(),this._ms)}};Ih.exports={TimeoutController:ts}});var Lh=E((MT,Nh)=>{"use strict";Nh.exports=Qx;function Qx(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,c){r[n]=function(f){if(s)if(s=!1,f)c(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];a.apply(null,l)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var Uh=E(Ph=>{"use strict";var _o=Ph;_o.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var ai=new Array(64),Oh=new Array(123);for(Kt=0;Kt<64;)Oh[ai[Kt]=Kt<26?Kt+65:Kt<52?Kt+71:Kt<62?Kt-4:Kt-59|43]=Kt++;var Kt;_o.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,c;r<n;){var u=e[r++];switch(a){case 0:s[o++]=ai[u>>2],c=(u&3)<<4,a=1;break;case 1:s[o++]=ai[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[o++]=ai[c|u>>6],s[o++]=ai[u&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=ai[c],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Rh="invalid encoding";_o.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=Oh[c])===void 0)throw Error(Rh);switch(s){case 0:o=c,s=1;break;case 1:r[n++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[n++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[n++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(Rh);return n-i};_o.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Mh=E((VT,Fh)=>{"use strict";Fh.exports=Ao;function Ao(){this._listeners={}}Ao.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Ao.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Ao.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Wh=E((qT,Gh)=>{"use strict";Gh.exports=Kh(Kh);function Kh(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Vh),t.writeFloatBE=e.bind(null,qh);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,zh),t.readFloatBE=r.bind(null,Hh)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,c){var u=o<0?1:0;if(u&&(o=-o),o===0)n(0,a,c+i),n(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))n(0,a,c+i),n(2146959360,a,c+s);else if(o>17976931348623157e292)n(0,a,c+i),n((u<<31|2146435072)>>>0,a,c+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,c+i),n((u<<31|f/4294967296)>>>0,a,c+s);else{var l=Math.floor(Math.log(o)/Math.LN2);l===1024&&(l=1023),f=o*Math.pow(2,-l),n(f*4503599627370496>>>0,a,c+i),n((u<<31|l+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,Vh,0,4),t.writeDoubleBE=e.bind(null,qh,4,0);function r(n,i,s,o,a){var c=n(o,a+i),u=n(o,a+s),f=(u>>31)*2+1,l=u>>>20&2047,h=4294967296*(u&1048575)+c;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,zh,0,4),t.readDoubleBE=r.bind(null,Hh,4,0)}(),t}function Vh(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function qh(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function zh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Hh(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var jh=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Xh=E($h=>{"use strict";var vu=$h;vu.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};vu.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,c;r<n;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};vu.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var Jh=E((HT,Yh)=>{"use strict";Yh.exports=ew;function ew(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(c){if(c<1||c>i)return t(c);o+c>n&&(s=t(n),o=0);var u=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var Qh=E((GT,Zh)=>{"use strict";Zh.exports=Ge;var rs=gn();function Ge(t,e){this.lo=t>>>0,this.hi=e>>>0}var yn=Ge.zero=new Ge(0,0);yn.toNumber=function(){return 0};yn.zzEncode=yn.zzDecode=function(){return this};yn.length=function(){return 1};var tw=Ge.zeroHash="\0\0\0\0\0\0\0\0";Ge.fromNumber=function(e){if(e===0)return yn;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ge(n,i)};Ge.from=function(e){if(typeof e=="number")return Ge.fromNumber(e);if(rs.isString(e))if(rs.Long)e=rs.Long.fromString(e);else return Ge.fromNumber(parseInt(e,10));return e.low||e.high?new Ge(e.low>>>0,e.high>>>0):yn};Ge.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Ge.prototype.toLong=function(e){return rs.Long?new rs.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Xr=String.prototype.charCodeAt;Ge.fromHash=function(e){return e===tw?yn:new Ge((Xr.call(e,0)|Xr.call(e,1)<<8|Xr.call(e,2)<<16|Xr.call(e,3)<<24)>>>0,(Xr.call(e,4)|Xr.call(e,5)<<8|Xr.call(e,6)<<16|Xr.call(e,7)<<24)>>>0)};Ge.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ge.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ge.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ge.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var gn=E(Eu=>{"use strict";var P=Eu;P.asPromise=Lh();P.base64=Uh();P.EventEmitter=Mh();P.float=Wh();P.inquire=jh();P.utf8=Xh();P.pool=Jh();P.LongBits=Qh();P.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);P.global=P.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Eu;P.emptyArray=Object.freeze?Object.freeze([]):[];P.emptyObject=Object.freeze?Object.freeze({}):{};P.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};P.isString=function(e){return typeof e=="string"||e instanceof String};P.isObject=function(e){return e&&typeof e=="object"};P.isset=P.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};P.Buffer=function(){try{var t=P.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();P._Buffer_from=null;P._Buffer_allocUnsafe=null;P.newBuffer=function(e){return typeof e=="number"?P.Buffer?P._Buffer_allocUnsafe(e):new P.Array(e):P.Buffer?P._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};P.Array=typeof Uint8Array<"u"?Uint8Array:Array;P.Long=P.global.dcodeIO&&P.global.dcodeIO.Long||P.global.Long||P.inquire("long");P.key2Re=/^true|false|0|1$/;P.key32Re=/^-?(?:0|[1-9][0-9]*)$/;P.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;P.longToHash=function(e){return e?P.LongBits.from(e).toHash():P.LongBits.zeroHash};P.longFromHash=function(e,r){var n=P.LongBits.fromHash(e);return P.Long?P.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function ed(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}P.merge=ed;P.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function td(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&ed(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}P.newError=td;P.ProtocolError=td("ProtocolError");P.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};P.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};P.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};P._configure=function(){var t=P.Buffer;if(!t){P._Buffer_from=P._Buffer_allocUnsafe=null;return}P._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},P._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Au=E((jT,od)=>{"use strict";od.exports=Ue;var ir=gn(),_u,id=ir.LongBits,rw=ir.utf8;function Vt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Ue(t){this.buf=t,this.pos=0,this.len=t.length}var rd=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ue(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ue(e);throw Error("illegal buffer")},sd=function(){return ir.Buffer?function(r){return(Ue.create=function(i){return ir.Buffer.isBuffer(i)?new _u(i):rd(i)})(r)}:rd};Ue.create=sd();Ue.prototype._slice=ir.Array.prototype.subarray||ir.Array.prototype.slice;Ue.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Vt(this,10);return e}}();Ue.prototype.int32=function(){return this.uint32()|0};Ue.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Su(){var t=new id(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Vt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Vt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Ue.prototype.bool=function(){return this.uint32()!==0};function Co(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Ue.prototype.fixed32=function(){if(this.pos+4>this.len)throw Vt(this,4);return Co(this.buf,this.pos+=4)};Ue.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Vt(this,4);return Co(this.buf,this.pos+=4)|0};function nd(){if(this.pos+8>this.len)throw Vt(this,8);return new id(Co(this.buf,this.pos+=4),Co(this.buf,this.pos+=4))}Ue.prototype.float=function(){if(this.pos+4>this.len)throw Vt(this,4);var e=ir.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Ue.prototype.double=function(){if(this.pos+8>this.len)throw Vt(this,4);var e=ir.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Ue.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Vt(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Ue.prototype.string=function(){var e=this.bytes();return rw.read(e,0,e.length)};Ue.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Vt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Vt(this);while(this.buf[this.pos++]&128);return this};Ue.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Ue._configure=function(t){_u=t,Ue.create=sd(),_u._configure();var e=ir.Long?"toLong":"toNumber";ir.merge(Ue.prototype,{int64:function(){return Su.call(this)[e](!1)},uint64:function(){return Su.call(this)[e](!0)},sint64:function(){return Su.call(this).zzDecode()[e](!1)},fixed64:function(){return nd.call(this)[e](!0)},sfixed64:function(){return nd.call(this)[e](!1)}})}});var fd=E(($T,ud)=>{"use strict";ud.exports=bn;var cd=Au();(bn.prototype=Object.create(cd.prototype)).constructor=bn;var ad=gn();function bn(t){cd.call(this,t)}bn._configure=function(){ad.Buffer&&(bn.prototype._slice=ad.Buffer.prototype.slice)};bn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};bn._configure()});var Nu=E((XT,pd)=>{"use strict";pd.exports=se;var Nt=gn(),Cu,Do=Nt.LongBits,ld=Nt.base64,hd=Nt.utf8;function ns(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Tu(){}function nw(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function se(){this.len=0,this.head=new ns(Tu,0,0),this.tail=this.head,this.states=null}var dd=function(){return Nt.Buffer?function(){return(se.create=function(){return new Cu})()}:function(){return new se}};se.create=dd();se.alloc=function(e){return new Nt.Array(e)};Nt.Array!==Array&&(se.alloc=Nt.pool(se.alloc,Nt.Array.prototype.subarray));se.prototype._push=function(e,r,n){return this.tail=this.tail.next=new ns(e,r,n),this.len+=r,this};function Bu(t,e,r){e[r]=t&255}function iw(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Iu(t,e){this.len=t,this.next=void 0,this.val=e}Iu.prototype=Object.create(ns.prototype);Iu.prototype.fn=iw;se.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Iu((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};se.prototype.int32=function(e){return e<0?this._push(ku,10,Do.fromNumber(e)):this.uint32(e)};se.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function ku(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}se.prototype.uint64=function(e){var r=Do.from(e);return this._push(ku,r.length(),r)};se.prototype.int64=se.prototype.uint64;se.prototype.sint64=function(e){var r=Do.from(e).zzEncode();return this._push(ku,r.length(),r)};se.prototype.bool=function(e){return this._push(Bu,1,e?1:0)};function Du(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}se.prototype.fixed32=function(e){return this._push(Du,4,e>>>0)};se.prototype.sfixed32=se.prototype.fixed32;se.prototype.fixed64=function(e){var r=Do.from(e);return this._push(Du,4,r.lo)._push(Du,4,r.hi)};se.prototype.sfixed64=se.prototype.fixed64;se.prototype.float=function(e){return this._push(Nt.float.writeFloatLE,4,e)};se.prototype.double=function(e){return this._push(Nt.float.writeDoubleLE,8,e)};var sw=Nt.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};se.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Bu,1,0);if(Nt.isString(e)){var n=se.alloc(r=ld.length(e));ld.decode(e,n,0),e=n}return this.uint32(r)._push(sw,r,e)};se.prototype.string=function(e){var r=hd.length(e);return r?this.uint32(r)._push(hd.write,r,e):this._push(Bu,1,0)};se.prototype.fork=function(){return this.states=new nw(this),this.head=this.tail=new ns(Tu,0,0),this.len=0,this};se.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ns(Tu,0,0),this.len=0),this};se.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};se.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};se._configure=function(t){Cu=t,se.create=dd(),Cu._configure()}});var bd=E((YT,gd)=>{"use strict";gd.exports=sr;var yd=Nu();(sr.prototype=Object.create(yd.prototype)).constructor=sr;var Yr=gn();function sr(){yd.call(this)}sr._configure=function(){sr.alloc=Yr._Buffer_allocUnsafe,sr.writeBytesBuffer=Yr.Buffer&&Yr.Buffer.prototype instanceof Uint8Array&&Yr.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};sr.prototype.bytes=function(e){Yr.isString(e)&&(e=Yr._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(sr.writeBytesBuffer,r,e),this};function ow(t,e,r){t.length<40?Yr.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}sr.prototype.string=function(e){var r=Yr.Buffer.byteLength(e);return this.uint32(r),r&&this._push(ow,r,e),this};sr._configure()});var Rd=E(Te=>{"use strict";var Sd=Te&&Te.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Te,"__esModule",{value:!0});Te.getNodeVersion=Te.detectOS=Te.parseUserAgent=Te.browserName=Te.detect=Te.ReactNativeInfo=Te.BotInfo=Te.SearchBotDeviceInfo=Te.NodeInfo=Te.BrowserInfo=void 0;var Cd=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();Te.BrowserInfo=Cd;var Dd=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}();Te.NodeInfo=Dd;var Td=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();Te.SearchBotDeviceInfo=Td;var Bd=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();Te.BotInfo=Bd;var Id=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();Te.ReactNativeInfo=Id;var fw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_d=3,hw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fw]],Ad=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dw(t){return t?Uu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Id:typeof navigator<"u"?Uu(navigator.userAgent):Ld()}Te.detect=dw;function kd(t){return t!==""&&hw.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function pw(t){var e=kd(t);return e?e[0]:null}Te.browserName=pw;function Uu(t){var e=kd(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Bd;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<_d&&(i=Sd(Sd([],i,!0),yw(_d-i.length),!0)):i=[];var s=i.join("."),o=Nd(t),a=lw.exec(t);return a&&a[1]?new Td(r,s,o,a[1]):new Cd(r,s,o)}Te.parseUserAgent=Uu;function Nd(t){for(var e=0,r=Ad.length;e<r;e++){var n=Ad[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}Te.detectOS=Nd;function Ld(){var t=typeof process<"u"&&process.version;return t?new Dd(process.version.slice(1)):null}Te.getNodeVersion=Ld;function yw(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var ko=E(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.isJsonObject=ui.typeofJsonValue=void 0;function _w(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}ui.typeofJsonValue=_w;function Aw(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}ui.isJsonObject=Aw});var Lo=E(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.base64encode=fi.base64decode=void 0;var kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),No=[];for(let t=0;t<kr.length;t++)No[kr[t].charCodeAt(0)]=t;No["-".charCodeAt(0)]=kr.indexOf("+");No["_".charCodeAt(0)]=kr.indexOf("/");function Cw(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let r=new Uint8Array(e),n=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=No[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:r[n++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:r[n++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:r[n++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return r.subarray(0,n)}fi.base64decode=Cw;function Dw(t){let e="",r=0,n,i=0;for(let s=0;s<t.length;s++)switch(n=t[s],r){case 0:e+=kr[n>>2],i=(n&3)<<4,r=1;break;case 1:e+=kr[i|n>>4],i=(n&15)<<2,r=2;break;case 2:e+=kr[i|n>>6],e+=kr[n&63],r=0;break}return r&&(e+=kr[i],e+="=",r==1&&(e+="=")),e}fi.base64encode=Dw});var Gd=E(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.utf8read=void 0;var zu=t=>String.fromCharCode.apply(String,t);function Tw(t){if(t.length<1)return"";let e=0,r=[],n=[],i=0,s,o=t.length;for(;e<o;)s=t[e++],s<128?n[i++]=s:s>191&&s<224?n[i++]=(s&31)<<6|t[e++]&63:s>239&&s<365?(s=((s&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,n[i++]=55296+(s>>10),n[i++]=56320+(s&1023)):n[i++]=(s&15)<<12|(t[e++]&63)<<6|t[e++]&63,i>8191&&(r.push(zu(n)),i=0);return r.length?(i&&r.push(zu(n.slice(0,i))),r.join("")):zu(n.slice(0,i))}Ro.utf8read=Tw});var us=E(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.WireType=or.mergeBinaryOptions=or.UnknownFieldHandler=void 0;var Bw;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(r,n,i,s,o)=>{(e(n)?n[t.symbol]:n[t.symbol]=[]).push({no:i,wireType:s,data:o})},t.onWrite=(r,n,i)=>{for(let{no:s,wireType:o,data:a}of t.list(n))i.tag(s,o).raw(a)},t.list=(r,n)=>{if(e(r)){let i=r[t.symbol];return n?i.filter(s=>s.no==n):i}return[]},t.last=(r,n)=>t.list(r,n).slice(-1)[0];let e=r=>r&&Array.isArray(r[t.symbol])})(Bw=or.UnknownFieldHandler||(or.UnknownFieldHandler={}));function Iw(t,e){return Object.assign(Object.assign({},t),e)}or.mergeBinaryOptions=Iw;var kw;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(kw=or.WireType||(or.WireType={}))});var Po=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.varint32read=mt.varint32write=mt.int64toString=mt.int64fromString=mt.varint64write=mt.varint64read=void 0;function Nw(){let t=0,e=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<n,!(i&128))return this.assertBounds(),[t,e]}let r=this.buf[this.pos++];if(t|=(r&15)<<28,e=(r&112)>>4,!(r&128))return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<n,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}mt.varint64read=Nw;function Lw(t,e,r){for(let s=0;s<28;s=s+7){let o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(r.push(c),!a)return}let n=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(r.push((i?n|128:n)&255),!!i){for(let s=3;s<31;s=s+7){let o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(r.push(c),!a)return}r.push(e>>>31&1)}}mt.varint64write=Lw;var Oo=(1<<16)*(1<<16);function Rw(t){let e=t[0]=="-";e&&(t=t.slice(1));let r=1e6,n=0,i=0;function s(o,a){let c=Number(t.slice(o,a));i*=r,n=n*r+c,n>=Oo&&(i=i+(n/Oo|0),n=n%Oo)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,n,i]}mt.int64fromString=Rw;function Ow(t,e){if(e<=2097151)return""+(Oo*e+(t>>>0));let r=t&16777215,n=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,s=r+n*6777216+i*6710656,o=n+i*8147497,a=i*2,c=1e7;s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c);function u(f,l){let h=f?String(f):"";return l?"0000000".slice(h.length)+h:h}return u(a,0)+u(o,a)+u(s,1)}mt.int64toString=Ow;function Pw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let r=0;r<9;r++)e.push(t&127|128),t=t>>7;e.push(1)}}mt.varint32write=Pw;function Uw(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let r=5;t&128&&r<10;r++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}mt.varint32read=Uw});var Jr=E(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.PbLong=li.PbULong=void 0;var fs=Po();function Fw(){let t=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}var ve=Fw();function Wd(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}var jd=/^-?[0-9]+$/,Uo=(1<<16)*(1<<16),Fo=class{constructor(e,r){this.lo=e|0,this.hi=r|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Uo+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}},Nr=class extends Fo{static from(e){if(ve)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ve.C(e);case"number":if(e===0)return this.ZERO;e=ve.C(e);case"bigint":if(!e)return this.ZERO;if(e<ve.UMIN)throw new Error("signed value for ulong");if(e>ve.UMAX)throw new Error("ulong too large");return ve.V.setBigUint64(0,e,!0),new Nr(ve.V.getInt32(0,!0),ve.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!jd.test(e))throw new Error("string is no integer");let[r,n,i]=fs.int64fromString(e);if(r)throw new Error("signed value");return new Nr(n,i);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Nr(e,e/Uo)}throw new Error("unknown value "+typeof e)}toString(){return ve?this.toBigInt().toString():fs.int64toString(this.lo,this.hi)}toBigInt(){return Wd(ve),ve.V.setInt32(0,this.lo,!0),ve.V.setInt32(4,this.hi,!0),ve.V.getBigUint64(0,!0)}};li.PbULong=Nr;Nr.ZERO=new Nr(0,0);var qt=class extends Fo{static from(e){if(ve)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ve.C(e);case"number":if(e===0)return this.ZERO;e=ve.C(e);case"bigint":if(!e)return this.ZERO;if(e<ve.MIN)throw new Error("ulong too small");if(e>ve.MAX)throw new Error("ulong too large");return ve.V.setBigInt64(0,e,!0),new qt(ve.V.getInt32(0,!0),ve.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!jd.test(e))throw new Error("string is no integer");let[r,n,i]=fs.int64fromString(e),s=new qt(n,i);return r?s.negate():s;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new qt(e,e/Uo):new qt(-e,-e/Uo).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&2147483648)!==0}negate(){let e=~this.hi,r=this.lo;return r?r=~r+1:e+=1,new qt(r,e)}toString(){if(ve)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+fs.int64toString(e.lo,e.hi)}return fs.int64toString(this.lo,this.hi)}toBigInt(){return Wd(ve),ve.V.setInt32(0,this.lo,!0),ve.V.setInt32(4,this.hi,!0),ve.V.getBigInt64(0,!0)}};li.PbLong=qt;qt.ZERO=new qt(0,0)});var Hu=E(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.BinaryReader=di.binaryReadOptions=void 0;var hi=us(),ls=Jr(),$d=Po(),Xd={readUnknownField:!0,readerFactory:t=>new Mo(t)};function Mw(t){return t?Object.assign(Object.assign({},Xd),t):Xd}di.binaryReadOptions=Mw;var Mo=class{constructor(e,r){this.varint64=$d.varint64read,this.uint32=$d.varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),r=e>>>3,n=e&7;if(r<=0||n<0||n>5)throw new Error("illegal tag: field no "+r+" wire type "+n);return[r,n]}skip(e){let r=this.pos;switch(e){case hi.WireType.Varint:for(;this.buf[this.pos++]&128;);break;case hi.WireType.Bit64:this.pos+=4;case hi.WireType.Bit32:this.pos+=4;break;case hi.WireType.LengthDelimited:let n=this.uint32();this.pos+=n;break;case hi.WireType.StartGroup:let i;for(;(i=this.tag()[1])!==hi.WireType.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new ls.PbLong(...this.varint64())}uint64(){return new ls.PbULong(...this.varint64())}sint64(){let[e,r]=this.varint64(),n=-(e&1);return e=(e>>>1|(r&1)<<31)^n,r=r>>>1^n,new ls.PbLong(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new ls.PbULong(this.sfixed32(),this.sfixed32())}sfixed64(){return new ls.PbLong(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}};di.BinaryReader=Mo});var pi=E(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.assertFloat32=Lt.assertUInt32=Lt.assertInt32=Lt.assertNever=Lt.assert=void 0;function Kw(t,e){if(!t)throw new Error(e)}Lt.assert=Kw;function Vw(t,e){throw new Error(e??"Unexpected object: "+t)}Lt.assertNever=Vw;var qw=34028234663852886e22,zw=-34028234663852886e22,Hw=4294967295,Gw=2147483647,Ww=-2147483648;function jw(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>Gw||t<Ww)throw new Error("invalid int 32: "+t)}Lt.assertInt32=jw;function $w(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Hw||t<0)throw new Error("invalid uint 32: "+t)}Lt.assertUInt32=$w;function Xw(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>qw||t<zw))throw new Error("invalid float 32: "+t)}Lt.assertFloat32=Xw});var Gu=E(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.BinaryWriter=gi.binaryWriteOptions=void 0;var hs=Jr(),ds=Po(),yi=pi(),Yd={writeUnknownFields:!0,writerFactory:()=>new Ko};function Yw(t){return t?Object.assign(Object.assign({},Yd),t):Yd}gi.binaryWriteOptions=Yw;var Ko=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let r=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)r.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(yi.assertUInt32(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return yi.assertInt32(e),ds.varint32write(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){yi.assertFloat32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){yi.assertUInt32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){yi.assertInt32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return yi.assertInt32(e),e=(e<<1^e>>31)>>>0,ds.varint32write(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),i=hs.PbLong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),i=hs.PbULong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(r)}int64(e){let r=hs.PbLong.from(e);return ds.varint64write(r.lo,r.hi,this.buf),this}sint64(e){let r=hs.PbLong.from(e),n=r.hi>>31,i=r.lo<<1^n,s=(r.hi<<1|r.lo>>>31)^n;return ds.varint64write(i,s,this.buf),this}uint64(e){let r=hs.PbULong.from(e);return ds.varint64write(r.lo,r.hi,this.buf),this}};gi.BinaryWriter=Ko});var Wu=E(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.mergeJsonOptions=Zr.jsonWriteOptions=Zr.jsonReadOptions=void 0;var Jd={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Zd={ignoreUnknownFields:!1};function Jw(t){return t?Object.assign(Object.assign({},Zd),t):Zd}Zr.jsonReadOptions=Jw;function Zw(t){return t?Object.assign(Object.assign({},Jd),t):Jd}Zr.jsonWriteOptions=Zw;function Qw(t,e){var r,n;let i=Object.assign(Object.assign({},t),e);return i.typeRegistry=[...(r=t?.typeRegistry)!==null&&r!==void 0?r:[],...(n=e?.typeRegistry)!==null&&n!==void 0?n:[]],i}Zr.mergeJsonOptions=Qw});var qo=E(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.MESSAGE_TYPE=void 0;Vo.MESSAGE_TYPE=Symbol.for("protobuf-ts/message-type")});var ju=E(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.lowerCamelCase=void 0;function ev(t){let e=!1,r=[];for(let n=0;n<t.length;n++){let i=t.charAt(n);i=="_"?e=!0:/\d/.test(i)?(r.push(i),e=!0):e?(r.push(i.toUpperCase()),e=!1):n==0?r.push(i.toLowerCase()):r.push(i)}return r.join("")}zo.lowerCamelCase=ev});var zt=E(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.readMessageOption=qe.readFieldOption=qe.readFieldOptions=qe.normalizeFieldInfo=qe.RepeatType=qe.LongType=qe.ScalarType=void 0;var Qd=ju(),tv;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(tv=qe.ScalarType||(qe.ScalarType={}));var rv;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(rv=qe.LongType||(qe.LongType={}));var ep;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(ep=qe.RepeatType||(qe.RepeatType={}));function nv(t){var e,r,n,i;return t.localName=(e=t.localName)!==null&&e!==void 0?e:Qd.lowerCamelCase(t.name),t.jsonName=(r=t.jsonName)!==null&&r!==void 0?r:Qd.lowerCamelCase(t.name),t.repeat=(n=t.repeat)!==null&&n!==void 0?n:ep.NO,t.opt=(i=t.opt)!==null&&i!==void 0?i:t.repeat||t.oneof?!1:t.kind=="message",t}qe.normalizeFieldInfo=nv;function iv(t,e,r,n){var i;let s=(i=t.fields.find((o,a)=>o.localName==e||a==e))===null||i===void 0?void 0:i.options;return s&&s[r]?n.fromJson(s[r]):void 0}qe.readFieldOptions=iv;function sv(t,e,r,n){var i;let s=(i=t.fields.find((a,c)=>a.localName==e||c==e))===null||i===void 0?void 0:i.options;if(!s)return;let o=s[r];return o===void 0?o:n?n.fromJson(o):o}qe.readFieldOption=sv;function ov(t,e,r){let i=t.options[e];return i===void 0?i:r?r.fromJson(i):i}qe.readMessageOption=ov});var $u=E(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.getSelectedOneofValue=xt.clearOneofValue=xt.setUnknownOneofValue=xt.setOneofValue=xt.getOneofValue=xt.isOneofGroup=void 0;function av(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}xt.isOneofGroup=av;function cv(t,e){return t[e]}xt.getOneofValue=cv;function uv(t,e,r){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=e,r!==void 0&&(t[e]=r)}xt.setOneofValue=uv;function fv(t,e,r){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=e,r!==void 0&&e!==void 0&&(t[e]=r)}xt.setUnknownOneofValue=fv;function lv(t){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=void 0}xt.clearOneofValue=lv;function hv(t){if(t.oneofKind!==void 0)return t[t.oneofKind]}xt.getSelectedOneofValue=hv});var Yu=E(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ReflectionTypeCheck=void 0;var Le=zt(),dv=$u(),Xu=class{constructor(e){var r;this.fields=(r=e.fields)!==null&&r!==void 0?r:[]}prepare(){if(this.data)return;let e=[],r=[],n=[];for(let i of this.fields)if(i.oneof)n.includes(i.oneof)||(n.push(i.oneof),e.push(i.oneof),r.push(i.oneof));else switch(r.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName);break}this.data={req:e,known:r,oneofs:Object.values(n)}}is(e,r,n=!1){if(r<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let i=Object.keys(e),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!n&&i.some(o=>!s.known.includes(o)))return!1;if(r<1)return!0;for(let o of s.oneofs){let a=e[o];if(!dv.isOneofGroup(a))return!1;if(a.oneofKind===void 0)continue;let c=this.fields.find(u=>u.localName===a.oneofKind);if(!c||!this.field(a[a.oneofKind],c,n,r))return!1}for(let o of this.fields)if(o.oneof===void 0&&!this.field(e[o.localName],o,n,r))return!1;return!0}field(e,r,n,i){let s=r.repeat;switch(r.kind){case"scalar":return e===void 0?r.opt:s?this.scalars(e,r.T,i,r.L):this.scalar(e,r.T,r.L);case"enum":return e===void 0?r.opt:s?this.scalars(e,Le.ScalarType.INT32,i):this.scalar(e,Le.ScalarType.INT32);case"message":return e===void 0?!0:s?this.messages(e,r.T(),n,i):this.message(e,r.T(),n,i);case"map":if(typeof e!="object"||e===null)return!1;if(i<2)return!0;if(!this.mapKeys(e,r.K,i))return!1;switch(r.V.kind){case"scalar":return this.scalars(Object.values(e),r.V.T,i,r.V.L);case"enum":return this.scalars(Object.values(e),Le.ScalarType.INT32,i);case"message":return this.messages(Object.values(e),r.V.T(),n,i)}break}return!0}message(e,r,n,i){return n?r.isAssignable(e,i):r.is(e,i)}messages(e,r,n,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(n){for(let s=0;s<e.length&&s<i;s++)if(!r.isAssignable(e[s],i-1))return!1}else for(let s=0;s<e.length&&s<i;s++)if(!r.is(e[s],i-1))return!1;return!0}scalar(e,r,n){let i=typeof e;switch(r){case Le.ScalarType.UINT64:case Le.ScalarType.FIXED64:case Le.ScalarType.INT64:case Le.ScalarType.SFIXED64:case Le.ScalarType.SINT64:switch(n){case Le.LongType.BIGINT:return i=="bigint";case Le.LongType.NUMBER:return i=="number"&&!isNaN(e);default:return i=="string"}case Le.ScalarType.BOOL:return i=="boolean";case Le.ScalarType.STRING:return i=="string";case Le.ScalarType.BYTES:return e instanceof Uint8Array;case Le.ScalarType.DOUBLE:case Le.ScalarType.FLOAT:return i=="number"&&!isNaN(e);default:return i=="number"&&Number.isInteger(e)}}scalars(e,r,n,i){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<n;s++)if(!this.scalar(e[s],r,i))return!1}return!0}mapKeys(e,r,n){let i=Object.keys(e);switch(r){case Le.ScalarType.INT32:case Le.ScalarType.FIXED32:case Le.ScalarType.SFIXED32:case Le.ScalarType.SINT32:case Le.ScalarType.UINT32:return this.scalars(i.slice(0,n).map(s=>parseInt(s)),r,n);case Le.ScalarType.BOOL:return this.scalars(i.slice(0,n).map(s=>s=="true"?!0:s=="false"?!1:s),r,n);default:return this.scalars(i,r,n,Le.LongType.STRING)}}};Ho.ReflectionTypeCheck=Xu});var Wo=E(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.reflectionLongConvert=void 0;var tp=zt();function pv(t,e){switch(e){case tp.LongType.BIGINT:return t.toBigInt();case tp.LongType.NUMBER:return t.toNumber();default:return t.toString()}}Go.reflectionLongConvert=pv});var Zu=E(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ReflectionJsonReader=void 0;var rp=ko(),yv=Lo(),ze=zt(),jo=Jr(),wn=pi(),$o=Wo(),Ju=class{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};let r=(e=this.info.fields)!==null&&e!==void 0?e:[];for(let n of r)this.fMap[n.name]=n,this.fMap[n.jsonName]=n,this.fMap[n.localName]=n}}assert(e,r,n){if(!e){let i=rp.typeofJsonValue(n);throw(i=="number"||i=="boolean")&&(i=n.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${r}`)}}read(e,r,n){this.prepare();let i=[];for(let[s,o]of Object.entries(e)){let a=this.fMap[s];if(!a){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}let c=a.localName,u;if(a.oneof){if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),u=r[a.oneof]={oneofKind:c}}else u=r;if(a.kind=="map"){if(o===null)continue;this.assert(rp.isJsonObject(o),a.name,o);let f=u[c];for(let[l,h]of Object.entries(o)){this.assert(h!==null,a.name+" map value",null);let p;switch(a.V.kind){case"message":p=a.V.T().internalJsonRead(h,n);break;case"enum":if(p=this.enum(a.V.T(),h,a.name,n.ignoreUnknownFields),p===!1)continue;break;case"scalar":p=this.scalar(h,a.V.T,a.V.L,a.name);break}this.assert(p!==void 0,a.name+" map value",h);let d=l;a.K==ze.ScalarType.BOOL&&(d=d=="true"?!0:d=="false"?!1:d),d=this.scalar(d,a.K,ze.LongType.STRING,a.name).toString(),f[d]=p}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);let f=u[c];for(let l of o){this.assert(l!==null,a.name,null);let h;switch(a.kind){case"message":h=a.T().internalJsonRead(l,n);break;case"enum":if(h=this.enum(a.T(),l,a.name,n.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(l,a.T,a.L,a.name);break}this.assert(h!==void 0,a.name,o),f.push(h)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}u[c]=a.T().internalJsonRead(o,n,u[c]);break;case"enum":let f=this.enum(a.T(),o,a.name,n.ignoreUnknownFields);if(f===!1)continue;u[c]=f;break;case"scalar":u[c]=this.scalar(o,a.T,a.L,a.name);break}}}enum(e,r,n,i){if(e[0]=="google.protobuf.NullValue"&&wn.assert(r===null,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),r===null)return 0;switch(typeof r){case"number":return wn.assert(Number.isInteger(r),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${r}.`),r;case"string":let s=r;e[2]&&r.substring(0,e[2].length)===e[2]&&(s=r.substring(e[2].length));let o=e[1][s];return typeof o>"u"&&i?!1:(wn.assert(typeof o=="number",`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${r}".`),o)}wn.assert(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof r}".`)}scalar(e,r,n,i){let s;try{switch(r){case ze.ScalarType.DOUBLE:case ze.ScalarType.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){s="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){s="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let o=Number(e);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return r==ze.ScalarType.FLOAT&&wn.assertFloat32(o),o;case ze.ScalarType.INT32:case ze.ScalarType.FIXED32:case ze.ScalarType.SFIXED32:case ze.ScalarType.SINT32:case ze.ScalarType.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?s="empty string":typeof e=="string"&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),a===void 0)break;return r==ze.ScalarType.UINT32?wn.assertUInt32(a):wn.assertInt32(a),a;case ze.ScalarType.INT64:case ze.ScalarType.SFIXED64:case ze.ScalarType.SINT64:if(e===null)return $o.reflectionLongConvert(jo.PbLong.ZERO,n);if(typeof e!="number"&&typeof e!="string")break;return $o.reflectionLongConvert(jo.PbLong.from(e),n);case ze.ScalarType.FIXED64:case ze.ScalarType.UINT64:if(e===null)return $o.reflectionLongConvert(jo.PbULong.ZERO,n);if(typeof e!="number"&&typeof e!="string")break;return $o.reflectionLongConvert(jo.PbULong.from(e),n);case ze.ScalarType.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case ze.ScalarType.STRING:if(e===null)return"";if(typeof e!="string"){s="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case ze.ScalarType.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return yv.base64decode(e)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),e)}};Xo.ReflectionJsonReader=Ju});var e0=E(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.ReflectionJsonWriter=void 0;var gv=Lo(),np=Jr(),yt=zt(),Be=pi(),Qu=class{constructor(e){var r;this.fields=(r=e.fields)!==null&&r!==void 0?r:[]}write(e,r){let n={},i=e;for(let s of this.fields){if(!s.oneof){let u=this.field(s,i[s.localName],r);u!==void 0&&(n[r.useProtoFieldName?s.name:s.jsonName]=u);continue}let o=i[s.oneof];if(o.oneofKind!==s.localName)continue;let a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},r),{emitDefaultValues:!0}):r,c=this.field(s,o[s.localName],a);Be.assert(c!==void 0),n[r.useProtoFieldName?s.name:s.jsonName]=c}return n}field(e,r,n){let i;if(e.kind=="map"){Be.assert(typeof r=="object"&&r!==null);let s={};switch(e.V.kind){case"scalar":for(let[c,u]of Object.entries(r)){let f=this.scalar(e.V.T,u,e.name,!1,!0);Be.assert(f!==void 0),s[c.toString()]=f}break;case"message":let o=e.V.T();for(let[c,u]of Object.entries(r)){let f=this.message(o,u,e.name,n);Be.assert(f!==void 0),s[c.toString()]=f}break;case"enum":let a=e.V.T();for(let[c,u]of Object.entries(r)){Be.assert(u===void 0||typeof u=="number");let f=this.enum(a,u,e.name,!1,!0,n.enumAsInteger);Be.assert(f!==void 0),s[c.toString()]=f}break}(n.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(e.repeat){Be.assert(Array.isArray(r));let s=[];switch(e.kind){case"scalar":for(let c=0;c<r.length;c++){let u=this.scalar(e.T,r[c],e.name,e.opt,!0);Be.assert(u!==void 0),s.push(u)}break;case"enum":let o=e.T();for(let c=0;c<r.length;c++){Be.assert(r[c]===void 0||typeof r[c]=="number");let u=this.enum(o,r[c],e.name,e.opt,!0,n.enumAsInteger);Be.assert(u!==void 0),s.push(u)}break;case"message":let a=e.T();for(let c=0;c<r.length;c++){let u=this.message(a,r[c],e.name,n);Be.assert(u!==void 0),s.push(u)}break}(n.emitDefaultValues||s.length>0||n.emitDefaultValues)&&(i=s)}else switch(e.kind){case"scalar":i=this.scalar(e.T,r,e.name,e.opt,n.emitDefaultValues);break;case"enum":i=this.enum(e.T(),r,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(e.T(),r,e.name,n);break}return i}enum(e,r,n,i,s,o){if(e[0]=="google.protobuf.NullValue")return null;if(r===void 0){Be.assert(i);return}if(!(r===0&&!s&&!i))return Be.assert(typeof r=="number"),Be.assert(Number.isInteger(r)),o||!e[1].hasOwnProperty(r)?r:e[2]?e[2]+e[1][r]:e[1][r]}message(e,r,n,i){return r===void 0?i.emitDefaultValues?null:void 0:e.internalJsonWrite(r,i)}scalar(e,r,n,i,s){if(r===void 0){Be.assert(i);return}let o=s||i;switch(e){case yt.ScalarType.INT32:case yt.ScalarType.SFIXED32:case yt.ScalarType.SINT32:return r===0?o?0:void 0:(Be.assertInt32(r),r);case yt.ScalarType.FIXED32:case yt.ScalarType.UINT32:return r===0?o?0:void 0:(Be.assertUInt32(r),r);case yt.ScalarType.FLOAT:Be.assertFloat32(r);case yt.ScalarType.DOUBLE:return r===0?o?0:void 0:(Be.assert(typeof r=="number"),Number.isNaN(r)?"NaN":r===Number.POSITIVE_INFINITY?"Infinity":r===Number.NEGATIVE_INFINITY?"-Infinity":r);case yt.ScalarType.STRING:return r===""?o?"":void 0:(Be.assert(typeof r=="string"),r);case yt.ScalarType.BOOL:return r===!1?o?!1:void 0:(Be.assert(typeof r=="boolean"),r);case yt.ScalarType.UINT64:case yt.ScalarType.FIXED64:Be.assert(typeof r=="number"||typeof r=="string"||typeof r=="bigint");let a=np.PbULong.from(r);return a.isZero()&&!o?void 0:a.toString();case yt.ScalarType.INT64:case yt.ScalarType.SFIXED64:case yt.ScalarType.SINT64:Be.assert(typeof r=="number"||typeof r=="string"||typeof r=="bigint");let c=np.PbLong.from(r);return c.isZero()&&!o?void 0:c.toString();case yt.ScalarType.BYTES:return Be.assert(r instanceof Uint8Array),r.byteLength?gv.base64encode(r):o?"":void 0}}};Yo.ReflectionJsonWriter=Qu});var Zo=E(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.reflectionScalarDefault=void 0;var Ht=zt(),ip=Wo(),sp=Jr();function bv(t,e=Ht.LongType.STRING){switch(t){case Ht.ScalarType.BOOL:return!1;case Ht.ScalarType.UINT64:case Ht.ScalarType.FIXED64:return ip.reflectionLongConvert(sp.PbULong.ZERO,e);case Ht.ScalarType.INT64:case Ht.ScalarType.SFIXED64:case Ht.ScalarType.SINT64:return ip.reflectionLongConvert(sp.PbLong.ZERO,e);case Ht.ScalarType.DOUBLE:case Ht.ScalarType.FLOAT:return 0;case Ht.ScalarType.BYTES:return new Uint8Array(0);case Ht.ScalarType.STRING:return"";default:return 0}}Jo.reflectionScalarDefault=bv});var r0=E(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.ReflectionBinaryReader=void 0;var op=us(),Fe=zt(),ps=Wo(),ap=Zo(),t0=class{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let r=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(r.map(n=>[n.no,n]))}}read(e,r,n,i){this.prepare();let s=i===void 0?e.len:e.pos+i;for(;e.pos<s;){let[o,a]=e.tag(),c=this.fieldNoToField.get(o);if(!c){let h=n.readUnknownField;if(h=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let p=e.skip(a);h!==!1&&(h===!0?op.UnknownFieldHandler.onRead:h)(this.info.typeName,r,o,a,p);continue}let u=r,f=c.repeat,l=c.localName;switch(c.oneof&&(u=u[c.oneof],u.oneofKind!==l&&(u=r[c.oneof]={oneofKind:l})),c.kind){case"scalar":case"enum":let h=c.kind=="enum"?Fe.ScalarType.INT32:c.T,p=c.kind=="scalar"?c.L:void 0;if(f){let g=u[l];if(a==op.WireType.LengthDelimited&&h!=Fe.ScalarType.STRING&&h!=Fe.ScalarType.BYTES){let b=e.uint32()+e.pos;for(;e.pos<b;)g.push(this.scalar(e,h,p))}else g.push(this.scalar(e,h,p))}else u[l]=this.scalar(e,h,p);break;case"message":if(f){let g=u[l],b=c.T().internalBinaryRead(e,e.uint32(),n);g.push(b)}else u[l]=c.T().internalBinaryRead(e,e.uint32(),n,u[l]);break;case"map":let[d,y]=this.mapEntry(c,e,n);u[l][d]=y;break}}}mapEntry(e,r,n){let i=r.uint32(),s=r.pos+i,o,a;for(;r.pos<s;){let[c,u]=r.tag();switch(c){case 1:e.K==Fe.ScalarType.BOOL?o=r.bool().toString():o=this.scalar(r,e.K,Fe.LongType.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(r,e.V.T,e.V.L);break;case"enum":a=r.int32();break;case"message":a=e.V.T().internalBinaryRead(r,r.uint32(),n);break}break;default:throw new Error(`Unknown field ${c} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(o===void 0){let c=ap.reflectionScalarDefault(e.K);o=e.K==Fe.ScalarType.BOOL?c.toString():c}if(a===void 0)switch(e.V.kind){case"scalar":a=ap.reflectionScalarDefault(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[o,a]}scalar(e,r,n){switch(r){case Fe.ScalarType.INT32:return e.int32();case Fe.ScalarType.STRING:return e.string();case Fe.ScalarType.BOOL:return e.bool();case Fe.ScalarType.DOUBLE:return e.double();case Fe.ScalarType.FLOAT:return e.float();case Fe.ScalarType.INT64:return ps.reflectionLongConvert(e.int64(),n);case Fe.ScalarType.UINT64:return ps.reflectionLongConvert(e.uint64(),n);case Fe.ScalarType.FIXED64:return ps.reflectionLongConvert(e.fixed64(),n);case Fe.ScalarType.FIXED32:return e.fixed32();case Fe.ScalarType.BYTES:return e.bytes();case Fe.ScalarType.UINT32:return e.uint32();case Fe.ScalarType.SFIXED32:return e.sfixed32();case Fe.ScalarType.SFIXED64:return ps.reflectionLongConvert(e.sfixed64(),n);case Fe.ScalarType.SINT32:return e.sint32();case Fe.ScalarType.SINT64:return ps.reflectionLongConvert(e.sint64(),n)}}};Qo.ReflectionBinaryReader=t0});var i0=E(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.ReflectionBinaryWriter=void 0;var _t=us(),Ee=zt(),bi=pi(),ys=Jr(),n0=class{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((r,n)=>r.no-n.no)}}write(e,r,n){this.prepare();for(let s of this.fields){let o,a,c=s.repeat,u=s.localName;if(s.oneof){let f=e[s.oneof];if(f.oneofKind!==u)continue;o=f[u],a=!0}else o=e[u],a=!1;switch(s.kind){case"scalar":case"enum":let f=s.kind=="enum"?Ee.ScalarType.INT32:s.T;if(c)if(bi.assert(Array.isArray(o)),c==Ee.RepeatType.PACKED)this.packed(r,f,s.no,o);else for(let l of o)this.scalar(r,f,s.no,l,!0);else o===void 0?bi.assert(s.opt):this.scalar(r,f,s.no,o,a||s.opt);break;case"message":if(c){bi.assert(Array.isArray(o));for(let l of o)this.message(r,n,s.T(),s.no,l)}else this.message(r,n,s.T(),s.no,o);break;case"map":bi.assert(typeof o=="object"&&o!==null);for(let[l,h]of Object.entries(o))this.mapEntry(r,n,s,l,h);break}}let i=n.writeUnknownFields;i!==!1&&(i===!0?_t.UnknownFieldHandler.onWrite:i)(this.info.typeName,e,r)}mapEntry(e,r,n,i,s){e.tag(n.no,_t.WireType.LengthDelimited),e.fork();let o=i;switch(n.K){case Ee.ScalarType.INT32:case Ee.ScalarType.FIXED32:case Ee.ScalarType.UINT32:case Ee.ScalarType.SFIXED32:case Ee.ScalarType.SINT32:o=Number.parseInt(i);break;case Ee.ScalarType.BOOL:bi.assert(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(e,n.K,1,o,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,s,!0);break;case"enum":this.scalar(e,Ee.ScalarType.INT32,2,s,!0);break;case"message":this.message(e,r,n.V.T(),2,s);break}e.join()}message(e,r,n,i,s){s!==void 0&&(n.internalBinaryWrite(s,e.tag(i,_t.WireType.LengthDelimited).fork(),r),e.join())}scalar(e,r,n,i,s){let[o,a,c]=this.scalarInfo(r,i);(!c||s)&&(e.tag(n,o),e[a](i))}packed(e,r,n,i){if(!i.length)return;bi.assert(r!==Ee.ScalarType.BYTES&&r!==Ee.ScalarType.STRING),e.tag(n,_t.WireType.LengthDelimited),e.fork();let[,s]=this.scalarInfo(r);for(let o=0;o<i.length;o++)e[s](i[o]);e.join()}scalarInfo(e,r){let n=_t.WireType.Varint,i,s=r===void 0,o=r===0;switch(e){case Ee.ScalarType.INT32:i="int32";break;case Ee.ScalarType.STRING:o=s||!r.length,n=_t.WireType.LengthDelimited,i="string";break;case Ee.ScalarType.BOOL:o=r===!1,i="bool";break;case Ee.ScalarType.UINT32:i="uint32";break;case Ee.ScalarType.DOUBLE:n=_t.WireType.Bit64,i="double";break;case Ee.ScalarType.FLOAT:n=_t.WireType.Bit32,i="float";break;case Ee.ScalarType.INT64:o=s||ys.PbLong.from(r).isZero(),i="int64";break;case Ee.ScalarType.UINT64:o=s||ys.PbULong.from(r).isZero(),i="uint64";break;case Ee.ScalarType.FIXED64:o=s||ys.PbULong.from(r).isZero(),n=_t.WireType.Bit64,i="fixed64";break;case Ee.ScalarType.BYTES:o=s||!r.byteLength,n=_t.WireType.LengthDelimited,i="bytes";break;case Ee.ScalarType.FIXED32:n=_t.WireType.Bit32,i="fixed32";break;case Ee.ScalarType.SFIXED32:n=_t.WireType.Bit32,i="sfixed32";break;case Ee.ScalarType.SFIXED64:o=s||ys.PbLong.from(r).isZero(),n=_t.WireType.Bit64,i="sfixed64";break;case Ee.ScalarType.SINT32:i="sint32";break;case Ee.ScalarType.SINT64:o=s||ys.PbLong.from(r).isZero(),i="sint64";break}return[n,i,s||o]}};ea.ReflectionBinaryWriter=n0});var s0=E(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.reflectionCreate=void 0;var mv=Zo(),xv=qo();function wv(t){let e={};Object.defineProperty(e,xv.MESSAGE_TYPE,{enumerable:!1,value:t});for(let r of t.fields){let n=r.localName;if(!r.opt)if(r.oneof)e[r.oneof]={oneofKind:void 0};else if(r.repeat)e[n]=[];else switch(r.kind){case"scalar":e[n]=mv.reflectionScalarDefault(r.T,r.L);break;case"enum":e[n]=0;break;case"map":e[n]={};break}}return e}ta.reflectionCreate=wv});var o0=E(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.reflectionMergePartial=void 0;function vv(t,e,r){let n,i=r,s;for(let o of t.fields){let a=o.localName;if(o.oneof){let c=i[o.oneof];if(c?.oneofKind==null)continue;if(n=c[a],s=e[o.oneof],s.oneofKind=c.oneofKind,n==null){delete s[a];continue}}else if(n=i[a],s=e,n==null)continue;switch(o.repeat&&(s[a].length=n.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let u=0;u<n.length;u++)s[a][u]=n[u];else s[a]=n;break;case"message":let c=o.T();if(o.repeat)for(let u=0;u<n.length;u++)s[a][u]=c.create(n[u]);else s[a]===void 0?s[a]=c.create(n):c.mergePartial(s[a],n);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],n);break;case"message":let u=o.V.T();for(let f of Object.keys(n))s[a][f]=u.create(n[f]);break}break}}}ra.reflectionMergePartial=vv});var c0=E(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.reflectionEquals=void 0;var a0=zt();function Ev(t,e,r){if(e===r)return!0;if(!e||!r)return!1;for(let n of t.fields){let i=n.localName,s=n.oneof?e[n.oneof][i]:e[i],o=n.oneof?r[n.oneof][i]:r[i];switch(n.kind){case"enum":case"scalar":let a=n.kind=="enum"?a0.ScalarType.INT32:n.T;if(!(n.repeat?cp(a,s,o):fp(a,s,o)))return!1;break;case"map":if(!(n.V.kind=="message"?up(n.V.T(),na(s),na(o)):cp(n.V.kind=="enum"?a0.ScalarType.INT32:n.V.T,na(s),na(o))))return!1;break;case"message":let c=n.T();if(!(n.repeat?up(c,s,o):c.equals(s,o)))return!1;break}}return!0}ia.reflectionEquals=Ev;var na=Object.values;function fp(t,e,r){if(e===r)return!0;if(t!==a0.ScalarType.BYTES)return!1;let n=e,i=r;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!=i[s])return!1;return!0}function cp(t,e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!fp(t,e[n],r[n]))return!1;return!0}function up(t,e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t.equals(e[n],r[n]))return!1;return!0}});var hp=E(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.MessageType=void 0;var Sv=zt(),_v=Yu(),Av=Zu(),Cv=e0(),Dv=r0(),Tv=i0(),Bv=s0(),u0=o0(),Iv=ko(),lp=Wu(),kv=c0(),Nv=Gu(),Lv=Hu(),f0=class{constructor(e,r,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=r.map(Sv.normalizeFieldInfo),this.options=n??{},this.refTypeCheck=new _v.ReflectionTypeCheck(this),this.refJsonReader=new Av.ReflectionJsonReader(this),this.refJsonWriter=new Cv.ReflectionJsonWriter(this),this.refBinReader=new Dv.ReflectionBinaryReader(this),this.refBinWriter=new Tv.ReflectionBinaryWriter(this)}create(e){let r=Bv.reflectionCreate(this);return e!==void 0&&u0.reflectionMergePartial(this,r,e),r}clone(e){let r=this.create();return u0.reflectionMergePartial(this,r,e),r}equals(e,r){return kv.reflectionEquals(this,e,r)}is(e,r=this.defaultCheckDepth){return this.refTypeCheck.is(e,r,!1)}isAssignable(e,r=this.defaultCheckDepth){return this.refTypeCheck.is(e,r,!0)}mergePartial(e,r){u0.reflectionMergePartial(this,e,r)}fromBinary(e,r){let n=Lv.binaryReadOptions(r);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,r){return this.internalJsonRead(e,lp.jsonReadOptions(r))}fromJsonString(e,r){let n=JSON.parse(e);return this.fromJson(n,r)}toJson(e,r){return this.internalJsonWrite(e,lp.jsonWriteOptions(r))}toJsonString(e,r){var n;let i=this.toJson(e,r);return JSON.stringify(i,null,(n=r?.prettySpaces)!==null&&n!==void 0?n:0)}toBinary(e,r){let n=Nv.binaryWriteOptions(r);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,r,n){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let i=n??this.create();return this.refJsonReader.read(e,i,r),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${Iv.typeofJsonValue(e)}.`)}internalJsonWrite(e,r){return this.refJsonWriter.write(e,r)}internalBinaryWrite(e,r,n){return this.refBinWriter.write(e,r,n),r}internalBinaryRead(e,r,n,i){let s=i??this.create();return this.refBinReader.read(e,s,n,r),s}};sa.MessageType=f0});var dp=E(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.containsMessageType=void 0;var Rv=qo();function Ov(t){return t[Rv.MESSAGE_TYPE]!=null}oa.containsMessageType=Ov});var yp=E(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.listEnumNumbers=ar.listEnumNames=ar.listEnumValues=ar.isEnumObject=void 0;function pp(t){if(typeof t!="object"||t===null||!t.hasOwnProperty(0))return!1;for(let e of Object.keys(t)){let r=parseInt(e);if(Number.isNaN(r)){let n=t[e];if(n===void 0||typeof n!="number"||t[n]===void 0)return!1}else{let n=t[r];if(n===void 0||t[n]!==r)return!1}}return!0}ar.isEnumObject=pp;function l0(t){if(!pp(t))throw new Error("not a typescript enum object");let e=[];for(let[r,n]of Object.entries(t))typeof n=="number"&&e.push({name:r,number:n});return e}ar.listEnumValues=l0;function Pv(t){return l0(t).map(e=>e.name)}ar.listEnumNames=Pv;function Uv(t){return l0(t).map(e=>e.number).filter((e,r,n)=>n.indexOf(e)==r)}ar.listEnumNumbers=Uv});var mi=E(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var gp=ko();Object.defineProperty(F,"typeofJsonValue",{enumerable:!0,get:function(){return gp.typeofJsonValue}});Object.defineProperty(F,"isJsonObject",{enumerable:!0,get:function(){return gp.isJsonObject}});var bp=Lo();Object.defineProperty(F,"base64decode",{enumerable:!0,get:function(){return bp.base64decode}});Object.defineProperty(F,"base64encode",{enumerable:!0,get:function(){return bp.base64encode}});var Fv=Gd();Object.defineProperty(F,"utf8read",{enumerable:!0,get:function(){return Fv.utf8read}});var h0=us();Object.defineProperty(F,"WireType",{enumerable:!0,get:function(){return h0.WireType}});Object.defineProperty(F,"mergeBinaryOptions",{enumerable:!0,get:function(){return h0.mergeBinaryOptions}});Object.defineProperty(F,"UnknownFieldHandler",{enumerable:!0,get:function(){return h0.UnknownFieldHandler}});var mp=Hu();Object.defineProperty(F,"BinaryReader",{enumerable:!0,get:function(){return mp.BinaryReader}});Object.defineProperty(F,"binaryReadOptions",{enumerable:!0,get:function(){return mp.binaryReadOptions}});var xp=Gu();Object.defineProperty(F,"BinaryWriter",{enumerable:!0,get:function(){return xp.BinaryWriter}});Object.defineProperty(F,"binaryWriteOptions",{enumerable:!0,get:function(){return xp.binaryWriteOptions}});var wp=Jr();Object.defineProperty(F,"PbLong",{enumerable:!0,get:function(){return wp.PbLong}});Object.defineProperty(F,"PbULong",{enumerable:!0,get:function(){return wp.PbULong}});var d0=Wu();Object.defineProperty(F,"jsonReadOptions",{enumerable:!0,get:function(){return d0.jsonReadOptions}});Object.defineProperty(F,"jsonWriteOptions",{enumerable:!0,get:function(){return d0.jsonWriteOptions}});Object.defineProperty(F,"mergeJsonOptions",{enumerable:!0,get:function(){return d0.mergeJsonOptions}});var Mv=qo();Object.defineProperty(F,"MESSAGE_TYPE",{enumerable:!0,get:function(){return Mv.MESSAGE_TYPE}});var Kv=hp();Object.defineProperty(F,"MessageType",{enumerable:!0,get:function(){return Kv.MessageType}});var vn=zt();Object.defineProperty(F,"ScalarType",{enumerable:!0,get:function(){return vn.ScalarType}});Object.defineProperty(F,"LongType",{enumerable:!0,get:function(){return vn.LongType}});Object.defineProperty(F,"RepeatType",{enumerable:!0,get:function(){return vn.RepeatType}});Object.defineProperty(F,"normalizeFieldInfo",{enumerable:!0,get:function(){return vn.normalizeFieldInfo}});Object.defineProperty(F,"readFieldOptions",{enumerable:!0,get:function(){return vn.readFieldOptions}});Object.defineProperty(F,"readFieldOption",{enumerable:!0,get:function(){return vn.readFieldOption}});Object.defineProperty(F,"readMessageOption",{enumerable:!0,get:function(){return vn.readMessageOption}});var Vv=Yu();Object.defineProperty(F,"ReflectionTypeCheck",{enumerable:!0,get:function(){return Vv.ReflectionTypeCheck}});var qv=s0();Object.defineProperty(F,"reflectionCreate",{enumerable:!0,get:function(){return qv.reflectionCreate}});var zv=Zo();Object.defineProperty(F,"reflectionScalarDefault",{enumerable:!0,get:function(){return zv.reflectionScalarDefault}});var Hv=o0();Object.defineProperty(F,"reflectionMergePartial",{enumerable:!0,get:function(){return Hv.reflectionMergePartial}});var Gv=c0();Object.defineProperty(F,"reflectionEquals",{enumerable:!0,get:function(){return Gv.reflectionEquals}});var Wv=r0();Object.defineProperty(F,"ReflectionBinaryReader",{enumerable:!0,get:function(){return Wv.ReflectionBinaryReader}});var jv=i0();Object.defineProperty(F,"ReflectionBinaryWriter",{enumerable:!0,get:function(){return jv.ReflectionBinaryWriter}});var $v=Zu();Object.defineProperty(F,"ReflectionJsonReader",{enumerable:!0,get:function(){return $v.ReflectionJsonReader}});var Xv=e0();Object.defineProperty(F,"ReflectionJsonWriter",{enumerable:!0,get:function(){return Xv.ReflectionJsonWriter}});var Yv=dp();Object.defineProperty(F,"containsMessageType",{enumerable:!0,get:function(){return Yv.containsMessageType}});var gs=$u();Object.defineProperty(F,"isOneofGroup",{enumerable:!0,get:function(){return gs.isOneofGroup}});Object.defineProperty(F,"setOneofValue",{enumerable:!0,get:function(){return gs.setOneofValue}});Object.defineProperty(F,"getOneofValue",{enumerable:!0,get:function(){return gs.getOneofValue}});Object.defineProperty(F,"clearOneofValue",{enumerable:!0,get:function(){return gs.clearOneofValue}});Object.defineProperty(F,"getSelectedOneofValue",{enumerable:!0,get:function(){return gs.getSelectedOneofValue}});var aa=yp();Object.defineProperty(F,"listEnumValues",{enumerable:!0,get:function(){return aa.listEnumValues}});Object.defineProperty(F,"listEnumNames",{enumerable:!0,get:function(){return aa.listEnumNames}});Object.defineProperty(F,"listEnumNumbers",{enumerable:!0,get:function(){return aa.listEnumNumbers}});Object.defineProperty(F,"isEnumObject",{enumerable:!0,get:function(){return aa.isEnumObject}});var Jv=ju();Object.defineProperty(F,"lowerCamelCase",{enumerable:!0,get:function(){return Jv.lowerCamelCase}});var bs=pi();Object.defineProperty(F,"assert",{enumerable:!0,get:function(){return bs.assert}});Object.defineProperty(F,"assertNever",{enumerable:!0,get:function(){return bs.assertNever}});Object.defineProperty(F,"assertInt32",{enumerable:!0,get:function(){return bs.assertInt32}});Object.defineProperty(F,"assertUInt32",{enumerable:!0,get:function(){return bs.assertUInt32}});Object.defineProperty(F,"assertFloat32",{enumerable:!0,get:function(){return bs.assertFloat32}})});var Np=E(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});function n3(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}S0.isSerializableHash=n3});var la=E(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});function i3(t,e,r){return~(t-1)&e|t-1&r}wi.select=i3;function s3(t,e){return(t|0)-(e|0)-1>>>31&1}wi.lessOrEqual=s3;function Lp(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}wi.compare=Lp;function o3(t,e){return t.length===0||e.length===0?!1:Lp(t,e)!==0}wi.equal=o3});var cr=E(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});function a3(t){for(var e=0;e<t.length;e++)t[e]=0;return t}_0.wipe=a3});var Op=E(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});var ur=Np(),c3=la(),u3=cr(),Rp=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),ur.isSerializableHash(this._inner)&&ur.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),u3.wipe(n)}return t.prototype.reset=function(){if(!ur.isSerializableHash(this._inner)||!ur.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){ur.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ur.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!ur.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!ur.isSerializableHash(this._inner)||!ur.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!ur.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();ms.HMAC=Rp;function f3(t,e,r){var n=new Rp(t,e);n.update(r);var i=n.digest();return n.clean(),i}ms.hmac=f3;ms.equal=c3.equal});var Fp=E(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});var Pp=Op(),Up=cr(),l3=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Pp.hmac(this._hash,n,r);this._hmac=new Pp.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Up.wipe(this._buffer),Up.wipe(this._counter),this._bufpos=0},t}();A0.HKDF=l3});var Kp=E(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.BrowserRandomSource=void 0;var Mp=65536,C0=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=Mp)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Mp)));return r}};ha.BrowserRandomSource=C0});var Vp=E(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.NodeRandomSource=void 0;var h3=cr(),D0=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof He<"u"){let e=He("crypto");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,h3.wipe)(r),n}};da.NodeRandomSource=D0});var qp=E(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.SystemRandomSource=void 0;var d3=Kp(),p3=Vp(),T0=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new d3.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new p3.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};pa.SystemRandomSource=T0});var zp=E(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});function y3(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}At.mul=Math.imul||y3;function g3(t,e){return t+e|0}At.add=g3;function b3(t,e){return t-e|0}At.sub=b3;function m3(t,e){return t<<e|t>>>32-e}At.rotl=m3;function x3(t,e){return t<<32-e|t>>>e}At.rotr=x3;function w3(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}At.isInteger=Number.isInteger||w3;At.MAX_SAFE_INTEGER=9007199254740991;At.isSafeInteger=function(t){return At.isInteger(t)&&t>=-At.MAX_SAFE_INTEGER&&t<=At.MAX_SAFE_INTEGER}});var xs=E(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var Hp=zp();function v3(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}X.readInt16BE=v3;function E3(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}X.readUint16BE=E3;function S3(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}X.readInt16LE=S3;function _3(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}X.readUint16LE=_3;function Gp(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}X.writeUint16BE=Gp;X.writeInt16BE=Gp;function Wp(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}X.writeUint16LE=Wp;X.writeInt16LE=Wp;function B0(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}X.readInt32BE=B0;function I0(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}X.readUint32BE=I0;function k0(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}X.readInt32LE=k0;function N0(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}X.readUint32LE=N0;function ya(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}X.writeUint32BE=ya;X.writeInt32BE=ya;function ga(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}X.writeUint32LE=ga;X.writeInt32LE=ga;function A3(t,e){e===void 0&&(e=0);var r=B0(t,e),n=B0(t,e+4);return r*4294967296+n-(n>>31)*4294967296}X.readInt64BE=A3;function C3(t,e){e===void 0&&(e=0);var r=I0(t,e),n=I0(t,e+4);return r*4294967296+n}X.readUint64BE=C3;function D3(t,e){e===void 0&&(e=0);var r=k0(t,e),n=k0(t,e+4);return n*4294967296+r-(r>>31)*4294967296}X.readInt64LE=D3;function T3(t,e){e===void 0&&(e=0);var r=N0(t,e),n=N0(t,e+4);return n*4294967296+r}X.readUint64LE=T3;function jp(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ya(t/4294967296>>>0,e,r),ya(t>>>0,e,r+4),e}X.writeUint64BE=jp;X.writeInt64BE=jp;function $p(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ga(t>>>0,e,r),ga(t/4294967296>>>0,e,r+4),e}X.writeUint64LE=$p;X.writeInt64LE=$p;function B3(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}X.readUintBE=B3;function I3(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}X.readUintLE=I3;function k3(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Hp.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}X.writeUintBE=k3;function N3(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Hp.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}X.writeUintLE=N3;function L3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}X.readFloat32BE=L3;function R3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}X.readFloat32LE=R3;function O3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}X.readFloat64BE=O3;function P3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}X.readFloat64LE=P3;function U3(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}X.writeFloat32BE=U3;function F3(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}X.writeFloat32LE=F3;function M3(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}X.writeFloat64BE=M3;function K3(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}X.writeFloat64LE=K3});var Zp=E(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.randomStringForEntropy=ht.randomString=ht.randomUint32=ht.randomBytes=ht.defaultRandomSource=void 0;var V3=qp(),q3=xs(),Xp=cr();ht.defaultRandomSource=new V3.SystemRandomSource;function L0(t,e=ht.defaultRandomSource){return e.randomBytes(t)}ht.randomBytes=L0;function z3(t=ht.defaultRandomSource){let e=L0(4,t),r=(0,q3.readUint32LE)(e);return(0,Xp.wipe)(e),r}ht.randomUint32=z3;var Yp="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Jp(t,e=Yp,r=ht.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;t>0;){let o=L0(Math.ceil(t*256/s),r);for(let a=0;a<o.length&&t>0;a++){let c=o[a];c<s&&(n+=e.charAt(c%i),t--)}(0,Xp.wipe)(o)}return n}ht.randomString=Jp;function H3(t,e=Yp,r=ht.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return Jp(n,e,r)}ht.randomStringForEntropy=H3});var ry=E(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.sharedKey=Re.generateKeyPair=Re.generateKeyPairFromSeed=Re.scalarMultBase=Re.scalarMult=Re.SHARED_KEY_LENGTH=Re.SECRET_KEY_LENGTH=Re.PUBLIC_KEY_LENGTH=void 0;var G3=Zp(),W3=cr();Re.PUBLIC_KEY_LENGTH=32;Re.SECRET_KEY_LENGTH=32;Re.SHARED_KEY_LENGTH=32;function fr(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var Qp=new Uint8Array(32);Qp[0]=9;var j3=fr([56129,1]);function R0(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function ws(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function $3(t,e){let r=fr(),n=fr();for(let i=0;i<16;i++)n[i]=e[i];R0(n),R0(n),R0(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,ws(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function X3(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function ba(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function ma(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function Lr(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,f=0,l=0,h=0,p=0,d=0,y=0,g=0,b=0,v=0,w=0,C=0,S=0,_=0,T=0,I=0,O=0,K=0,z=0,G=0,ie=0,be=0,M=0,q=0,D=0,V=0,we=0,Z=r[0],Q=r[1],te=r[2],ce=r[3],ue=r[4],fe=r[5],le=r[6],he=r[7],tt=r[8],rt=r[9],nt=r[10],it=r[11],st=r[12],ot=r[13],at=r[14],ct=r[15];n=e[0],s+=n*Z,o+=n*Q,a+=n*te,c+=n*ce,u+=n*ue,f+=n*fe,l+=n*le,h+=n*he,p+=n*tt,d+=n*rt,y+=n*nt,g+=n*it,b+=n*st,v+=n*ot,w+=n*at,C+=n*ct,n=e[1],o+=n*Z,a+=n*Q,c+=n*te,u+=n*ce,f+=n*ue,l+=n*fe,h+=n*le,p+=n*he,d+=n*tt,y+=n*rt,g+=n*nt,b+=n*it,v+=n*st,w+=n*ot,C+=n*at,S+=n*ct,n=e[2],a+=n*Z,c+=n*Q,u+=n*te,f+=n*ce,l+=n*ue,h+=n*fe,p+=n*le,d+=n*he,y+=n*tt,g+=n*rt,b+=n*nt,v+=n*it,w+=n*st,C+=n*ot,S+=n*at,_+=n*ct,n=e[3],c+=n*Z,u+=n*Q,f+=n*te,l+=n*ce,h+=n*ue,p+=n*fe,d+=n*le,y+=n*he,g+=n*tt,b+=n*rt,v+=n*nt,w+=n*it,C+=n*st,S+=n*ot,_+=n*at,T+=n*ct,n=e[4],u+=n*Z,f+=n*Q,l+=n*te,h+=n*ce,p+=n*ue,d+=n*fe,y+=n*le,g+=n*he,b+=n*tt,v+=n*rt,w+=n*nt,C+=n*it,S+=n*st,_+=n*ot,T+=n*at,I+=n*ct,n=e[5],f+=n*Z,l+=n*Q,h+=n*te,p+=n*ce,d+=n*ue,y+=n*fe,g+=n*le,b+=n*he,v+=n*tt,w+=n*rt,C+=n*nt,S+=n*it,_+=n*st,T+=n*ot,I+=n*at,O+=n*ct,n=e[6],l+=n*Z,h+=n*Q,p+=n*te,d+=n*ce,y+=n*ue,g+=n*fe,b+=n*le,v+=n*he,w+=n*tt,C+=n*rt,S+=n*nt,_+=n*it,T+=n*st,I+=n*ot,O+=n*at,K+=n*ct,n=e[7],h+=n*Z,p+=n*Q,d+=n*te,y+=n*ce,g+=n*ue,b+=n*fe,v+=n*le,w+=n*he,C+=n*tt,S+=n*rt,_+=n*nt,T+=n*it,I+=n*st,O+=n*ot,K+=n*at,z+=n*ct,n=e[8],p+=n*Z,d+=n*Q,y+=n*te,g+=n*ce,b+=n*ue,v+=n*fe,w+=n*le,C+=n*he,S+=n*tt,_+=n*rt,T+=n*nt,I+=n*it,O+=n*st,K+=n*ot,z+=n*at,G+=n*ct,n=e[9],d+=n*Z,y+=n*Q,g+=n*te,b+=n*ce,v+=n*ue,w+=n*fe,C+=n*le,S+=n*he,_+=n*tt,T+=n*rt,I+=n*nt,O+=n*it,K+=n*st,z+=n*ot,G+=n*at,ie+=n*ct,n=e[10],y+=n*Z,g+=n*Q,b+=n*te,v+=n*ce,w+=n*ue,C+=n*fe,S+=n*le,_+=n*he,T+=n*tt,I+=n*rt,O+=n*nt,K+=n*it,z+=n*st,G+=n*ot,ie+=n*at,be+=n*ct,n=e[11],g+=n*Z,b+=n*Q,v+=n*te,w+=n*ce,C+=n*ue,S+=n*fe,_+=n*le,T+=n*he,I+=n*tt,O+=n*rt,K+=n*nt,z+=n*it,G+=n*st,ie+=n*ot,be+=n*at,M+=n*ct,n=e[12],b+=n*Z,v+=n*Q,w+=n*te,C+=n*ce,S+=n*ue,_+=n*fe,T+=n*le,I+=n*he,O+=n*tt,K+=n*rt,z+=n*nt,G+=n*it,ie+=n*st,be+=n*ot,M+=n*at,q+=n*ct,n=e[13],v+=n*Z,w+=n*Q,C+=n*te,S+=n*ce,_+=n*ue,T+=n*fe,I+=n*le,O+=n*he,K+=n*tt,z+=n*rt,G+=n*nt,ie+=n*it,be+=n*st,M+=n*ot,q+=n*at,D+=n*ct,n=e[14],w+=n*Z,C+=n*Q,S+=n*te,_+=n*ce,T+=n*ue,I+=n*fe,O+=n*le,K+=n*he,z+=n*tt,G+=n*rt,ie+=n*nt,be+=n*it,M+=n*st,q+=n*ot,D+=n*at,V+=n*ct,n=e[15],C+=n*Z,S+=n*Q,_+=n*te,T+=n*ce,I+=n*ue,O+=n*fe,K+=n*le,z+=n*he,G+=n*tt,ie+=n*rt,be+=n*nt,M+=n*it,q+=n*st,D+=n*ot,V+=n*at,we+=n*ct,s+=38*S,o+=38*_,a+=38*T,c+=38*I,u+=38*O,f+=38*K,l+=38*z,h+=38*G,p+=38*ie,d+=38*be,y+=38*M,g+=38*q,b+=38*D,v+=38*V,w+=38*we,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=l,t[7]=h,t[8]=p,t[9]=d,t[10]=y,t[11]=g,t[12]=b,t[13]=v,t[14]=w,t[15]=C}function vs(t,e){Lr(t,e,e)}function Y3(t,e){let r=fr();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)vs(r,r),n!==2&&n!==4&&Lr(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function O0(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=fr(),s=fr(),o=fr(),a=fr(),c=fr(),u=fr();for(let p=0;p<31;p++)r[p]=t[p];r[31]=t[31]&127|64,r[0]&=248,X3(n,e);for(let p=0;p<16;p++)s[p]=n[p];i[0]=a[0]=1;for(let p=254;p>=0;--p){let d=r[p>>>3]>>>(p&7)&1;ws(i,s,d),ws(o,a,d),ba(c,i,o),ma(i,i,o),ba(o,s,a),ma(s,s,a),vs(a,c),vs(u,i),Lr(i,o,i),Lr(o,s,c),ba(c,i,o),ma(i,i,o),vs(s,i),ma(o,a,u),Lr(i,o,j3),ba(i,i,a),Lr(o,o,i),Lr(i,a,u),Lr(a,s,n),vs(s,c),ws(i,s,d),ws(o,a,d)}for(let p=0;p<16;p++)n[p+16]=i[p],n[p+32]=o[p],n[p+48]=s[p],n[p+64]=a[p];let f=n.subarray(32),l=n.subarray(16);Y3(f,f),Lr(l,l,f);let h=new Uint8Array(32);return $3(h,l),h}Re.scalarMult=O0;function ey(t){return O0(t,Qp)}Re.scalarMultBase=ey;function ty(t){if(t.length!==Re.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${Re.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:ey(e),secretKey:e}}Re.generateKeyPairFromSeed=ty;function J3(t){let e=(0,G3.randomBytes)(32,t),r=ty(e);return(0,W3.wipe)(e),r}Re.generateKeyPair=J3;function Z3(t,e,r=!1){if(t.length!==Re.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==Re.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=O0(t,e);if(r){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}Re.sharedKey=Z3});var iy=E(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var wa=xs(),xa=cr();Qr.DIGEST_LENGTH=32;Qr.BLOCK_SIZE=64;var ny=function(){function t(){this.digestLength=Qr.DIGEST_LENGTH,this.blockSize=Qr.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){xa.wipe(this._buffer),xa.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(P0(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=P0(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;wa.writeUint32BE(i,this._buffer,o-8),wa.writeUint32BE(s,this._buffer,o-4),P0(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)wa.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){xa.wipe(e.state),e.buffer&&xa.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Qr.SHA256=ny;var Q3=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function P0(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],l=e[6],h=e[7],p=0;p<16;p++){var d=n+p*4;t[p]=wa.readUint32BE(r,d)}for(var p=16;p<64;p++){var y=t[p-2],g=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[p-15];var b=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[p]=(g+t[p-7]|0)+(b+t[p-16]|0)}for(var p=0;p<64;p++){var g=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&f^~u&l)|0)+(h+(Q3[p]+t[p]|0)|0)|0,b=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;h=l,l=f,f=u,u=c+g|0,c=a,a=o,o=s,s=g+b|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=f,e[6]+=l,e[7]+=h,n+=64,i-=64}return n}function e8(t){var e=new ny;e.update(t);var r=e.digest();return e.clean(),r}Qr.hash=e8});var oy=E(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var dt=xs(),U0=cr(),t8=20;function r8(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],l=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],d=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],g=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=n,C=i,S=s,_=o,T=a,I=c,O=u,K=f,z=l,G=h,ie=p,be=d,M=y,q=g,D=b,V=v,we=0;we<t8;we+=2)w=w+T|0,M^=w,M=M>>>32-16|M<<16,z=z+M|0,T^=z,T=T>>>32-12|T<<12,C=C+I|0,q^=C,q=q>>>32-16|q<<16,G=G+q|0,I^=G,I=I>>>32-12|I<<12,S=S+O|0,D^=S,D=D>>>32-16|D<<16,ie=ie+D|0,O^=ie,O=O>>>32-12|O<<12,_=_+K|0,V^=_,V=V>>>32-16|V<<16,be=be+V|0,K^=be,K=K>>>32-12|K<<12,S=S+O|0,D^=S,D=D>>>32-8|D<<8,ie=ie+D|0,O^=ie,O=O>>>32-7|O<<7,_=_+K|0,V^=_,V=V>>>32-8|V<<8,be=be+V|0,K^=be,K=K>>>32-7|K<<7,C=C+I|0,q^=C,q=q>>>32-8|q<<8,G=G+q|0,I^=G,I=I>>>32-7|I<<7,w=w+T|0,M^=w,M=M>>>32-8|M<<8,z=z+M|0,T^=z,T=T>>>32-7|T<<7,w=w+I|0,V^=w,V=V>>>32-16|V<<16,ie=ie+V|0,I^=ie,I=I>>>32-12|I<<12,C=C+O|0,M^=C,M=M>>>32-16|M<<16,be=be+M|0,O^=be,O=O>>>32-12|O<<12,S=S+K|0,q^=S,q=q>>>32-16|q<<16,z=z+q|0,K^=z,K=K>>>32-12|K<<12,_=_+T|0,D^=_,D=D>>>32-16|D<<16,G=G+D|0,T^=G,T=T>>>32-12|T<<12,S=S+K|0,q^=S,q=q>>>32-8|q<<8,z=z+q|0,K^=z,K=K>>>32-7|K<<7,_=_+T|0,D^=_,D=D>>>32-8|D<<8,G=G+D|0,T^=G,T=T>>>32-7|T<<7,C=C+O|0,M^=C,M=M>>>32-8|M<<8,be=be+M|0,O^=be,O=O>>>32-7|O<<7,w=w+I|0,V^=w,V=V>>>32-8|V<<8,ie=ie+V|0,I^=ie,I=I>>>32-7|I<<7;dt.writeUint32LE(w+n|0,t,0),dt.writeUint32LE(C+i|0,t,4),dt.writeUint32LE(S+s|0,t,8),dt.writeUint32LE(_+o|0,t,12),dt.writeUint32LE(T+a|0,t,16),dt.writeUint32LE(I+c|0,t,20),dt.writeUint32LE(O+u|0,t,24),dt.writeUint32LE(K+f|0,t,28),dt.writeUint32LE(z+l|0,t,32),dt.writeUint32LE(G+h|0,t,36),dt.writeUint32LE(ie+p|0,t,40),dt.writeUint32LE(be+d|0,t,44),dt.writeUint32LE(M+y|0,t,48),dt.writeUint32LE(q+g|0,t,52),dt.writeUint32LE(D+b|0,t,56),dt.writeUint32LE(V+v|0,t,60)}function sy(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){r8(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];i8(s,0,o)}return U0.wipe(a),i===0&&U0.wipe(s),n}va.streamXOR=sy;function n8(t,e,r,n){return n===void 0&&(n=0),U0.wipe(r),sy(t,e,r,r,n)}va.stream=n8;function i8(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var cy=E(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var s8=la(),Ea=cr();Rr.DIGEST_LENGTH=16;var ay=function(){function t(e){this.digestLength=Rr.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],f=this._h[5],l=this._h[6],h=this._h[7],p=this._h[8],d=this._h[9],y=this._r[0],g=this._r[1],b=this._r[2],v=this._r[3],w=this._r[4],C=this._r[5],S=this._r[6],_=this._r[7],T=this._r[8],I=this._r[9];n>=16;){var O=e[r+0]|e[r+1]<<8;s+=O&8191;var K=e[r+2]|e[r+3]<<8;o+=(O>>>13|K<<3)&8191;var z=e[r+4]|e[r+5]<<8;a+=(K>>>10|z<<6)&8191;var G=e[r+6]|e[r+7]<<8;c+=(z>>>7|G<<9)&8191;var ie=e[r+8]|e[r+9]<<8;u+=(G>>>4|ie<<12)&8191,f+=ie>>>1&8191;var be=e[r+10]|e[r+11]<<8;l+=(ie>>>14|be<<2)&8191;var M=e[r+12]|e[r+13]<<8;h+=(be>>>11|M<<5)&8191;var q=e[r+14]|e[r+15]<<8;p+=(M>>>8|q<<8)&8191,d+=q>>>5|i;var D=0,V=D;V+=s*y,V+=o*(5*I),V+=a*(5*T),V+=c*(5*_),V+=u*(5*S),D=V>>>13,V&=8191,V+=f*(5*C),V+=l*(5*w),V+=h*(5*v),V+=p*(5*b),V+=d*(5*g),D+=V>>>13,V&=8191;var we=D;we+=s*g,we+=o*y,we+=a*(5*I),we+=c*(5*T),we+=u*(5*_),D=we>>>13,we&=8191,we+=f*(5*S),we+=l*(5*C),we+=h*(5*w),we+=p*(5*v),we+=d*(5*b),D+=we>>>13,we&=8191;var Z=D;Z+=s*b,Z+=o*g,Z+=a*y,Z+=c*(5*I),Z+=u*(5*T),D=Z>>>13,Z&=8191,Z+=f*(5*_),Z+=l*(5*S),Z+=h*(5*C),Z+=p*(5*w),Z+=d*(5*v),D+=Z>>>13,Z&=8191;var Q=D;Q+=s*v,Q+=o*b,Q+=a*g,Q+=c*y,Q+=u*(5*I),D=Q>>>13,Q&=8191,Q+=f*(5*T),Q+=l*(5*_),Q+=h*(5*S),Q+=p*(5*C),Q+=d*(5*w),D+=Q>>>13,Q&=8191;var te=D;te+=s*w,te+=o*v,te+=a*b,te+=c*g,te+=u*y,D=te>>>13,te&=8191,te+=f*(5*I),te+=l*(5*T),te+=h*(5*_),te+=p*(5*S),te+=d*(5*C),D+=te>>>13,te&=8191;var ce=D;ce+=s*C,ce+=o*w,ce+=a*v,ce+=c*b,ce+=u*g,D=ce>>>13,ce&=8191,ce+=f*y,ce+=l*(5*I),ce+=h*(5*T),ce+=p*(5*_),ce+=d*(5*S),D+=ce>>>13,ce&=8191;var ue=D;ue+=s*S,ue+=o*C,ue+=a*w,ue+=c*v,ue+=u*b,D=ue>>>13,ue&=8191,ue+=f*g,ue+=l*y,ue+=h*(5*I),ue+=p*(5*T),ue+=d*(5*_),D+=ue>>>13,ue&=8191;var fe=D;fe+=s*_,fe+=o*S,fe+=a*C,fe+=c*w,fe+=u*v,D=fe>>>13,fe&=8191,fe+=f*b,fe+=l*g,fe+=h*y,fe+=p*(5*I),fe+=d*(5*T),D+=fe>>>13,fe&=8191;var le=D;le+=s*T,le+=o*_,le+=a*S,le+=c*C,le+=u*w,D=le>>>13,le&=8191,le+=f*v,le+=l*b,le+=h*g,le+=p*y,le+=d*(5*I),D+=le>>>13,le&=8191;var he=D;he+=s*I,he+=o*T,he+=a*_,he+=c*S,he+=u*C,D=he>>>13,he&=8191,he+=f*w,he+=l*v,he+=h*b,he+=p*g,he+=d*y,D+=he>>>13,he&=8191,D=(D<<2)+D|0,D=D+V|0,V=D&8191,D=D>>>13,we+=D,s=V,o=we,a=Z,c=Q,u=te,f=ce,l=ue,h=fe,p=le,d=he,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=f,this._h[6]=l,this._h[7]=h,this._h[8]=p,this._h[9]=d},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=1<<13,s=(i^1)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Ea.wipe(this._buffer),Ea.wipe(this._r),Ea.wipe(this._h),Ea.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();Rr.Poly1305=ay;function o8(t,e){var r=new ay(t);r.update(e);var n=r.digest();return r.clean(),n}Rr.oneTimeAuth=o8;function a8(t,e){return t.length!==Rr.DIGEST_LENGTH||e.length!==Rr.DIGEST_LENGTH?!1:s8.equal(t,e)}Rr.equal=a8});var F0=E(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var Sa=oy(),c8=cy(),Es=cr(),uy=xs(),u8=la();Or.KEY_LENGTH=32;Or.NONCE_LENGTH=12;Or.TAG_LENGTH=16;var fy=new Uint8Array(16),f8=function(){function t(e){if(this.nonceLength=Or.NONCE_LENGTH,this.tagLength=Or.TAG_LENGTH,e.length!==Or.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Sa.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return Sa.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),Es.wipe(s),c},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Sa.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),n),!u8.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(c);return Sa.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),u,4),Es.wipe(s),u},t.prototype.clean=function(){return Es.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new c8.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(fy.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(fy.subarray(n.length%16));var o=new Uint8Array(8);i&&uy.writeUint64LE(i.length,o),s.update(o),uy.writeUint64LE(n.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),Es.wipe(a),Es.wipe(o)},t}();Or.ChaCha20Poly1305=f8});var xe=E((xk,Ey)=>{Ey.exports={options:{usePureJavaScript:!1}}});var Ay=E((wk,_y)=>{var q0={};_y.exports=q0;var Sy={};q0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=h8(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};q0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Sy[e];if(!r){r=Sy[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*i,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function h8(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var Ke=E((vk,By)=>{var Cy=xe(),Dy=Ay(),m=By.exports=Cy.util=Cy.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(a){return setImmediate(a)};return}if(m.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];m.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var s=m.setImmediate;m.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self>"u"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function As(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=z0;function z0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof z0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=z0;var d8=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>d8&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){As(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){As(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function p8(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),n=m.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=p8;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){As(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return As(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){As(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var en="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tn=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Ty="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=en.charAt(i>>2),r+=en.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=en.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":en.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=tn[t.charCodeAt(o++)-43],n=tn[t.charCodeAt(o++)-43],i=tn[t.charCodeAt(o++)-43],s=tn[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Dy.encode,decode:Dy.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};m.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=en.charAt(i>>2),r+=en.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=en.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":en.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,c=0,u=r;c<t.length;)i=tn[t.charCodeAt(c++)-43],s=tn[t.charCodeAt(c++)-43],o=tn[t.charCodeAt(c++)-43],a=tn[t.charCodeAt(c++)-43],n[u++]=i<<2|s>>4,o!==64&&(n[u++]=(s&15)<<4|o>>2,a!==64&&(n[u++]=(o&3)<<6|a));return e?u-r:n.subarray(0,u)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,Ty,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,Ty,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};m.inflate=function(t,e,r){var n=t.inflate(m.encode64(e)).rval;return n===null?null:m.decode64(n)};var H0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},G0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},y8=function(t,e,r,n){var i=G0(t,e);i===null&&(i={}),i[r]=n,H0(t,e,i)},g8=function(t,e,r){var n=G0(t,e);return n!==null&&(n=r in n?n[r]:null),n},b8=function(t,e,r){var n=G0(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),H0(t,e,n)}},m8=function(t,e){H0(t,e,null)},Ca=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return n};m.setItem=function(t,e,r,n,i){Ca(y8,arguments,i)};m.getItem=function(t,e,r,n){return Ca(g8,arguments,n)};m.removeItem=function(t,e,r,n){Ca(b8,arguments,n)};m.clearItems=function(t,e,r){Ca(m8,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};m.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=m.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=m.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=m.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker>"u")return m.cores=1,e(null,m.cores);if(typeof Blob>"u")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,m.cores)}i(c,function(f,l){o.push(s(c,l)),n(o,a-1,c)})}function i(o,a){for(var c=[],u=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(u.push(h.data),u.length===o){for(var p=0;p<o;++p)c[p].terminate();a(null,u)}}),c.push(l)}for(var f=0;f<o;++f)c[f].postMessage(f)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var f=a[u],l=c[u]=[],h=0;h<o;++h)if(u!==h){var p=a[h];(f.st>p.st&&f.st<p.et||p.st>f.st&&p.st<f.et)&&l.push(h)}return c.reduce(function(d,y){return Math.max(d,y.length)},0)}}});var Da=E((Ek,Iy)=>{var Cs=xe();Cs.pki=Cs.pki||{};var W0=Iy.exports=Cs.pki.oids=Cs.oids=Cs.oids||{};function k(t,e){W0[t]=e,W0[e]=t}function ge(t,e){W0[t]=e}k("1.2.840.113549.1.1.1","rsaEncryption");k("1.2.840.113549.1.1.4","md5WithRSAEncryption");k("1.2.840.113549.1.1.5","sha1WithRSAEncryption");k("1.2.840.113549.1.1.7","RSAES-OAEP");k("1.2.840.113549.1.1.8","mgf1");k("1.2.840.113549.1.1.9","pSpecified");k("1.2.840.113549.1.1.10","RSASSA-PSS");k("1.2.840.113549.1.1.11","sha256WithRSAEncryption");k("1.2.840.113549.1.1.12","sha384WithRSAEncryption");k("1.2.840.113549.1.1.13","sha512WithRSAEncryption");k("1.3.101.112","EdDSA25519");k("1.2.840.10040.4.3","dsa-with-sha1");k("1.3.14.3.2.7","desCBC");k("1.3.14.3.2.26","sha1");k("1.3.14.3.2.29","sha1WithRSASignature");k("2.16.840.1.101.3.4.2.1","sha256");k("2.16.840.1.101.3.4.2.2","sha384");k("2.16.840.1.101.3.4.2.3","sha512");k("2.16.840.1.101.3.4.2.4","sha224");k("2.16.840.1.101.3.4.2.5","sha512-224");k("2.16.840.1.101.3.4.2.6","sha512-256");k("1.2.840.113549.2.2","md2");k("1.2.840.113549.2.5","md5");k("1.2.840.113549.1.7.1","data");k("1.2.840.113549.1.7.2","signedData");k("1.2.840.113549.1.7.3","envelopedData");k("1.2.840.113549.1.7.4","signedAndEnvelopedData");k("1.2.840.113549.1.7.5","digestedData");k("1.2.840.113549.1.7.6","encryptedData");k("1.2.840.113549.1.9.1","emailAddress");k("1.2.840.113549.1.9.2","unstructuredName");k("1.2.840.113549.1.9.3","contentType");k("1.2.840.113549.1.9.4","messageDigest");k("1.2.840.113549.1.9.5","signingTime");k("1.2.840.113549.1.9.6","counterSignature");k("1.2.840.113549.1.9.7","challengePassword");k("1.2.840.113549.1.9.8","unstructuredAddress");k("1.2.840.113549.1.9.14","extensionRequest");k("1.2.840.113549.1.9.20","friendlyName");k("1.2.840.113549.1.9.21","localKeyId");k("1.2.840.113549.1.9.22.1","x509Certificate");k("1.2.840.113549.1.12.10.1.1","keyBag");k("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");k("1.2.840.113549.1.12.10.1.3","certBag");k("1.2.840.113549.1.12.10.1.4","crlBag");k("1.2.840.113549.1.12.10.1.5","secretBag");k("1.2.840.113549.1.12.10.1.6","safeContentsBag");k("1.2.840.113549.1.5.13","pkcs5PBES2");k("1.2.840.113549.1.5.12","pkcs5PBKDF2");k("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");k("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");k("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");k("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");k("1.2.840.113549.2.7","hmacWithSHA1");k("1.2.840.113549.2.8","hmacWithSHA224");k("1.2.840.113549.2.9","hmacWithSHA256");k("1.2.840.113549.2.10","hmacWithSHA384");k("1.2.840.113549.2.11","hmacWithSHA512");k("1.2.840.113549.3.7","des-EDE3-CBC");k("2.16.840.1.101.3.4.1.2","aes128-CBC");k("2.16.840.1.101.3.4.1.22","aes192-CBC");k("2.16.840.1.101.3.4.1.42","aes256-CBC");k("2.5.4.3","commonName");k("2.5.4.4","surname");k("2.5.4.5","serialNumber");k("2.5.4.6","countryName");k("2.5.4.7","localityName");k("2.5.4.8","stateOrProvinceName");k("2.5.4.9","streetAddress");k("2.5.4.10","organizationName");k("2.5.4.11","organizationalUnitName");k("2.5.4.12","title");k("2.5.4.13","description");k("2.5.4.15","businessCategory");k("2.5.4.17","postalCode");k("2.5.4.42","givenName");k("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");k("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");k("2.16.840.1.113730.1.1","nsCertType");k("2.16.840.1.113730.1.13","nsComment");ge("2.5.29.1","authorityKeyIdentifier");ge("2.5.29.2","keyAttributes");ge("2.5.29.3","certificatePolicies");ge("2.5.29.4","keyUsageRestriction");ge("2.5.29.5","policyMapping");ge("2.5.29.6","subtreesConstraint");ge("2.5.29.7","subjectAltName");ge("2.5.29.8","issuerAltName");ge("2.5.29.9","subjectDirectoryAttributes");ge("2.5.29.10","basicConstraints");ge("2.5.29.11","nameConstraints");ge("2.5.29.12","policyConstraints");ge("2.5.29.13","basicConstraints");k("2.5.29.14","subjectKeyIdentifier");k("2.5.29.15","keyUsage");ge("2.5.29.16","privateKeyUsagePeriod");k("2.5.29.17","subjectAltName");k("2.5.29.18","issuerAltName");k("2.5.29.19","basicConstraints");ge("2.5.29.20","cRLNumber");ge("2.5.29.21","cRLReason");ge("2.5.29.22","expirationDate");ge("2.5.29.23","instructionCode");ge("2.5.29.24","invalidityDate");ge("2.5.29.25","cRLDistributionPoints");ge("2.5.29.26","issuingDistributionPoint");ge("2.5.29.27","deltaCRLIndicator");ge("2.5.29.28","issuingDistributionPoint");ge("2.5.29.29","certificateIssuer");ge("2.5.29.30","nameConstraints");k("2.5.29.31","cRLDistributionPoints");k("2.5.29.32","certificatePolicies");ge("2.5.29.33","policyMappings");ge("2.5.29.34","policyConstraints");k("2.5.29.35","authorityKeyIdentifier");ge("2.5.29.36","policyConstraints");k("2.5.29.37","extKeyUsage");ge("2.5.29.46","freshestCRL");ge("2.5.29.54","inhibitAnyPolicy");k("1.3.6.1.4.1.11129.2.4.2","timestampList");k("1.3.6.1.5.5.7.1.1","authorityInfoAccess");k("1.3.6.1.5.5.7.3.1","serverAuth");k("1.3.6.1.5.5.7.3.2","clientAuth");k("1.3.6.1.5.5.7.3.3","codeSigning");k("1.3.6.1.5.5.7.3.4","emailProtection");k("1.3.6.1.5.5.7.3.8","timeStamping")});var Ts=E((Sk,Ny)=>{var Ae=xe();Ke();Da();var N=Ny.exports=Ae.asn1=Ae.asn1||{};N.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};N.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};N.create=function(t,e,r,n,i){if(Ae.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||Ae.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=N.copy(a)),a};N.copy=function(t,e){var r;if(Ae.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(N.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:N.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};N.equals=function(t,e,r){if(Ae.util.isArray(t)){if(!Ae.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!N.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&N.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};N.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Ds(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var x8=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Ds(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};N.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Ae.util.createBuffer(t));var r=t.length(),n=Ta(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Ta(t,e,r,n){var i;Ds(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var c=x8(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,l,h=(s&32)===32;if(h)if(f=[],c===void 0)for(;;){if(Ds(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(Ta(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),f.push(Ta(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(f===void 0&&o===N.Class.UNIVERSAL&&a===N.Type.BITSTRING&&(l=t.bytes(c)),f===void 0&&n.decodeBitStrings&&o===N.Class.UNIVERSAL&&a===N.Type.BITSTRING&&c>1){var p=t.read,d=e,y=0;if(a===N.Type.BITSTRING&&(Ds(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},b=Ta(t,e,r+1,g),v=i-t.length();e-=v,a==N.Type.BITSTRING&&v++;var w=b.tagClass;v===c&&(w===N.Class.UNIVERSAL||w===N.Class.CONTEXT_SPECIFIC)&&(f=[b])}catch{}f===void 0&&(t.read=p,e=d)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===N.Type.BMPSTRING)for(f="";c>0;c-=2)Ds(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c),e-=c}var C=l===void 0?null:{bitStringContents:l};return N.create(o,a,h,f,C)}N.toDer=function(t){var e=Ae.util.createBuffer(),r=t.tagClass|t.type,n=Ae.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=N.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(N.toDer(t.value[s]))}else if(t.type===N.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===N.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};N.oidToDer=function(t){var e=t.split("."),r=Ae.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};N.derToOid=function(t){var e;typeof t=="string"&&(t=Ae.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};N.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),l=parseInt(t.substr(u+4,2),10),h=f*60+l;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};N.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var l=t.length-5,h=t.charAt(l);if(h==="+"||h==="-"){var p=parseInt(t.substr(l+1,2),10),d=parseInt(t.substr(l+4,2),10);u=p*60+d,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(s,o,a,c)),e};N.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};N.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};N.integerToDer=function(t){var e=Ae.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};N.derToInteger=function(t){typeof t=="string"&&(t=Ae.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};N.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&Ae.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=N.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var ky=/[^\\u0000-\\u00ff]/;N.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case N.Class.UNIVERSAL:n+="Universal:";break;case N.Class.APPLICATION:n+="Application:";break;case N.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case N.Class.PRIVATE:n+="Private:";break}if(t.tagClass===N.Class.UNIVERSAL)switch(n+=t.type,t.type){case N.Type.NONE:n+=" (None)";break;case N.Type.BOOLEAN:n+=" (Boolean)";break;case N.Type.INTEGER:n+=" (Integer)";break;case N.Type.BITSTRING:n+=" (Bit string)";break;case N.Type.OCTETSTRING:n+=" (Octet string)";break;case N.Type.NULL:n+=" (Null)";break;case N.Type.OID:n+=" (Object Identifier)";break;case N.Type.ODESC:n+=" (Object Descriptor)";break;case N.Type.EXTERNAL:n+=" (External or Instance of)";break;case N.Type.REAL:n+=" (Real)";break;case N.Type.ENUMERATED:n+=" (Enumerated)";break;case N.Type.EMBEDDED:n+=" (Embedded PDV)";break;case N.Type.UTF8:n+=" (UTF8)";break;case N.Type.ROID:n+=" (Relative Object Identifier)";break;case N.Type.SEQUENCE:n+=" (Sequence)";break;case N.Type.SET:n+=" (Set)";break;case N.Type.PRINTABLESTRING:n+=" (Printable String)";break;case N.Type.IA5String:n+=" (IA5String (ASCII))";break;case N.Type.UTCTIME:n+=" (UTC time)";break;case N.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case N.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=N.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===N.Type.OID){var c=N.derToOid(t.value);n+=c,Ae.pki&&Ae.pki.oids&&c in Ae.pki.oids&&(n+=" ("+Ae.pki.oids[c]+") ")}if(t.type===N.Type.INTEGER)try{n+=N.derToInteger(t.value)}catch{n+="0x"+Ae.util.bytesToHex(t.value)}else if(t.type===N.Type.BITSTRING){if(t.value.length>1?n+="0x"+Ae.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===N.Type.OCTETSTRING)ky.test(t.value)||(n+="("+t.value+") "),n+="0x"+Ae.util.bytesToHex(t.value);else if(t.type===N.Type.UTF8)try{n+=Ae.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+Ae.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===N.Type.PRINTABLESTRING||t.type===N.Type.IA5String?n+=t.value:ky.test(t.value)?n+="0x"+Ae.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var $0=E((_k,Ly)=>{var We=xe();Ke();Ly.exports=We.cipher=We.cipher||{};We.cipher.algorithms=We.cipher.algorithms||{};We.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=We.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new We.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};We.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=We.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new We.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};We.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),We.cipher.algorithms[t]=e};We.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in We.cipher.algorithms?We.cipher.algorithms[t]:null};var j0=We.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};j0.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=We.util.createBuffer(),this.output=t.output||We.util.createBuffer(),this.mode.start(e)};j0.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};j0.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Y0=E((Ak,Ry)=>{var je=xe();Ke();je.cipher=je.cipher||{};var J=Ry.exports=je.cipher.modes=je.cipher.modes||{};J.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.ecb.prototype.start=function(t){};J.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ba(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};J.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};J.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};J.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=je.util.createBuffer(),this._partialBytes=0};J.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ba(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=je.util.createBuffer(),this._partialBytes=0};J.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ba(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb.prototype.decrypt=J.ofb.prototype.encrypt;J.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=je.util.createBuffer(),this._partialBytes=0};J.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ba(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ia(this._inBlock)};J.ctr.prototype.decrypt=J.ctr.prototype.encrypt;J.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=je.util.createBuffer(),this._partialBytes=0,this._R=3774873600};J.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=je.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=je.util.createBuffer(t.additionalData):r=je.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=je.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(X0(n*8)))}this._inBlock=this._j0.slice(0),Ia(this._inBlock),this._partialBytes=0,r=je.util.createBuffer(r),this._aDataLength=X0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};J.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ia(this._inBlock)};J.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ia(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};J.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=je.util.createBuffer();var n=this._aDataLength.concat(X0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};J.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};J.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};J.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};J.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};J.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,u=(n-1-o%n)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};J.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function Ba(t,e){if(typeof t=="string"&&(t=je.util.createBuffer(t)),je.util.isArray(t)&&t.length>4){var r=t;t=je.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!je.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function Ia(t){t[t.length-1]=t[t.length-1]+1&4294967295}function X0(t){return[t/4294967296|0,t&4294967295]}});var ef=E((Ck,Fy)=>{var Se=xe();$0();Y0();Ke();Fy.exports=Se.aes=Se.aes||{};Se.aes.startEncrypting=function(t,e,r,n){var i=ka({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Se.aes.createEncryptionCipher=function(t,e){return ka({key:t,output:null,decrypt:!1,mode:e})};Se.aes.startDecrypting=function(t,e,r,n){var i=ka({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Se.aes.createDecryptionCipher=function(t,e){return ka({key:t,output:null,decrypt:!0,mode:e})};Se.aes.Algorithm=function(t,e){Q0||Py();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return Z0(r._w,n,i,!1)},decrypt:function(n,i){return Z0(r._w,n,i,!0)}}}),r._init=!1};Se.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Se.util.createBuffer(e);else if(Se.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Se.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Se.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Se.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Uy(e,t.decrypt&&!o),this._init=!0}};Se.aes._expandKey=function(t,e){return Q0||Py(),Uy(t,e)};Se.aes._updateBlock=Z0;_i("AES-ECB",Se.cipher.modes.ecb);_i("AES-CBC",Se.cipher.modes.cbc);_i("AES-CFB",Se.cipher.modes.cfb);_i("AES-OFB",Se.cipher.modes.ofb);_i("AES-CTR",Se.cipher.modes.ctr);_i("AES-GCM",Se.cipher.modes.gcm);function _i(t,e){var r=function(){return new Se.aes.Algorithm(t,e)};Se.cipher.registerAlgorithm(t,r)}var Q0=!1,Si=4,gt,J0,Oy,_n,Wt;function Py(){Q0=!0,Oy=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;gt=new Array(256),J0=new Array(256),_n=new Array(4),Wt=new Array(4);for(var e=0;e<4;++e)_n[e]=new Array(256),Wt[e]=new Array(256);for(var r=0,n=0,i,s,o,a,c,u,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,gt[r]=a,J0[a]=r,c=t[a],i=t[r],s=t[i],o=t[s],u=c<<24^a<<16^a<<8^(a^c),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)_n[l][r]=u,Wt[l][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function Uy(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=Si*o,c=s;c<a;++c)n=r[c-1],c%s===0?(n=gt[n>>>16&255]<<24^gt[n>>>8&255]<<16^gt[n&255]<<8^gt[n>>>24]^Oy[i]<<24,i++):s>6&&c%s===4&&(n=gt[n>>>24]<<24^gt[n>>>16&255]<<16^gt[n>>>8&255]<<8^gt[n&255]),r[c]=r[c-s]^n;if(e){var u,f=Wt[0],l=Wt[1],h=Wt[2],p=Wt[3],d=r.slice(0);a=r.length;for(var c=0,y=a-Si;c<a;c+=Si,y-=Si)if(c===0||c===a-Si)d[c]=r[y],d[c+1]=r[y+3],d[c+2]=r[y+2],d[c+3]=r[y+1];else for(var g=0;g<Si;++g)u=r[y+g],d[c+(3&-g)]=f[gt[u>>>24]]^l[gt[u>>>16&255]]^h[gt[u>>>8&255]]^p[gt[u&255]];r=d}return r}function Z0(t,e,r,n){var i=t.length/4-1,s,o,a,c,u;n?(s=Wt[0],o=Wt[1],a=Wt[2],c=Wt[3],u=J0):(s=_n[0],o=_n[1],a=_n[2],c=_n[3],u=gt);var f,l,h,p,d,y,g;f=e[0]^t[0],l=e[n?3:1]^t[1],h=e[2]^t[2],p=e[n?1:3]^t[3];for(var b=3,v=1;v<i;++v)d=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^c[p&255]^t[++b],y=s[l>>>24]^o[h>>>16&255]^a[p>>>8&255]^c[f&255]^t[++b],g=s[h>>>24]^o[p>>>16&255]^a[f>>>8&255]^c[l&255]^t[++b],p=s[p>>>24]^o[f>>>16&255]^a[l>>>8&255]^c[h&255]^t[++b],f=d,l=y,h=g;r[0]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[p&255]^t[++b],r[n?3:1]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++b],r[2]=u[h>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++b],r[n?1:3]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^t[++b]}function ka(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Se.cipher.createDecipher(r,t.key):n=Se.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof Se.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Vy=E((Dk,Ky)=>{var ke=xe();$0();Y0();Ke();Ky.exports=ke.des=ke.des||{};ke.des.startEncrypting=function(t,e,r,n){var i=Na({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ke.des.createEncryptionCipher=function(t,e){return Na({key:t,output:null,decrypt:!1,mode:e})};ke.des.startDecrypting=function(t,e,r,n){var i=Na({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ke.des.createDecryptionCipher=function(t,e){return Na({key:t,output:null,decrypt:!0,mode:e})};ke.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return My(r._keys,n,i,!1)},decrypt:function(n,i){return My(r._keys,n,i,!0)}}}),r._init=!1};ke.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ke.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=T8(e),this._init=!0}};dr("DES-ECB",ke.cipher.modes.ecb);dr("DES-CBC",ke.cipher.modes.cbc);dr("DES-CFB",ke.cipher.modes.cfb);dr("DES-OFB",ke.cipher.modes.ofb);dr("DES-CTR",ke.cipher.modes.ctr);dr("3DES-ECB",ke.cipher.modes.ecb);dr("3DES-CBC",ke.cipher.modes.cbc);dr("3DES-CFB",ke.cipher.modes.cfb);dr("3DES-OFB",ke.cipher.modes.ofb);dr("3DES-CTR",ke.cipher.modes.ctr);function dr(t,e){var r=function(){return new ke.des.Algorithm(t,e)};ke.cipher.registerAlgorithm(t,r)}var w8=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],v8=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],E8=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],S8=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],_8=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],A8=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],C8=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],D8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function T8(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,w,C=0;C<y;C++){var S=t.getInt32(),_=t.getInt32();w=(S>>>4^_)&252645135,_^=w,S^=w<<4,w=(_>>>-16^S)&65535,S^=w,_^=w<<-16,w=(S>>>2^_)&858993459,_^=w,S^=w<<2,w=(_>>>-16^S)&65535,S^=w,_^=w<<-16,w=(S>>>1^_)&1431655765,_^=w,S^=w<<1,w=(_>>>8^S)&16711935,S^=w,_^=w<<8,w=(S>>>1^_)&1431655765,_^=w,S^=w<<1,w=S<<8|_>>>20&240,S=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=w;for(var T=0;T<b.length;++T){b[T]?(S=S<<2|S>>>26,_=_<<2|_>>>26):(S=S<<1|S>>>27,_=_<<1|_>>>27),S&=-15,_&=-15;var I=e[S>>>28]|r[S>>>24&15]|n[S>>>20&15]|i[S>>>16&15]|s[S>>>12&15]|o[S>>>8&15]|a[S>>>4&15],O=c[_>>>28]|u[_>>>24&15]|f[_>>>20&15]|l[_>>>16&15]|h[_>>>12&15]|p[_>>>8&15]|d[_>>>4&15];w=(O>>>16^I)&65535,g[v++]=I^w,g[v++]=O^w<<16}}return g}function My(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=s[u+1],l=s[u+2],h=s[u];h!=f;h+=l){var p=c^t[h],d=(c>>>4|c<<28)^t[h+1];o=a,a=c,c=o^(v8[p>>>24&63]|S8[p>>>16&63]|A8[p>>>8&63]|D8[p&63]|w8[d>>>24&63]|E8[d>>>16&63]|_8[d>>>8&63]|C8[d&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function Na(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ke.cipher.createDecipher(r,t.key):n=ke.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ke.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var An=E((Tk,qy)=>{var La=xe();qy.exports=La.md=La.md||{};La.md.algorithms=La.md.algorithms||{}});var Hy=E((Bk,zy)=>{var Ur=xe();An();Ke();var B8=zy.exports=Ur.hmac=Ur.hmac||{};B8.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Ur.md.algorithms)e=Ur.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=Ur.util.createBuffer(o);else if(Ur.util.isArray(o)){var a=o;o=Ur.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=Ur.util.createBuffer(),n=Ur.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var Wy=E((Ik,Gy)=>{var bt=xe();Hy();An();Ke();var I8=bt.pkcs5=bt.pkcs5||{},Fr;bt.util.isNodejs&&!bt.options.usePureJavaScript&&(Fr=He("crypto"));Gy.exports=bt.pbkdf2=I8.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),bt.util.isNodejs&&!bt.options.usePureJavaScript&&Fr.pbkdf2&&(i===null||typeof i!="object")&&(Fr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Fr.pbkdf2Sync.length===4?Fr.pbkdf2(t,e,r,n,function(w,C){if(w)return s(w);s(null,C.toString("binary"))}):Fr.pbkdf2(t,e,r,n,i,function(w,C){if(w)return s(w);s(null,C.toString("binary"))}):Fr.pbkdf2Sync.length===4?Fr.pbkdf2Sync(t,e,r,n).toString("binary"):Fr.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in bt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=bt.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(n/o),u=n-(c-1)*o,f=bt.hmac.create();f.start(i,t);var l="",h,p,d;if(!s){for(var y=1;y<=c;++y){f.start(null,null),f.update(e),f.update(bt.util.int32ToBytes(y)),h=d=f.digest().getBytes();for(var g=2;g<=r;++g)f.start(null,null),f.update(d),p=f.digest().getBytes(),h=bt.util.xorBytes(h,p,o),d=p;l+=y<c?h:h.substr(0,u)}return l}var y=1,g;function b(){if(y>c)return s(null,l);f.start(null,null),f.update(e),f.update(bt.util.int32ToBytes(y)),h=d=f.digest().getBytes(),g=2,v()}function v(){if(g<=r)return f.start(null,null),f.update(d),p=f.digest().getBytes(),h=bt.util.xorBytes(h,p,o),d=p,++g,bt.util.setImmediate(v);l+=y<c?h:h.substr(0,u),++y,b()}b()}});var Xy=E((kk,$y)=>{var Oa=xe();Ke();var jy=$y.exports=Oa.pem=Oa.pem||{};jy.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Ra(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Ra(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Ra(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Ra(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Oa.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};jy.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Oa.util.decode64(s[3])};if(e.push(a),!!s[2]){for(var c=s[2].split(i),u=0;s&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var h=c[l];if(!/\s/.test(h[0]))break;f+=h,u=l}if(s=f.match(n),s){for(var p={name:s[1],values:[]},d=s[2].split(","),y=0;y<d.length;++y)p.values.push(k8(d[y]));if(a.procType)if(!a.contentDomain&&p.name==="Content-Domain")a.contentDomain=d[0]||"";else if(!a.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:d[0],parameters:d[1]||null}}else a.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:d[0],type:d[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Ra(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function k8(t){return t.replace(/^\s+/,"")}});var t1=E((Nk,e1)=>{var pr=xe();An();Ke();var Jy=e1.exports=pr.sha256=pr.sha256||{};pr.md.sha256=pr.md.algorithms.sha256=Jy;Jy.create=function(){Zy||N8();var t=null,e=pr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=pr.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=pr.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),Yy(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=pr.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(tf.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Yy(l,r,i);var h=pr.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var tf=null,Zy=!1,Qy=null;function N8(){tf=String.fromCharCode(128),tf+=pr.util.fillString(String.fromCharCode(0),64),Qy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Zy=!0}function Yy(t,e,r){for(var n,i,s,o,a,c,u,f,l,h,p,d,y,g,b,v=r.length();v>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,l=t.h1,h=t.h2,p=t.h3,d=t.h4,y=t.h5,g=t.h6,b=t.h7,u=0;u<64;++u)o=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=g^d&(y^g),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&l|h&(f^l),n=b+o+a+Qy[u]+e[u],i=s+c,b=g,g=y,y=d,d=p+n>>>0,p=h,h=l,l=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+p|0,t.h4=t.h4+d|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+b|0,v-=64}}});var n1=E((Lk,r1)=>{var yr=xe();Ke();var Pa=null;yr.util.isNodejs&&!yr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Pa=He("crypto"));var L8=r1.exports=yr.prng=yr.prng||{};L8.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var l=e.plugin.cipher,h=e.plugin.increment,p=e.plugin.formatKey,d=e.plugin.formatSeed,y=yr.util.createBuffer();e.key=null,g();function g(b){if(b)return f(b);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return yr.util.nextTick(function(){s(g)});var v=l(e.key,e.seed);e.generated+=v.length,y.putBytes(v),e.key=p(l(e.key,h(e.seed))),e.seed=d(l(e.key,e.seed)),yr.util.setImmediate(g)}},e.generateSync=function(u){var f=e.plugin.cipher,l=e.plugin.increment,h=e.plugin.formatKey,p=e.plugin.formatSeed;e.key=null;for(var d=yr.util.createBuffer();d.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&o();var y=f(e.key,e.seed);e.generated+=y.length,d.putBytes(y),e.key=h(f(e.key,l(e.seed))),e.seed=p(f(e.key,e.seed))}return d.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(l,h){if(l)return u(l);e.collect(h),a(),u()})}function o(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,l=0;l<32;++l)e.reseeds%f===0&&(u.update(e.pools[l].digest().getBytes()),e.pools[l].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var f=null,l=yr.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(S){return h.getRandomValues(S)});var p=yr.util.createBuffer();if(f)for(;p.length()<u;){var d=Math.max(1,Math.min(u-p.length(),65536)/4),y=new Uint32Array(Math.floor(d));try{f(y);for(var g=0;g<y.length;++g)p.putInt32(y[g])}catch(S){if(!(typeof QuotaExceededError<"u"&&S instanceof QuotaExceededError))throw S}}if(p.length()<u)for(var b,v,w,C=Math.floor(Math.random()*65536);p.length()<u;){v=16807*(C&65535),b=16807*(C>>16),v+=(b&32767)<<16,v+=b>>15,v=(v&2147483647)+(v>>31),C=v&4294967295;for(var g=0;g<3;++g)w=C>>>(g<<3),w^=Math.floor(Math.random()*256),p.putByte(w&255)}return p.getBytes(u)}return Pa?(e.seedFile=function(u,f){Pa.randomBytes(u,function(l,h){if(l)return f(l);f(null,h.toString())})},e.seedFileSync=function(u){return Pa.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(l){f(l)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,l=0;l<f;++l)e.pools[e.pool].update(u.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(u>>h&255);e.collect(l)},e.registerWorker=function(u){if(u===self)e.seedFile=function(l,h){function p(d){var y=d.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",p),h(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(p,d){u.postMessage({forge:{prng:{err:p,bytes:d}}})})};u.addEventListener("message",f)}},e}});var Bs=E((Rk,rf)=>{var $e=xe();ef();t1();n1();Ke();(function(){if($e.random&&$e.random.getBytes){rf.exports=$e.random;return}(function(t){var e={},r=new Array(4),n=$e.util.createBuffer();e.formatKey=function(l){var h=$e.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),$e.aes._expandKey(l,!1)},e.formatSeed=function(l){var h=$e.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},e.cipher=function(l,h){return $e.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=$e.md.sha256;function i(){var l=$e.prng.create(e);return l.getBytes=function(h,p){return l.generate(h,p)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=$e.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(l){return c.getRandomValues(l)}),$e.options.usePureJavaScript||!$e.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}s.collect(u),u=null}t&&(t().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),t().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!$e.random)$e.random=s;else for(var f in s)$e.random[f]=s[f];$e.random.createInstance=i,rf.exports=$e.random})(typeof jQuery<"u"?jQuery:null)})()});var a1=E((Ok,o1)=>{var wt=xe();Ke();var nf=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i1=[1,2,3,5],R8=function(t,e){return t<<e&65535|(t&65535)>>16-e},O8=function(t,e){return(t&65535)>>e|t<<16-e&65535};o1.exports=wt.rc2=wt.rc2||{};wt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=wt.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(nf[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,nf[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,nf[r.at(a+1)^r.at(a+s)]);return r};var s1=function(t,e,r){var n=!1,i=null,s=null,o=null,a,c,u,f,l=[];for(t=wt.rc2.expandKey(t,e),u=0;u<64;u++)l.push(t.getInt16Le());r?(a=function(d){for(u=0;u<4;u++)d[u]+=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=R8(d[u],i1[u]),f++},c=function(d){for(u=0;u<4;u++)d[u]+=l[d[(u+3)%4]&63]}):(a=function(d){for(u=3;u>=0;u--)d[u]=O8(d[u],i1[u]),d[u]-=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),f--},c=function(d){for(u=3;u>=0;u--)d[u]-=l[d[(u+3)%4]&63]});var h=function(d){var y=[];for(u=0;u<4;u++){var g=i.getInt16Le();o!==null&&(r?g^=o.getInt16Le():o.putInt16Le(g)),y.push(g&65535)}f=r?0:63;for(var b=0;b<d.length;b++)for(var v=0;v<d[b][0];v++)d[b][1](y);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(y[u]):y[u]^=o.getInt16Le()),s.putInt16Le(y[u])},p=null;return p={start:function(d,y){d&&typeof d=="string"&&(d=wt.util.createBuffer(d)),n=!1,i=wt.util.createBuffer(),s=y||new wt.util.createBuffer,o=d,p.output=s},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(d){var y=!0;if(r)if(d)y=d(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(y&&(n=!0,p.update()),!r&&(y=i.length()===0,y))if(d)y=d(8,s,!r);else{var b=s.length(),v=s.at(b-1);v>b?y=!1:s.truncate(v)}return y}},p};wt.rc2.startEncrypting=function(t,e,r){var n=wt.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};wt.rc2.createEncryptionCipher=function(t,e){return s1(t,e,!0)};wt.rc2.startDecrypting=function(t,e,r){var n=wt.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};wt.rc2.createDecryptionCipher=function(t,e){return s1(t,e,!1)}});var Ma=E((Pk,y1)=>{var sf=xe();y1.exports=sf.jsbn=sf.jsbn||{};var Mr,P8=0xdeadbeefcafe,c1=(P8&16777215)==15715070;function B(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}sf.jsbn.BigInteger=B;function oe(){return new B(null)}function U8(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function F8(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*o;c=o*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function u1(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(B.prototype.am=u1,Mr=28):c1&&navigator.appName=="Microsoft Internet Explorer"?(B.prototype.am=F8,Mr=30):c1&&navigator.appName!="Netscape"?(B.prototype.am=U8,Mr=26):(B.prototype.am=u1,Mr=28);B.prototype.DB=Mr;B.prototype.DM=(1<<Mr)-1;B.prototype.DV=1<<Mr;var of=52;B.prototype.FV=Math.pow(2,of);B.prototype.F1=of-Mr;B.prototype.F2=2*Mr-of;var M8="0123456789abcdefghijklmnopqrstuvwxyz",Ua=new Array,Ai,Rt;Ai="0".charCodeAt(0);for(Rt=0;Rt<=9;++Rt)Ua[Ai++]=Rt;Ai="a".charCodeAt(0);for(Rt=10;Rt<36;++Rt)Ua[Ai++]=Rt;Ai="A".charCodeAt(0);for(Rt=10;Rt<36;++Rt)Ua[Ai++]=Rt;function f1(t){return M8.charAt(t)}function l1(t,e){var r=Ua[t.charCodeAt(e)];return r??-1}function K8(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function V8(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function rn(t){var e=oe();return e.fromInt(t),e}function q8(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:l1(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&t[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&B.ZERO.subTo(this,this)}function z8(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function H8(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=f1(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=f1(n));return i?s:"0"}function G8(){var t=oe();return B.ZERO.subTo(this,t),t}function W8(){return this.s<0?this.negate():this}function j8(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Fa(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function $8(){return this.t<=0?0:this.DB*(this.t-1)+Fa(this.data[this.t-1]^this.s&this.DM)}function X8(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Y8(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function J8(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function Z8(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function Q8(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function eE(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&B.ZERO.subTo(e,e)}function tE(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function rE(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=oe());var s=oe(),o=this.s,a=t.s,c=this.DB-Fa(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var l=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/l,p=(1<<this.F1)/l,d=1<<this.F2,y=r.t,g=y-u,b=e??oe();for(s.dlShiftTo(g,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),B.ONE.dlShiftTo(u,b),b.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var v=r.data[--y]==f?this.DM:Math.floor(r.data[y]*h+(r.data[y-1]+d)*p);if((r.data[y]+=s.am(0,v,r,g,0,u))<v)for(s.dlShiftTo(g,b),r.subTo(b,r);r.data[y]<--v;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&B.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&B.ZERO.subTo(r,r)}}}function nE(t){var e=oe();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(B.ZERO)>0&&t.subTo(e,e),e}function Cn(t){this.m=t}function iE(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function sE(t){return t}function oE(t){t.divRemTo(this.m,null,t)}function aE(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function cE(t,e){t.squareTo(e),this.reduce(e)}Cn.prototype.convert=iE;Cn.prototype.revert=sE;Cn.prototype.reduce=oE;Cn.prototype.mulTo=aE;Cn.prototype.sqrTo=cE;function uE(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Dn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function fE(t){var e=oe();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(B.ZERO)>0&&this.m.subTo(e,e),e}function lE(t){var e=oe();return t.copyTo(e),this.reduce(e),e}function hE(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function dE(t,e){t.squareTo(e),this.reduce(e)}function pE(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Dn.prototype.convert=fE;Dn.prototype.revert=lE;Dn.prototype.reduce=hE;Dn.prototype.mulTo=pE;Dn.prototype.sqrTo=dE;function yE(){return(this.t>0?this.data[0]&1:this.s)==0}function gE(t,e){if(t>4294967295||t<1)return B.ONE;var r=oe(),n=oe(),i=e.convert(this),s=Fa(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function bE(t,e){var r;return t<256||e.isEven()?r=new Cn(e):r=new Dn(e),this.exp(t,r)}B.prototype.copyTo=K8;B.prototype.fromInt=V8;B.prototype.fromString=q8;B.prototype.clamp=z8;B.prototype.dlShiftTo=X8;B.prototype.drShiftTo=Y8;B.prototype.lShiftTo=J8;B.prototype.rShiftTo=Z8;B.prototype.subTo=Q8;B.prototype.multiplyTo=eE;B.prototype.squareTo=tE;B.prototype.divRemTo=rE;B.prototype.invDigit=uE;B.prototype.isEven=yE;B.prototype.exp=gE;B.prototype.toString=H8;B.prototype.negate=G8;B.prototype.abs=W8;B.prototype.compareTo=j8;B.prototype.bitLength=$8;B.prototype.mod=nE;B.prototype.modPowInt=bE;B.ZERO=rn(0);B.ONE=rn(1);function mE(){var t=oe();return this.copyTo(t),t}function xE(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function wE(){return this.t==0?this.s:this.data[0]<<24>>24}function vE(){return this.t==0?this.s:this.data[0]<<16>>16}function EE(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function SE(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function _E(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=rn(r),i=oe(),s=oe(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function AE(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=l1(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&B.ZERO.subTo(this,this)}function CE(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(B.ONE.shiftLeft(t-1),af,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(B.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function DE(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function TE(t){return this.compareTo(t)==0}function BE(t){return this.compareTo(t)<0?this:t}function IE(t){return this.compareTo(t)>0?this:t}function kE(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function NE(t,e){return t&e}function LE(t){var e=oe();return this.bitwiseTo(t,NE,e),e}function af(t,e){return t|e}function RE(t){var e=oe();return this.bitwiseTo(t,af,e),e}function h1(t,e){return t^e}function OE(t){var e=oe();return this.bitwiseTo(t,h1,e),e}function d1(t,e){return t&~e}function PE(t){var e=oe();return this.bitwiseTo(t,d1,e),e}function UE(){for(var t=oe(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function FE(t){var e=oe();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function ME(t){var e=oe();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function KE(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function VE(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+KE(this.data[t]);return this.s<0?this.t*this.DB:-1}function qE(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function zE(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=qE(this.data[r]^e);return t}function HE(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function GE(t,e){var r=B.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function WE(t){return this.changeBit(t,af)}function jE(t){return this.changeBit(t,d1)}function $E(t){return this.changeBit(t,h1)}function XE(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function YE(t){var e=oe();return this.addTo(t,e),e}function JE(t){var e=oe();return this.subTo(t,e),e}function ZE(t){var e=oe();return this.multiplyTo(t,e),e}function QE(t){var e=oe();return this.divRemTo(t,e,null),e}function e4(t){var e=oe();return this.divRemTo(t,null,e),e}function t4(t){var e=oe(),r=oe();return this.divRemTo(t,e,r),new Array(e,r)}function r4(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function n4(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Is(){}function p1(t){return t}function i4(t,e,r){t.multiplyTo(e,r)}function s4(t,e){t.squareTo(e)}Is.prototype.convert=p1;Is.prototype.revert=p1;Is.prototype.mulTo=i4;Is.prototype.sqrTo=s4;function o4(t){return this.exp(t,new Is)}function a4(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function c4(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Ci(t){this.r2=oe(),this.q3=oe(),B.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function u4(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=oe();return t.copyTo(e),this.reduce(e),e}function f4(t){return t}function l4(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function h4(t,e){t.squareTo(e),this.reduce(e)}function d4(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Ci.prototype.convert=u4;Ci.prototype.revert=f4;Ci.prototype.reduce=l4;Ci.prototype.mulTo=d4;Ci.prototype.sqrTo=h4;function p4(t,e){var r=t.bitLength(),n,i=rn(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Cn(e):e.isEven()?s=new Ci(e):s=new Dn(e);var o=new Array,a=3,c=n-1,u=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=oe();for(s.sqrTo(o[1],f);a<=u;)o[a]=oe(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=t.t-1,h,p=!0,d=oe(),y;for(r=Fa(t.data[l])-1;l>=0;){for(r>=c?h=t.data[l]>>r-c&u:(h=(t.data[l]&(1<<r+1)-1)<<c-r,l>0&&(h|=t.data[l-1]>>this.DB+r-c)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),p)o[h].copyTo(i),p=!1;else{for(;a>1;)s.sqrTo(i,d),s.sqrTo(d,i),a-=2;a>0?s.sqrTo(i,d):(y=i,i=d,d=y),s.mulTo(d,o[h],i)}for(;l>=0&&!(t.data[l]&1<<r);)s.sqrTo(i,d),y=i,i=d,d=y,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function y4(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function g4(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function b4(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return B.ZERO;for(var r=t.clone(),n=this.clone(),i=rn(1),s=rn(0),o=rn(0),a=rn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(B.ONE)!=0)return B.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var jt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],m4=(1<<26)/jt[jt.length-1];function x4(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=jt[jt.length-1]){for(e=0;e<jt.length;++e)if(r.data[0]==jt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<jt.length;){for(var n=jt[e],i=e+1;i<jt.length&&n<m4;)n*=jt[i++];for(n=r.modInt(n);e<i;)if(n%jt[e++]==0)return!1}return r.millerRabin(t)}function w4(t){var e=this.subtract(B.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=v4(),s,o=0;o<t;++o){do s=new B(this.bitLength(),i);while(s.compareTo(B.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(B.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(B.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function v4(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}B.prototype.chunkSize=EE;B.prototype.toRadix=_E;B.prototype.fromRadix=AE;B.prototype.fromNumber=CE;B.prototype.bitwiseTo=kE;B.prototype.changeBit=GE;B.prototype.addTo=XE;B.prototype.dMultiply=r4;B.prototype.dAddOffset=n4;B.prototype.multiplyLowerTo=a4;B.prototype.multiplyUpperTo=c4;B.prototype.modInt=g4;B.prototype.millerRabin=w4;B.prototype.clone=mE;B.prototype.intValue=xE;B.prototype.byteValue=wE;B.prototype.shortValue=vE;B.prototype.signum=SE;B.prototype.toByteArray=DE;B.prototype.equals=TE;B.prototype.min=BE;B.prototype.max=IE;B.prototype.and=LE;B.prototype.or=RE;B.prototype.xor=OE;B.prototype.andNot=PE;B.prototype.not=UE;B.prototype.shiftLeft=FE;B.prototype.shiftRight=ME;B.prototype.getLowestSetBit=VE;B.prototype.bitCount=zE;B.prototype.testBit=HE;B.prototype.setBit=WE;B.prototype.clearBit=jE;B.prototype.flipBit=$E;B.prototype.add=YE;B.prototype.subtract=JE;B.prototype.multiply=ZE;B.prototype.divide=QE;B.prototype.remainder=e4;B.prototype.divideAndRemainder=t4;B.prototype.modPow=p4;B.prototype.modInverse=b4;B.prototype.pow=o4;B.prototype.gcd=y4;B.prototype.isProbablePrime=x4});var w1=E((Uk,x1)=>{var gr=xe();An();Ke();var b1=x1.exports=gr.sha1=gr.sha1||{};gr.md.sha1=gr.md.algorithms.sha1=b1;b1.create=function(){m1||E4();var t=null,e=gr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=gr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=gr.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),g1(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=gr.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(cf.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};g1(l,r,i);var h=gr.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var cf=null,m1=!1;function E4(){cf=String.fromCharCode(128),cf+=gr.util.fillString(String.fromCharCode(0),64),m1=!0}function g1(t,e,r){for(var n,i,s,o,a,c,u,f,l=r.length();l>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s&o|a&(s^o),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,l-=64}}});var S1=E((Fk,E1)=>{var br=xe();Ke();Bs();w1();var v1=E1.exports=br.pkcs1=br.pkcs1||{};v1.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=br.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=c-e.length,p=0;p<h;p++)l+="\0";var d=f.getBytes()+l+""+e;if(!i)i=br.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var y=Ka(i,a-s.digestLength-1,o),g=br.util.xorBytes(d,y,d.length),b=Ka(g,s.digestLength,o),v=br.util.xorBytes(i,b,i.length);return"\0"+v+g};v1.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=o,g}if(i===void 0?i=br.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),l=Ka(f,i.digestLength,s),h=br.util.xorBytes(u,l,u.length),p=Ka(h,o-i.digestLength-1,s),d=br.util.xorBytes(f,p,f.length),y=d.substring(0,i.digestLength),g=c!=="\0",b=0;b<i.digestLength;++b)g|=a.charAt(b)!==y.charAt(b);for(var v=1,w=i.digestLength,C=i.digestLength;C<d.length;C++){var S=d.charCodeAt(C),_=S&1^1,T=v?65534:0;g|=S&T,v=v&_,w+=v}if(g||d.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(w+1)};function Ka(t,e,r){r||(r=br.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var _1=E((Mk,uf)=>{var nn=xe();Ke();Ma();Bs();(function(){if(nn.prime){uf.exports=nn.prime;return}var t=uf.exports=nn.prime=nn.prime||{},e=nn.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,h){return l|h};t.generateProbablePrime=function(l,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var y=h.prng||nn.random,g={nextBytes:function(b){for(var v=y.getBytesSync(b.length),w=0;w<b.length;++w)b[w]=v.charCodeAt(w)}};if(d.name==="PRIMEINC")return s(l,g,d.options,p);throw new Error("Invalid prime generation algorithm: "+d.name)};function s(l,h,p,d){return"workers"in p?c(l,h,p,d):o(l,h,p,d)}function o(l,h,p,d){var y=u(l,h),g=0,b=f(y.bitLength());"millerRabinTests"in p&&(b=p.millerRabinTests);var v=10;"maxBlockTime"in p&&(v=p.maxBlockTime),a(y,l,h,g,b,v,d)}function a(l,h,p,d,y,g,b){var v=+new Date;do{if(l.bitLength()>h&&(l=u(h,p)),l.isProbablePrime(y))return b(null,l);l.dAddOffset(r[d++%8],0)}while(g<0||+new Date-v<g);nn.util.setImmediate(function(){a(l,h,p,d,y,g,b)})}function c(l,h,p,d){if(typeof Worker>"u")return o(l,h,p,d);var y=u(l,h),g=p.workers,b=p.workLoad||100,v=b*30/8,w=p.workerScript||"forge/prime.worker.js";if(g===-1)return nn.util.estimateCores(function(S,_){S&&(_=2),g=_-1,C()});C();function C(){g=Math.max(1,g);for(var S=[],_=0;_<g;++_)S[_]=new Worker(w);for(var T=g,_=0;_<g;++_)S[_].addEventListener("message",O);var I=!1;function O(K){if(!I){--T;var z=K.data;if(z.found){for(var G=0;G<S.length;++G)S[G].terminate();return I=!0,d(null,new e(z.prime,16))}y.bitLength()>l&&(y=u(l,h));var ie=y.toString(16);K.target.postMessage({hex:ie,workLoad:b}),y.dAddOffset(v,0)}}}}function u(l,h){var p=new e(l,h),d=l-1;return p.testBit(d)||p.bitwiseTo(e.ONE.shiftLeft(d),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var lf=E((Kk,k1)=>{var U=xe();Ts();Ma();Da();S1();_1();Bs();Ke();typeof re>"u"&&(re=U.jsbn.BigInteger);var re,ff=U.util.isNodejs?He("crypto"):null,x=U.asn1,Ot=U.util;U.pki=U.pki||{};k1.exports=U.pki.rsa=U.rsa=U.rsa||{};var H=U.pki,S4=[6,4,2,4,2,4,6,2],_4={name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},A4={name:"RSAPrivateKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},C4={name:"RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},D4=U.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},T4={name:"DigestInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,type:x.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},B4=function(t){var e;if(t.algorithm in H.oids)e=H.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=x.oidToDer(e).getBytes(),i=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),s=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);s.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,n)),s.value.push(x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,""));var o=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),x.toDer(i).getBytes()},B1=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(re.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(re.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new re(U.util.bytesToHex(U.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(re.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};H.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=I1(t,e,r)):(i=U.util.createBuffer(),i.putBytes(t));for(var o=new re(i.toHex(),16),a=B1(o,e,n),c=a.toString(16),u=U.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(U.util.hexToBytes(c)),u.getBytes()};H.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new re(U.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=B1(o,e,r),c=a.toString(16),u=U.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(U.util.hexToBytes(c)),n!==!1?Va(u.getBytes(),e,r):u.getBytes()};H.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||U.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new re(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};H.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new re(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new re(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(re.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(k4(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(S4[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(re.ONE).gcd(t.e).compareTo(re.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(re.ONE),t.q1=t.q.subtract(re.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(re.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:H.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:H.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};H.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!U.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(A1("generateKeyPair"))return ff.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:H.privateKeyFromPem(u),publicKey:H.publicKeyFromPem(c)})});if(C1("generateKey")&&C1("exportKey"))return Ot.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:T1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ot.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=H.privateKeyFromAsn1(x.fromDer(U.util.createBuffer(a)));n(null,{privateKey:c,publicKey:H.setRsaPublicKey(c.n,c.e)})}});if(D1("generateKey")&&D1("exportKey")){var i=Ot.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:T1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=Ot.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var l=f.target.result,h=H.privateKeyFromAsn1(x.fromDer(U.util.createBuffer(l)));n(null,{privateKey:h,publicKey:H.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(A1("generateKeyPairSync")){var s=ff.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:H.privateKeyFromPem(s.privateKey),publicKey:H.publicKeyFromPem(s.publicKey)}}}var o=H.rsa.createKeyPairGenerationState(t,e,r);if(!n)return H.rsa.stepKeyPairGenerationState(o,0),o.keys;I4(o,r,n)};H.setRsaPublicKey=H.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return I1(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return U.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return H.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,u){u=Va(u,r,!0);var f=x.fromDer(u,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!x.validate(f,T4,l,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var d=x.derToOid(l.algorithmIdentifier);if(!(d===U.oids.md2||d===U.oids.md5||d===U.oids.sha1||d===U.oids.sha224||d===U.oids.sha256||d===U.oids.sha384||d===U.oids.sha512||d===U.oids["sha512-224"]||d===U.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=d,p}if((d===U.oids.md2||d===U.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,u){return u=Va(u,r,!0),c===u}});var a=H.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};H.setRsaPrivateKey=H.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var c={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=H.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Va};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(p,d){return U.pkcs1.decode_rsa_oaep(d,p,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:B4},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},l=1);var h=f.encode(u,c.n.bitLength());return H.rsa.encrypt(h,c,l)},c};H.wrapRsaPrivateKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(H.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(t).getBytes())])};H.privateKeyFromAsn1=function(t){var e={},r=[];if(x.validate(t,_4,e,r)&&(t=x.fromDer(U.util.createBuffer(e.privateKey))),e={},r=[],!x.validate(t,A4,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,c,u,f,l;return i=U.util.createBuffer(e.privateKeyModulus).toHex(),s=U.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=U.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=U.util.createBuffer(e.privateKeyPrime1).toHex(),c=U.util.createBuffer(e.privateKeyPrime2).toHex(),u=U.util.createBuffer(e.privateKeyExponent1).toHex(),f=U.util.createBuffer(e.privateKeyExponent2).toHex(),l=U.util.createBuffer(e.privateKeyCoefficient).toHex(),H.setRsaPrivateKey(new re(i,16),new re(s,16),new re(o,16),new re(a,16),new re(c,16),new re(u,16),new re(f,16),new re(l,16))};H.privateKeyToAsn1=H.privateKeyToRSAPrivateKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.e)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.d)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.p)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.q)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.dP)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.dQ)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.qInv))])};H.publicKeyFromAsn1=function(t){var e={},r=[];if(x.validate(t,D4,e,r)){var n=x.derToOid(e.publicKeyOid);if(n!==H.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!x.validate(t,C4,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=U.util.createBuffer(e.publicKeyModulus).toHex(),o=U.util.createBuffer(e.publicKeyExponent).toHex();return H.setRsaPublicKey(new re(s,16),new re(o,16))};H.publicKeyToAsn1=H.publicKeyToSubjectPublicKeyInfo=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(H.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,[H.publicKeyToRSAPublicKey(t)])])};H.publicKeyToRSAPublicKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,mr(t.e))])};function I1(t,e,r){var n=U.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)n.putByte(a)}else for(;o>0;){for(var u=0,f=U.random.getBytes(o),c=0;c<o;++c)a=f.charCodeAt(c),a===0?++u:n.putByte(a);o=u}return n.putByte(0),n.putBytes(t),n}function Va(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=U.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function I4(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){U.prime.generateProbablePrime(a,n,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(re.ONE).gcd(t.e).compareTo(re.ONE)!==0){t.p=null,i();return}if(t.q.subtract(re.ONE).gcd(t.e).compareTo(re.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(re.ONE),t.q1=t.q.subtract(re.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(re.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:H.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:H.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function mr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=U.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function k4(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function A1(t){return U.util.isNodejs&&typeof ff[t]=="function"}function C1(t){return typeof Ot.globalScope<"u"&&typeof Ot.globalScope.crypto=="object"&&typeof Ot.globalScope.crypto.subtle=="object"&&typeof Ot.globalScope.crypto.subtle[t]=="function"}function D1(t){return typeof Ot.globalScope<"u"&&typeof Ot.globalScope.msCrypto=="object"&&typeof Ot.globalScope.msCrypto.subtle=="object"&&typeof Ot.globalScope.msCrypto.subtle[t]=="function"}function T1(t){for(var e=U.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var U1=E((Vk,P1)=>{var L=xe();ef();Ts();Vy();An();Da();Wy();Xy();Bs();a1();lf();Ke();typeof N1>"u"&&(N1=L.jsbn.BigInteger);var N1,A=L.asn1,j=L.pki=L.pki||{};P1.exports=j.pbe=L.pbe=L.pbe||{};var Tn=j.oids,N4={name:"EncryptedPrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},L4={name:"PBES2Algorithms",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},R4={name:"pkcs-12PbeParams",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"iterations"}]};j.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=L.random.getBytesSync(r.saltSize),i=r.count,s=A.integerToDer(i),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,l;switch(r.algorithm){case"aes128":o=16,u=16,f=Tn["aes128-CBC"],l=L.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,f=Tn["aes192-CBC"],l=L.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,f=Tn["aes256-CBC"],l=L.aes.createEncryptionCipher;break;case"des":o=8,u=8,f=Tn.desCBC,l=L.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),d=O1(p),y=L.pkcs5.pbkdf2(e,n,i,o,d),g=L.random.getBytesSync(u),b=l(y);b.start(g),b.update(A.toDer(t)),b.finish(),c=b.output.getBytes();var v=O4(n,s,o,p);a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Tn.pkcs5PBES2).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Tn.pkcs5PBKDF2).getBytes()),v]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(f).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){o=24;var w=new L.util.ByteBuffer(n),y=j.pbe.generatePkcs12Key(e,w,1,i,o),g=j.pbe.generatePkcs12Key(e,w,2,i,o),b=L.des.createEncryptionCipher(y);b.start(g),b.update(A.toDer(t)),b.finish(),c=b.output.getBytes(),a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Tn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,n),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var C=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[a,A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,c)]);return C};j.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!A.validate(t,N4,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=A.derToOid(n.encryptionOid),a=j.pbe.getCipher(o,n.encryptionParams,e),c=L.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=A.fromDer(a.output)),r};j.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:A.toDer(t).getBytes()};return L.pem.encode(r,{maxline:e})};j.encryptedPrivateKeyFromPem=function(t){var e=L.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return A.fromDer(e.body)};j.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=j.wrapRsaPrivateKey(j.privateKeyToAsn1(t));return n=j.encryptPrivateKeyInfo(n,e,r),j.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=L.random.getBytesSync(16),a=L.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=L.random.getBytesSync(16),a=L.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=L.random.getBytesSync(16),a=L.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=L.random.getBytesSync(8),a=L.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=L.random.getBytesSync(8),a=L.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=L.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(u);f.start(s),f.update(A.toDer(j.privateKeyToAsn1(t))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:L.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return L.pem.encode(l)};j.decryptRsaPrivateKey=function(t,e){var r=null,n=L.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=L.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=L.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=L.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=L.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=L.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return L.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return L.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return L.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=L.util.hexToBytes(n.dekInfo.parameters),c=L.pbe.opensslDeriveBytes(e,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(L.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=j.decryptPrivateKeyInfo(A.fromDer(r),e):r=A.fromDer(r),r!==null&&(r=j.privateKeyFromAsn1(r)),r};j.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in L.md))throw new Error('"sha1" hash algorithm unavailable.');s=L.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new L.util.ByteBuffer,l=new L.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)l.putInt16(t.charCodeAt(a));l.putInt16(0)}var h=l.length(),p=e.length(),d=new L.util.ByteBuffer;d.fillWithByte(r,u);var y=u*Math.ceil(p/u),g=new L.util.ByteBuffer;for(a=0;a<y;a++)g.putByte(e.at(a%p));var b=u*Math.ceil(h/u),v=new L.util.ByteBuffer;for(a=0;a<b;a++)v.putByte(l.at(a%h));var w=g;w.putBuffer(v);for(var C=Math.ceil(i/c),S=1;S<=C;S++){var _=new L.util.ByteBuffer;_.putBytes(d.bytes()),_.putBytes(w.bytes());for(var T=0;T<n;T++)s.start(),s.update(_.getBytes()),_=s.digest();var I=new L.util.ByteBuffer;for(a=0;a<u;a++)I.putByte(_.at(a%c));var O=Math.ceil(p/u)+Math.ceil(h/u),K=new L.util.ByteBuffer;for(o=0;o<O;o++){var z=new L.util.ByteBuffer(w.getBytes(u)),G=511;for(a=I.length()-1;a>=0;a--)G=G>>8,G+=I.at(a)+z.at(a),z.setAt(a,G&255);K.putBuffer(z)}w=K,f.putBuffer(_)}return f.truncate(f.length()-i),f};j.pbe.getCipher=function(t,e,r){switch(t){case j.oids.pkcs5PBES2:return j.pbe.getCipherForPBES2(t,e,r);case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case j.oids["pbewithSHAAnd40BitRC2-CBC"]:return j.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};j.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!A.validate(e,L4,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=A.derToOid(n.kdfOid),t!==j.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=A.derToOid(n.encOid),t!==j.oids["aes128-CBC"]&&t!==j.oids["aes192-CBC"]&&t!==j.oids["aes256-CBC"]&&t!==j.oids["des-EDE3-CBC"]&&t!==j.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=L.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(j.oids[t]){case"aes128-CBC":c=16,u=L.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=L.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=L.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=L.des.createDecryptionCipher;break;case"desCBC":c=8,u=L.des.createDecryptionCipher;break}var f=R1(n.prfOid),l=L.pkcs5.pbkdf2(r,o,a,c,f),h=n.encIv,p=u(l);return p.start(h),p};j.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!A.validate(e,R4,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=L.util.createBuffer(n.salt),a=L.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=L.des.startDecrypting;break;case j.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(y,g){var b=L.rc2.createDecryptionCipher(y,40);return b.start(g,null),b};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var l=R1(n.prfOid),h=j.pbe.generatePkcs12Key(r,o,1,a,c,l);l.start();var p=j.pbe.generatePkcs12Key(r,o,2,a,u,l);return f(h,p)};j.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in L.md))throw new Error('"md5" hash algorithm unavailable.');n=L.md.md5.create()}e===null&&(e="");for(var i=[L1(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push(L1(n,i[o-1]+t+e));return i.join("").substr(0,r)};function L1(t,e){return t.start().update(e).digest().getBytes()}function R1(t){var e;if(!t)e="hmacWithSHA1";else if(e=j.oids[A.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return O1(e)}function O1(t){var e=L.md;switch(t){case"hmacWithSHA224":e=L.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function O4(t,e,r,n){var i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,t),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,L.util.hexToBytes(r.toString(16))),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(j.oids[n]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])),i}});var z1=E((oN,q1)=>{var Ce=xe();An();Ke();var ks=q1.exports=Ce.sha512=Ce.sha512||{};Ce.md.sha512=Ce.md.algorithms.sha512=ks;var K1=Ce.sha384=Ce.sha512.sha384=Ce.sha512.sha384||{};K1.create=function(){return ks.create("SHA-384")};Ce.md.sha384=Ce.md.algorithms.sha384=K1;Ce.sha512.sha256=Ce.sha512.sha256||{create:function(){return ks.create("SHA-512/256")}};Ce.md["sha512/256"]=Ce.md.algorithms["sha512/256"]=Ce.sha512.sha256;Ce.sha512.sha224=Ce.sha512.sha224||{create:function(){return ks.create("SHA-512/224")}};Ce.md["sha512/224"]=Ce.md.algorithms["sha512/224"]=Ce.sha512.sha224;ks.create=function(t){if(V1||M4(),typeof t>"u"&&(t="SHA-512"),!(t in In))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=In[t],r=null,n=Ce.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Ce.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Ce.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),M1(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Ce.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(df.substr(0,a.blockLength-f));for(var l,h,p=a.fullMessageLength[0]*8,d=0;d<a.fullMessageLength.length-1;++d)l=a.fullMessageLength[d+1]*8,h=l/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=l>>>0;c.putInt32(p);for(var y=new Array(r.length),d=0;d<r.length;++d)y[d]=r[d].slice(0);M1(y,i,c);var g=Ce.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var d=0;d<b;++d)g.putInt32(y[d][0]),(d!==b-1||t!=="SHA-512/224")&&g.putInt32(y[d][1]);return g},a};var df=null,V1=!1,pf=null,In=null;function M4(){df=String.fromCharCode(128),df+=Ce.util.fillString(String.fromCharCode(0),128),pf=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],In={},In["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],In["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],In["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],In["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],V1=!0}function M1(t,e,r){for(var n,i,s,o,a,c,u,f,l,h,p,d,y,g,b,v,w,C,S,_,T,I,O,K,z,G,ie,be,M,q,D,V,we,Z,Q,te=r.length();te>=128;){for(M=0;M<16;++M)e[M][0]=r.getInt32()>>>0,e[M][1]=r.getInt32()>>>0;for(;M<80;++M)V=e[M-2],q=V[0],D=V[1],n=((q>>>19|D<<13)^(D>>>29|q<<3)^q>>>6)>>>0,i=((q<<13|D>>>19)^(D<<3|q>>>29)^(q<<26|D>>>6))>>>0,Z=e[M-15],q=Z[0],D=Z[1],s=((q>>>1|D<<31)^(q>>>8|D<<24)^q>>>7)>>>0,o=((q<<31|D>>>1)^(q<<24|D>>>8)^(q<<25|D>>>7))>>>0,we=e[M-7],Q=e[M-16],D=i+we[1]+o+Q[1],e[M][0]=n+we[0]+s+Q[0]+(D/4294967296>>>0)>>>0,e[M][1]=D>>>0;for(y=t[0][0],g=t[0][1],b=t[1][0],v=t[1][1],w=t[2][0],C=t[2][1],S=t[3][0],_=t[3][1],T=t[4][0],I=t[4][1],O=t[5][0],K=t[5][1],z=t[6][0],G=t[6][1],ie=t[7][0],be=t[7][1],M=0;M<80;++M)u=((T>>>14|I<<18)^(T>>>18|I<<14)^(I>>>9|T<<23))>>>0,f=((T<<18|I>>>14)^(T<<14|I>>>18)^(I<<23|T>>>9))>>>0,l=(z^T&(O^z))>>>0,h=(G^I&(K^G))>>>0,a=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,c=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,p=(y&b|w&(y^b))>>>0,d=(g&v|C&(g^v))>>>0,D=be+f+h+pf[M][1]+e[M][1],n=ie+u+l+pf[M][0]+e[M][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=c+d,s=a+p+(D/4294967296>>>0)>>>0,o=D>>>0,ie=z,be=G,z=O,G=K,O=T,K=I,D=_+i,T=S+n+(D/4294967296>>>0)>>>0,I=D>>>0,S=w,_=C,w=b,C=v,b=y,v=g,D=i+o,y=n+s+(D/4294967296>>>0)>>>0,g=D>>>0;D=t[0][1]+g,t[0][0]=t[0][0]+y+(D/4294967296>>>0)>>>0,t[0][1]=D>>>0,D=t[1][1]+v,t[1][0]=t[1][0]+b+(D/4294967296>>>0)>>>0,t[1][1]=D>>>0,D=t[2][1]+C,t[2][0]=t[2][0]+w+(D/4294967296>>>0)>>>0,t[2][1]=D>>>0,D=t[3][1]+_,t[3][0]=t[3][0]+S+(D/4294967296>>>0)>>>0,t[3][1]=D>>>0,D=t[4][1]+I,t[4][0]=t[4][0]+T+(D/4294967296>>>0)>>>0,t[4][1]=D>>>0,D=t[5][1]+K,t[5][0]=t[5][0]+O+(D/4294967296>>>0)>>>0,t[5][1]=D>>>0,D=t[6][1]+G,t[6][0]=t[6][0]+z+(D/4294967296>>>0)>>>0,t[6][1]=D>>>0,D=t[7][1]+be,t[7][0]=t[7][0]+ie+(D/4294967296>>>0)>>>0,t[7][1]=D>>>0,te-=128}}});var U2=E((cR,P2)=>{"use strict";function C6(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var d=0,y=0,g=0,b=p.length;g!==b&&p[g]===0;)g++,d++;for(var v=(b-g)*u+1>>>0,w=new Uint8Array(v);g!==b;){for(var C=p[g],S=0,_=v-1;(C!==0||S<y)&&_!==-1;_--,S++)C+=256*w[_]>>>0,w[_]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,g++}for(var T=v-y;T!==v&&w[T]===0;)T++;for(var I=a.repeat(d);T<v;++T)I+=t.charAt(w[T]);return I}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var d=0;if(p[d]!==" "){for(var y=0,g=0;p[d]===a;)y++,d++;for(var b=(p.length-d)*c+1>>>0,v=new Uint8Array(b);p[d];){var w=e[p.charCodeAt(d)];if(w===255)return;for(var C=0,S=b-1;(w!==0||C<g)&&S!==-1;S--,C++)w+=o*v[S]>>>0,v[S]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");g=C,d++}if(p[d]!==" "){for(var _=b-g;_!==b&&v[_]===0;)_++;for(var T=new Uint8Array(y+(b-_)),I=y;_!==b;)T[I++]=v[_++];return T}}}function h(p){var d=l(p);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:l,decode:h}}P2.exports=C6});var nc=E((uR,F2)=>{"use strict";var D6=new TextDecoder,T6=t=>D6.decode(t),B6=new TextEncoder,I6=t=>B6.encode(t);function k6(t,e){let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}F2.exports={decodeText:T6,encodeText:I6,concat:k6}});var K2=E((fR,M2)=>{"use strict";var{encodeText:N6}=nc(),kf=class{constructor(e,r,n,i){this.name=e,this.code=r,this.codeBuf=N6(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};M2.exports=kf});var q2=E((lR,V2)=>{"use strict";var L6=(t,e,r)=>{let n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),o=0,a=0,c=0;for(let u=0;u<i;++u){let f=n[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);a=a<<r|f,o+=r,o>=8&&(o-=8,s[c++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return s},R6=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},O6=t=>e=>({encode(r){return R6(r,e,t)},decode(r){return L6(r,e,t)}});V2.exports={rfc4648:O6}});var W2=E((hR,G2)=>{"use strict";var zs=U2(),P6=K2(),{rfc4648:et}=q2(),{decodeText:U6,encodeText:F6}=nc(),M6=()=>({encode:U6,decode:F6}),z2=[["identity","\0",M6,""],["base2","0",et(1),"01"],["base8","7",et(3),"01234567"],["base10","9",zs,"0123456789"],["base16","f",et(4),"0123456789abcdef"],["base16upper","F",et(4),"0123456789ABCDEF"],["base32hex","v",et(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",et(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",et(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",et(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",et(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",et(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",et(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",et(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",et(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",zs,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",zs,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",zs,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",zs,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",et(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",et(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",et(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",et(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],H2=z2.reduce((t,e)=>(t[e[0]]=new P6(e[0],e[1],e[2],e[3]),t),{}),K6=z2.reduce((t,e)=>(t[e[1]]=H2[e[0]],t),{});G2.exports={names:H2,codes:K6}});var X2=E((Vr,$2)=>{"use strict";var Pi=W2(),{encodeText:V6,decodeText:ic,concat:j2}=nc();function q6(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=Fn(t);return W6(r,e),j2([n,e],n.length+e.length)}function z6(t,e){let r=Fn(t),n=V6(r.encode(e));return j2([r.codeBuf,n],r.codeBuf.length+n.length)}function H6(t){t instanceof Uint8Array&&(t=ic(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),Fn(t[0]).decode(t.substring(1))}function G6(t){if(t instanceof Uint8Array&&(t=ic(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return Fn(t[0]).name}catch{return!1}}function W6(t,e){Fn(t).decode(ic(e))}function Fn(t){if(Object.prototype.hasOwnProperty.call(Pi.names,t))return Pi.names[t];if(Object.prototype.hasOwnProperty.call(Pi.codes,t))return Pi.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function j6(t){return t instanceof Uint8Array&&(t=ic(t)),Fn(t[0])}Vr=$2.exports=q6;Vr.encode=z6;Vr.decode=H6;Vr.isEncoded=G6;Vr.encoding=Fn;Vr.encodingFromData=j6;var $6=Object.freeze(Pi.names),X6=Object.freeze(Pi.codes);Vr.names=$6;Vr.codes=X6});var Q2=E((dR,Z2)=>{Z2.exports=J2;var Y2=128,Y6=127,J6=~Y6,Z6=Math.pow(2,31);function J2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Z6;)e[r++]=t&255|Y2,t/=128;for(;t&J6;)e[r++]=t&255|Y2,t>>>=7;return e[r]=t|0,J2.bytes=r-n+1,e}});var rg=E((pR,tg)=>{tg.exports=Nf;var Q6=128,eg=127;function Nf(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Nf.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&eg)<<i:(o&eg)*Math.pow(2,i),i+=7}while(o>=Q6);return Nf.bytes=s-n,r}});var ig=E((yR,ng)=>{var eS=Math.pow(2,7),tS=Math.pow(2,14),rS=Math.pow(2,21),nS=Math.pow(2,28),iS=Math.pow(2,35),sS=Math.pow(2,42),oS=Math.pow(2,49),aS=Math.pow(2,56),cS=Math.pow(2,63);ng.exports=function(t){return t<eS?1:t<tS?2:t<rS?3:t<nS?4:t<iS?5:t<sS?6:t<oS?7:t<aS?8:t<cS?9:10}});var og=E((gR,sg)=>{sg.exports={encode:Q2(),decode:rg(),encodingLength:ig()}});var cg=E((bR,ag)=>{"use strict";var uS=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});ag.exports={names:uS}});var fg=E((mR,ug)=>{"use strict";function fS(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,g=0,b=0,v=d.length;b!==v&&d[b]===0;)b++,y++;for(var w=(v-b)*f+1>>>0,C=new Uint8Array(w);b!==v;){for(var S=d[b],_=0,T=w-1;(S!==0||_<g)&&T!==-1;T--,_++)S+=256*C[T]>>>0,C[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");g=_,b++}for(var I=w-g;I!==w&&C[I]===0;)I++;for(var O=c.repeat(y);I<w;++I)O+=t.charAt(C[I]);return O}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var g=0,b=0;d[y]===c;)g++,y++;for(var v=(d.length-y)*u+1>>>0,w=new Uint8Array(v);d[y];){var C=r[d.charCodeAt(y)];if(C===255)return;for(var S=0,_=v-1;(C!==0||S<b)&&_!==-1;_--,S++)C+=a*w[_]>>>0,w[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=S,y++}if(d[y]!==" "){for(var T=v-b;T!==v&&w[T]===0;)T++;for(var I=new Uint8Array(g+(v-T)),O=g;T!==v;)I[O++]=w[T++];return I}}}function p(d){var y=h(d);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var lS=fS,hS=lS;ug.exports=hS});var Er=E(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});var lg=new Uint8Array(0),dS=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),pS=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):lg},yS=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},gS=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bS=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),mS=t=>new TextEncoder().encode(t),xS=t=>new TextDecoder().decode(t);vr.coerce=gS;vr.empty=lg;vr.equals=yS;vr.fromHex=pS;vr.fromString=mS;vr.isBinary=bS;vr.toHex=dS;vr.toString=xS});var Zt=E(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var wS=fg(),vS=Er(),Lf=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Rf=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Pf(this,e)}},Of=class{constructor(e){this.decoders=e}or(e){return Pf(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Pf=(t,e)=>new Of({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),sc=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Lf(e,r,n),this.decoder=new Rf(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Uf=({name:t,prefix:e,encode:r,decode:n})=>new sc(t,e,r,n),ES=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=wS(r,e);return Uf({prefix:t,name:e,encode:n,decode:s=>vS.coerce(i(s))})},SS=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},_S=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},AS=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Uf({prefix:e,name:t,encode(i){return _S(i,n,r)},decode(i){return SS(i,n,r,t)}});Mn.Codec=sc;Mn.baseX=ES;Mn.from=Uf;Mn.or=Pf;Mn.rfc4648=AS});var dg=E(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var CS=Zt(),hg=Er(),DS=CS.from({prefix:"\0",name:"identity",encode:t=>hg.toString(t),decode:t=>hg.fromString(t)});Ff.identity=DS});var pg=E(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var TS=Zt(),BS=TS.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});Mf.base2=BS});var yg=E(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var IS=Zt(),kS=IS.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});Kf.base8=kS});var gg=E(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var NS=Zt(),LS=NS.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});Vf.base10=LS});var mg=E(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var bg=Zt(),RS=bg.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OS=bg.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});oc.base16=RS;oc.base16upper=OS});var qf=E(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});var qr=Zt(),PS=qr.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),US=qr.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),FS=qr.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),MS=qr.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KS=qr.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),VS=qr.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qS=qr.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zS=qr.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),HS=qr.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});Qt.base32=PS;Qt.base32hex=KS;Qt.base32hexpad=qS;Qt.base32hexpadupper=zS;Qt.base32hexupper=VS;Qt.base32pad=FS;Qt.base32padupper=MS;Qt.base32upper=US;Qt.base32z=HS});var wg=E(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var xg=Zt(),GS=xg.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),WS=xg.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});ac.base36=GS;ac.base36upper=WS});var zf=E(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var vg=Zt(),jS=vg.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$S=vg.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});cc.base58btc=jS;cc.base58flickr=$S});var Eg=E(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var uc=Zt(),XS=uc.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),YS=uc.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),JS=uc.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ZS=uc.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});Ui.base64=XS;Ui.base64pad=YS;Ui.base64url=JS;Ui.base64urlpad=ZS});var _g=E(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var QS=Zt(),Sg=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),e5=Sg.reduce((t,e,r)=>(t[r]=e,t),[]),t5=Sg.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function r5(t){return t.reduce((e,r)=>(e+=e5[r],e),"")}function n5(t){let e=[];for(let r of t){let n=t5[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var i5=QS.from({prefix:"\u{1F680}",name:"base256emoji",encode:r5,decode:n5});Hf.base256emoji=i5});var Bg=E((kR,Tg)=>{"use strict";var s5=Dg,Ag=128,o5=127,a5=~o5,c5=Math.pow(2,31);function Dg(t,e,r){e=e||[],r=r||0;for(var n=r;t>=c5;)e[r++]=t&255|Ag,t/=128;for(;t&a5;)e[r++]=t&255|Ag,t>>>=7;return e[r]=t|0,Dg.bytes=r-n+1,e}var u5=Gf,f5=128,Cg=127;function Gf(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Gf.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Cg)<<i:(o&Cg)*Math.pow(2,i),i+=7}while(o>=f5);return Gf.bytes=s-n,r}var l5=Math.pow(2,7),h5=Math.pow(2,14),d5=Math.pow(2,21),p5=Math.pow(2,28),y5=Math.pow(2,35),g5=Math.pow(2,42),b5=Math.pow(2,49),m5=Math.pow(2,56),x5=Math.pow(2,63),w5=function(t){return t<l5?1:t<h5?2:t<d5?3:t<p5?4:t<y5?5:t<g5?6:t<b5?7:t<m5?8:t<x5?9:10},v5={encode:s5,decode:u5,encodingLength:w5},E5=v5,S5=E5;Tg.exports=S5});var Gs=E(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var fc=Bg(),_5=(t,e=0)=>[fc.decode(t,e),fc.decode.bytes],A5=(t,e,r=0)=>(fc.encode(t,e,r),e),C5=t=>fc.encodingLength(t);Hs.decode=_5;Hs.encodeTo=A5;Hs.encodingLength=C5});var Ki=E(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var Ig=Er(),Fi=Gs(),D5=(t,e)=>{let r=e.byteLength,n=Fi.encodingLength(t),i=n+Fi.encodingLength(r),s=new Uint8Array(i+r);return Fi.encodeTo(t,s,0),Fi.encodeTo(r,s,n),s.set(e,i),new Ws(t,r,e,s)},T5=t=>{let e=Ig.coerce(t),[r,n]=Fi.decode(e),[i,s]=Fi.decode(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Ws(r,i,o,e)},B5=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Ig.equals(t.bytes,e.bytes),Ws=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};Mi.Digest=Ws;Mi.create=D5;Mi.decode=T5;Mi.equals=B5});var dc=E(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var kg=Ki(),I5=({name:t,code:e,encode:r})=>new lc(t,e,r),lc=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?kg.create(this.code,r):r.then(n=>kg.create(this.code,n))}else throw Error("Unknown type, must be binary type")}};hc.Hasher=lc;hc.from=I5});var Og=E(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var k5=He("crypto"),Ng=dc(),Lg=Er();function N5(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Rg=N5(k5),L5=Ng.from({name:"sha2-256",code:18,encode:t=>Lg.coerce(Rg.default.createHash("sha256").update(t).digest())}),R5=Ng.from({name:"sha2-512",code:19,encode:t=>Lg.coerce(Rg.default.createHash("sha512").update(t).digest())});pc.sha256=L5;pc.sha512=R5});var Fg=E(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var O5=Er(),P5=Ki(),Pg=0,U5="identity",Ug=O5.coerce,F5=t=>P5.create(Pg,Ug(t)),M5={code:Pg,name:U5,encode:Ug,digest:F5};Wf.identity=M5});var Kg=E(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var Mg=Er(),K5="raw",V5=85,q5=t=>Mg.coerce(t),z5=t=>Mg.coerce(t);Vi.code=V5;Vi.decode=z5;Vi.encode=q5;Vi.name=K5});var Vg=E(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var H5=new TextEncoder,G5=new TextDecoder,W5="json",j5=512,$5=t=>H5.encode(JSON.stringify(t)),X5=t=>JSON.parse(G5.decode(t));qi.code=j5;qi.decode=X5;qi.encode=$5;qi.name=W5});var $f=E(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var $s=Gs(),yc=Ki(),cn=zf(),mc=qf(),Y5=Er(),Ye=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:bc,byteLength:bc,code:gc,version:gc,multihash:gc,bytes:gc,_baseCache:bc,asCID:bc})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==js)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==e_)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ye.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=yc.create(e,r);return Ye.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&yc.equals(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Z5(r,i,e||cn.base58btc.encoder);default:return Q5(r,i,e||mc.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return r_(/^0\.0/,n_),!!(e&&(e[zg]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ye)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new Ye(r,n,i,s||qg(r,n,i.bytes))}else if(e!=null&&e[zg]===!0){let{version:r,multihash:n,code:i}=e,s=yc.decode(n);return Ye.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==js)throw new Error(`Version 0 CID must use dag-pb (code: ${js}) block encoding`);return new Ye(e,r,n,n.bytes)}case 1:{let i=qg(e,r,n.bytes);return new Ye(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ye.create(0,js,e)}static createV1(e,r){return Ye.create(1,e,r)}static decode(e){let[r,n]=Ye.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Ye.inspectBytes(e),n=r.size-r.multihashSize,i=Y5.coerce(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new yc.Digest(r.multihashCode,r.digestSize,s,i);return[r.version===0?Ye.createV0(o):Ye.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=$s.decode(e.subarray(r));return r+=h,l},i=n(),s=js;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),u=r+c,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=J5(e,r),s=Ye.decode(i);return s._baseCache.set(n,e),s}},J5=(t,e)=>{switch(t[0]){case"Q":{let r=e||cn.base58btc;return[cn.base58btc.prefix,r.decode(`${cn.base58btc.prefix}${t}`)]}case cn.base58btc.prefix:{let r=e||cn.base58btc;return[cn.base58btc.prefix,r.decode(t)]}case mc.base32.prefix:{let r=e||mc.base32;return[mc.base32.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Z5=(t,e,r)=>{let{prefix:n}=r;if(n!==cn.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Q5=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},js=112,e_=18,qg=(t,e,r)=>{let n=$s.encodingLength(t),i=n+$s.encodingLength(e),s=new Uint8Array(i+r.byteLength);return $s.encodeTo(t,s,0),$s.encodeTo(e,s,n),s.set(r,i),s},zg=Symbol.for("@ipld/js-cid/CID"),gc={writable:!1,configurable:!1,enumerable:!0},bc={writable:!1,enumerable:!1,configurable:!1},t_="0.0.0-dev",r_=(t,e)=>{if(t.test(t_))console.warn(e);else throw new Error(e)},n_=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;jf.CID=Ye});var Hg=E(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var i_=$f(),s_=Gs(),o_=Er(),a_=dc(),c_=Ki();Kn.CID=i_.CID;Kn.varint=s_;Kn.bytes=o_;Kn.hasher=a_;Kn.digest=c_});var Gg=E(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var u_=dg(),f_=pg(),l_=yg(),h_=gg(),d_=mg(),p_=qf(),y_=wg(),g_=zf(),b_=Eg(),m_=_g(),x_=Og(),w_=Fg(),v_=Kg(),E_=Vg();Hg();var S_=$f(),__=dc(),A_=Ki(),C_=Gs(),D_=Er(),T_={...u_,...f_,...l_,...h_,...d_,...p_,...y_,...g_,...b_,...m_},B_={...x_,...w_},I_={raw:v_,json:E_};Sr.CID=S_.CID;Sr.hasher=__;Sr.digest=A_;Sr.varint=C_;Sr.bytes=D_;Sr.bases=T_;Sr.codecs=I_;Sr.hashes=B_});var xc=E(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});function k_(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}Xf.asUint8Array=k_});var Yf=E(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var Wg=xc();function N_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null?Wg.asUint8Array(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function L_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Wg.asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}wc.alloc=N_;wc.allocUnsafe=L_});var Zf=E((HR,Yg)=>{"use strict";var jg=Gg(),R_=Yf();function Xg(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var $g=Xg("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Jf=Xg("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=R_.allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),O_={utf8:$g,"utf-8":$g,hex:jg.bases.base16,latin1:Jf,ascii:Jf,binary:Jf,...jg.bases};Yg.exports=O_});var Jg=E(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var P_=Zf();function U_(t,e="utf8"){let r=P_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}Qf.toString=U_});var Zg=E(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var F_=Zf(),M_=xc();function K_(t,e="utf8"){let r=F_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?M_.asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}el.fromString=K_});var Qg=E(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var V_=Yf(),q_=xc();function z_(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=V_.allocUnsafe(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return q_.asUint8Array(r)}tl.concat=z_});var nl=E(($R,sb)=>{"use strict";var eb=X2(),zi=og(),{names:Xs}=cg(),{toString:vc}=Jg(),{fromString:H_}=Zg(),{concat:G_}=Qg(),Hi={};for(let t in Xs){let e=t;Hi[Xs[e]]=e}Object.freeze(Hi);function W_(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return vc(t,"base16")}function j_(t){return H_(t,"base16")}function $_(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return vc(eb.encode("base58btc",t)).slice(1)}function X_(t){let e=t instanceof Uint8Array?vc(t):t;return eb.decode("z"+e)}function tb(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=zi.decode(t);if(!nb(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(zi.decode.bytes);let r=zi.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(zi.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${vc(t,"base16")}`);return{code:e,name:Hi[e],length:r,digest:t}}function Y_(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=rb(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let i=zi.encode(n),s=zi.encode(r);return G_([i,s,t],i.length+s.length+t.length)}function rb(t){let e=t;if(typeof t=="string"){if(Xs[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=Xs[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(Hi[e]===void 0&&!rl(e))throw new Error(`Unrecognized function code: ${e}`);return e}function rl(t){return t>0&&t<16}function nb(t){return!!(rl(t)||Hi[t])}function ib(t){tb(t)}function J_(t){return ib(t),t.subarray(0,2)}sb.exports={names:Xs,codes:Hi,toHexString:W_,fromHexString:j_,toB58String:$_,fromB58String:X_,decode:tb,encode:Y_,coerceCode:rb,isAppCode:rl,validate:ib,prefix:J_,isValidCode:nb}});var cA={};Je(cA,{webRTC:()=>aA,webRTCDirect:()=>oA});var Js=Symbol.for("@libp2p/transport");var fl;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(fl||(fl={}));var zr=He("node:net");function Zs(t){return!!(0,zr.isIP)(t)}var Tc={};Je(Tc,{identity:()=>vb});function gb(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,g=0,b=0,v=d.length;b!==v&&d[b]===0;)b++,y++;for(var w=(v-b)*f+1>>>0,C=new Uint8Array(w);b!==v;){for(var S=d[b],_=0,T=w-1;(S!==0||_<g)&&T!==-1;T--,_++)S+=256*C[T]>>>0,C[T]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");g=_,b++}for(var I=w-g;I!==w&&C[I]===0;)I++;for(var O=c.repeat(y);I<w;++I)O+=t.charAt(C[I]);return O}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var g=0,b=0;d[y]===c;)g++,y++;for(var v=(d.length-y)*u+1>>>0,w=new Uint8Array(v);d[y];){var C=r[d.charCodeAt(y)];if(C===255)return;for(var S=0,_=v-1;(C!==0||S<b)&&_!==-1;_--,S++)C+=a*w[_]>>>0,w[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=S,y++}if(d[y]!==" "){for(var T=v-b;T!==v&&w[T]===0;)T++;for(var I=new Uint8Array(g+(v-T)),O=g;T!==v;)I[O++]=w[T++];return I}}}function p(d){var y=h(d);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var bb=gb,mb=bb,ll=mb;var dA=new Uint8Array(0);var hl=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Dt=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var dl=t=>new TextEncoder().encode(t),pl=t=>new TextDecoder().decode(t);var _c=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ac=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gl(this,e)}},Cc=class{constructor(e){this.decoders=e}or(e){return gl(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},gl=(t,e)=>new Cc({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Dc=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new _c(e,r,n),this.decoder=new Ac(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Vn=({name:t,prefix:e,encode:r,decode:n})=>new Dc(t,e,r,n),Hr=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=ll(r,e);return Vn({prefix:t,name:e,encode:n,decode:s=>Dt(i(s))})},xb=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wb=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ne=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vn({prefix:e,name:t,encode(i){return wb(i,n,r)},decode(i){return xb(i,n,r,t)}});var vb=Vn({prefix:"\0",name:"identity",encode:t=>pl(t),decode:t=>dl(t)});var Bc={};Je(Bc,{base2:()=>Eb});var Eb=Ne({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ic={};Je(Ic,{base8:()=>Sb});var Sb=Ne({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var kc={};Je(kc,{base10:()=>_b});var _b=Hr({prefix:"9",name:"base10",alphabet:"0123456789"});var Nc={};Je(Nc,{base16:()=>Ab,base16upper:()=>Cb});var Ab=Ne({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Cb=Ne({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lc={};Je(Lc,{base32:()=>Ft,base32hex:()=>Ib,base32hexpad:()=>Nb,base32hexpadupper:()=>Lb,base32hexupper:()=>kb,base32pad:()=>Tb,base32padupper:()=>Bb,base32upper:()=>Db,base32z:()=>Rb});var Ft=Ne({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Db=Ne({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Tb=Ne({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bb=Ne({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ib=Ne({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kb=Ne({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nb=Ne({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Lb=Ne({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rb=Ne({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rc={};Je(Rc,{base36:()=>Ob,base36upper:()=>Pb});var Ob=Hr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pb=Hr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oc={};Je(Oc,{base58btc:()=>Pe,base58flickr:()=>Ub});var Pe=Hr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ub=Hr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pc={};Je(Pc,{base64:()=>qn,base64pad:()=>Fb,base64url:()=>Mb,base64urlpad:()=>Kb});var qn=Ne({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fb=Ne({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mb=Ne({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kb=Ne({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Uc={};Je(Uc,{base256emoji:()=>Gb});var bl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Vb=bl.reduce((t,e,r)=>(t[r]=e,t),[]),qb=bl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function zb(t){return t.reduce((e,r)=>(e+=Vb[r],e),"")}function Hb(t){let e=[];for(let r of t){let n=qb[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Gb=Vn({prefix:"\u{1F680}",name:"base256emoji",encode:zb,decode:Hb});var qc={};Je(qc,{sha256:()=>Ze,sha512:()=>fm});var Vc=W(He("crypto"),1);var Wb=wl,ml=128,jb=127,$b=~jb,Xb=Math.pow(2,31);function wl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Xb;)e[r++]=t&255|ml,t/=128;for(;t&$b;)e[r++]=t&255|ml,t>>>=7;return e[r]=t|0,wl.bytes=r-n+1,e}var Yb=Fc,Jb=128,xl=127;function Fc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Fc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&xl)<<i:(o&xl)*Math.pow(2,i),i+=7}while(o>=Jb);return Fc.bytes=s-n,r}var Zb=Math.pow(2,7),Qb=Math.pow(2,14),em=Math.pow(2,21),tm=Math.pow(2,28),rm=Math.pow(2,35),nm=Math.pow(2,42),im=Math.pow(2,49),sm=Math.pow(2,56),om=Math.pow(2,63),am=function(t){return t<Zb?1:t<Qb?2:t<em?3:t<tm?4:t<rm?5:t<nm?6:t<im?7:t<sm?8:t<om?9:10},cm={encode:Wb,decode:Yb,encodingLength:am},um=cm,Gi=um;var Wi=(t,e=0)=>[Gi.decode(t,e),Gi.decode.bytes],zn=(t,e,r=0)=>(Gi.encode(t,e,r),e),Hn=t=>Gi.encodingLength(t);var er=(t,e)=>{let r=e.byteLength,n=Hn(t),i=n+Hn(r),s=new Uint8Array(i+r);return zn(t,s,0),zn(r,s,n),s.set(e,i),new Gn(t,r,e,s)},un=t=>{let e=Dt(t),[r,n]=Wi(e),[i,s]=Wi(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Gn(r,i,o,e)},vl=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&hl(t.bytes,r.bytes)}},Gn=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Kc=({name:t,code:e,encode:r})=>new Mc(t,e,r),Mc=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?er(this.code,r):r.then(n=>er(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ze=Kc({name:"sha2-256",code:18,encode:t=>Dt(Vc.default.createHash("sha256").update(t).digest())}),fm=Kc({name:"sha2-512",code:19,encode:t=>Dt(Vc.default.createHash("sha512").update(t).digest())});var zc={};Je(zc,{identity:()=>Gr});var Sl=0,lm="identity",_l=Dt,hm=t=>er(Sl,_l(t)),Gr={code:Sl,name:lm,encode:_l,digest:hm};var OA=new TextEncoder,PA=new TextDecoder;var Al=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return gm(r,Hc(t),e||Pe.encoder);default:return bm(r,Hc(t),e||Ft.encoder)}};var Cl=new WeakMap,Hc=t=>{let e=Cl.get(t);if(e==null){let r=new Map;return Cl.set(t,r),r}return e},me=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==ji)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==mm)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return me.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=er(e,r);return me.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return me.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&vl(e.multihash,n.multihash)}toString(e){return Al(this,e)}toJSON(){return{"/":Al(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof me)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new me(n,i,s,o||Dl(n,i,s.bytes))}else if(r[xm]===!0){let{version:n,multihash:i,code:s}=r,o=un(i);return me.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==ji)throw new Error(`Version 0 CID must use dag-pb (code: ${ji}) block encoding`);return new me(e,r,n,n.bytes)}case 1:{let i=Dl(e,r,n.bytes);return new me(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return me.create(0,ji,e)}static createV1(e,r){return me.create(1,e,r)}static decode(e){let[r,n]=me.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=me.inspectBytes(e),n=r.size-r.multihashSize,i=Dt(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Gn(r.multihashCode,r.digestSize,s,i);return[r.version===0?me.createV0(o):me.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=Wi(e.subarray(r));return r+=h,l},i=n(),s=ji;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),u=r+c,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=ym(e,r),s=me.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Hc(s).set(n,e),s}},ym=(t,e)=>{switch(t[0]){case"Q":{let r=e||Pe;return[Pe.prefix,r.decode(`${Pe.prefix}${t}`)]}case Pe.prefix:{let r=e||Pe;return[Pe.prefix,r.decode(t)]}case Ft.prefix:{let r=e||Ft;return[Ft.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},gm=(t,e,r)=>{let{prefix:n}=r;if(n!==Pe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},bm=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},ji=112,mm=18,Dl=(t,e,r)=>{let n=Hn(t),i=n+Hn(e),s=new Uint8Array(i+r.byteLength);return zn(t,s,0),zn(e,s,n),s.set(r,i),s},xm=Symbol.for("@ipld/js-cid/CID");var tr={...Tc,...Bc,...Ic,...kc,...Nc,...Lc,...Rc,...Oc,...Pc,...Uc},WA={...qc,...zc};function Wr(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _r(t=0){return globalThis.Buffer?.alloc!=null?Wr(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function Tt(t=0){return globalThis.Buffer?.allocUnsafe!=null?Wr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Bl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Tl=Bl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Gc=Bl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Tt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),wm={utf8:Tl,"utf-8":Tl,hex:tr.base16,latin1:Gc,ascii:Gc,binary:Gc,...tr},eo=wm;function $(t,e="utf8"){let r=eo[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Il=zr.isIPv4,vm=zr.isIPv6,Wc=function(t){let e=0;if(t=t.toString().trim(),Il(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(vm(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let s=Il(r[n]),o;s&&(o=Wc(r[n]),r[n]=$(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,$(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let i=new Uint8Array(e+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},kl=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){let i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var $i={},jc={},Sm=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Sm.forEach(t=>{let e=_m(...t);jc[e.code]=e,$i[e.name]=e});function _m(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function de(t){if(typeof t=="number"){if(jc[t]!=null)return jc[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if($i[t]!=null)return $i[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var rr=W(to(),1);function _e(t,e="utf8"){let r=eo[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Wr(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function pe(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));let r=Tt(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Wr(r)}var ro=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){let r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,o=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,e);if(!Number.isNaN(h))return h});if(f===void 0)break;if(s*=e,s+=f,s>u||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&c&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let r=0;r<e.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){let e=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),o=16-(n+2),[a]=e(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var mC=new ro;var CC=parseInt("0xFFFF",16),DC=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var oD=de("ip4"),aD=de("ip6"),cD=de("ipcidr");function jl(t,e){switch(de(t).code){case 4:case 41:return Hm(e);case 42:return Gl(e);case 6:case 273:case 33:case 132:return Xl(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Gl(e);case 421:return $m(e);case 444:return Wl(e);case 445:return Wl(e);case 466:return jm(e);default:return $(e,"base16")}}function $l(t,e){switch(de(t).code){case 4:return zl(e);case 41:return zl(e);case 42:return Hl(e);case 6:case 273:case 33:case 132:return Jc(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Hl(e);case 421:return Gm(e);case 444:return Xm(e);case 445:return Ym(e);case 466:return Wm(e);default:return _e(e,"base16")}}var Yc=Object.values(tr).map(t=>t.decoder),zm=function(){let t=Yc[0].or(Yc[1]);return Yc.slice(2).forEach(e=>t=t.or(e)),t}();function zl(t){if(!Zs(t))throw new Error("invalid ip address");return Wc(t)}function Hm(t){let e=kl(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Zs(e))throw new Error("invalid ip address");return e}function Jc(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Xl(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Hl(t){let e=_e(t),r=Uint8Array.from(rr.default.encode(e.length));return pe([r,e],r.length+e.length)}function Gl(t){let e=rr.default.decode(t);if(t=t.slice(rr.default.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return $(t)}function Gm(t){let e;t[0]==="Q"||t[0]==="1"?e=un(Pe.decode(`z${t}`)).bytes:e=me.parse(t).multihash.bytes;let r=Uint8Array.from(rr.default.encode(e.length));return pe([r,e],r.length+e.length)}function Wm(t){let e=zm.decode(t),r=Uint8Array.from(rr.default.encode(e.length));return pe([r,e],r.length+e.length)}function jm(t){let e=rr.default.decode(t),r=t.slice(rr.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+$(r,"base64url")}function $m(t){let e=rr.default.decode(t),r=t.slice(rr.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return $(r,"base58btc")}function Xm(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=Ft.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Jc(n);return pe([r,i],r.length+i.length)}function Ym(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=Ft.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Jc(n);return pe([r,i],r.length+i.length)}function Wl(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=$(e,"base32"),i=Xl(r);return`${n}:${i}`}var Wn=W(to(),1);function Jm(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],s=de(i);if(s.size===0){e.push([i]);continue}if(n++,n>=r.length)throw Jl("invalid address: "+t);if(s.path===!0){e.push([i,ru(r.slice(n).join("/"))]);break}e.push([i,r[n]])}return e}function Zm(t){let e=[];return t.map(r=>{let n=so(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),ru(e.join("/"))}function Qm(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=so(e);return e.length>1?[r.code,$l(r.code,e[1])]:[r.code]})}function Zc(t){return t.map(e=>{let r=so(e);return e[1]!=null?[r.code,jl(r.code,e[1])]:[r.code]})}function Qc(t){return io(pe(t.map(e=>{let r=so(e),n=Uint8Array.from(Wn.default.encode(r.code));return e.length>1&&e[1]!=null&&(n=pe([n,e[1]])),n})))}function eu(t,e){return t.size>0?t.size/8:t.size===0?0:Wn.default.decode(e)+(Wn.default.decode.bytes??0)}function no(t){let e=[],r=0;for(;r<t.length;){let n=Wn.default.decode(t,r),i=Wn.default.decode.bytes??0,s=de(n),o=eu(s,t.slice(r+i));if(o===0){e.push([n]),r+=i;continue}let a=t.slice(r+i,r+i+o);if(r+=o+i,r>t.length)throw Jl("Invalid address Uint8Array: "+$(t,"base16"));e.push([n,a])}return e}function tu(t){let e=no(t),r=Zc(e);return Zm(r)}function ex(t){t=ru(t);let e=Jm(t),r=Qm(e);return Qc(r)}function Yl(t){return ex(t)}function io(t){let e=tx(t);if(e!=null)throw e;return Uint8Array.from(t)}function tx(t){try{no(t)}catch(e){return e}}function ru(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Jl(t){return new Error("Error parsing address: "+t)}function so(t){return de(t[0])}var nu=W(to(),1);var ee=class extends Error{constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};function Ve(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Ar=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},$n=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Xi,Yi,Ji,jr,Zl,nx=Symbol.for("nodejs.util.inspect.custom"),ix=[de("dns").code,de("dns4").code,de("dns6").code,de("dnsaddr").code],sx=new Map,Ql=Symbol.for("@multiformats/js-multiaddr/multiaddr");function ox(t){return!!t?.[Ql]}var Cr=class{constructor(e){if(Xi.set(this,void 0),Yi.set(this,void 0),Ji.set(this,void 0),jr.set(this,void 0),this[Zl]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=io(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Yl(e)}else if(ox(e))this.bytes=io(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Ar(this,Xi,"f")==null&&$n(this,Xi,tu(this.bytes),"f"),Ar(this,Xi,"f")}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="",o=de("tcp"),a=de("udp"),c=de("ip4"),u=de("ip6"),f=de("dns6"),l=de("ip6zone");for(let[p,d]of this.stringTuples())p===l.code&&(s=`%${d??""}`),ix.includes(p)&&(r=o.name,i=443,n=`${d??""}${s}`,e=p===f.code?6:4),(p===o.code||p===a.code)&&(r=de(p).name,i=parseInt(d??"")),(p===c.code||p===u.code)&&(r=de(p).name,n=`${d??""}${s}`,e=p===u.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},de(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let i=nu.default.decode(r,n),s=nu.default.decode.bytes??0,o=de(i),a=eu(o,r.slice(n+s));n+=a+s,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Ar(this,Yi,"f")==null&&$n(this,Yi,no(this.bytes),"f"),Ar(this,Yi,"f")}stringTuples(){return Ar(this,Ji,"f")==null&&$n(this,Ji,Zc(this.tuples()),"f"),Ar(this,Ji,"f")}encapsulate(e){return e=new Cr(e),new Cr(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Cr(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Cr(Qc(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===$i.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?$(Pe.decode(`z${n}`),"base58btc"):$(me.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){if(Ar(this,jr,"f")===void 0)try{$n(this,jr,this.stringTuples().filter(e=>de(e[0]).path===!0)[0][1],"f"),Ar(this,jr,"f")==null&&$n(this,jr,null,"f")}catch{$n(this,jr,null,"f")}return Ar(this,jr,"f")}equals(e){return Ve(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=sx.get(r.name);if(n==null)throw new ee(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(s=>new Cr(s))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(Xi=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,jr=new WeakMap,Zl=Ql,nx)](){return`Multiaddr(${tu(this.bytes)})`}};function jn(t){return new Cr(t)}var eh=Symbol.for("@libp2p/peer-id");var ax=Symbol.for("nodejs.util.inspect.custom"),th=Object.values(tr).map(t=>t.decoder).reduce((t,e)=>t.or(e),tr.identity.decoder),rh=114,iu=36,su=37,Zi=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[eh](){return!0}toString(){return this.string==null&&(this.string=Pe.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return me.createV1(rh,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Ve(this.multihash.bytes,e);if(typeof e=="string")return Qi(e).equals(this);if(e?.multihash?.bytes!=null)return Ve(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[ax](){return`PeerId(${this.toString()})`}},Xn=class extends Zi{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Yn=class extends Zi{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Jn=class extends Zi{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function Qi(t,e){if(e=e??th,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=un(Pe.decode(`z${t}`));return t.startsWith("12D")?new Yn({multihash:r}):t.startsWith("16U")?new Jn({multihash:r}):new Xn({multihash:r})}return cx(th.decode(t))}function cx(t){try{let e=un(t);if(e.code===Gr.code){if(e.digest.length===iu)return new Yn({multihash:e});if(e.digest.length===su)return new Jn({multihash:e})}if(e.code===Ze.code)return new Xn({multihash:e})}catch{return ux(me.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function ux(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==rh)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===Ze.code)return new Xn({multihash:t.multihash});if(e.code===Gr.code){if(e.digest.length===iu)return new Yn({multihash:t.multihash});if(e.digest.length===su)return new Jn({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function ou(t,e){return t.length===iu?new Yn({multihash:er(Gr.code,t),privateKey:e}):t.length===su?new Jn({multihash:er(Gr.code,t),privateKey:e}):new Xn({multihash:await Ze.digest(t),publicKey:t,privateKey:e})}var Bt=W(dh(),1);Bt.default.formatters.b=t=>t==null?"undefined":Pe.baseEncode(t);Bt.default.formatters.t=t=>t==null?"undefined":Ft.baseEncode(t);Bt.default.formatters.m=t=>t==null?"undefined":qn.baseEncode(t);Bt.default.formatters.p=t=>t==null?"undefined":t.toString();Bt.default.formatters.c=t=>t==null?"undefined":t.toString();Bt.default.formatters.k=t=>t==null?"undefined":t.toString();function Rx(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function ft(t){let e=Rx(`${t}:trace`);return Bt.default.enabled(`${t}:trace`)&&Bt.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,Bt.default)(`${t}:trace`)),Object.assign((0,Bt.default)(t),{error:(0,Bt.default)(`${t}:error`),trace:e})}var fo={async*[Symbol.asyncIterator](){}},lo=async t=>{},ph=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),yh=t=>[...Array(t)].map(()=>ph.at(Math.floor(Math.random()*ph.length))).join("");var Ox=ft("libp2p:webrtc:connection"),hn=class{constructor(e){this.source=fo,this.sink=lo,this.remoteAddr=e.remoteAddr,this.timeline=e.timeline,this.peerConnection=e.peerConnection}async close(e){e!==void 0&&Ox.error("error closing connection",e),this.timeline.close=new Date().getTime(),this.peerConnection.close()}};var dn=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Dr,ho=class extends EventTarget{constructor(){super(...arguments),Dr.set(this,new Map)}listenerCount(e){let r=dn(this,Dr,"f").get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=dn(this,Dr,"f").get(e);i==null&&(i=[],dn(this,Dr,"f").set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=dn(this,Dr,"f").get(e);i!=null&&(i=i.filter(({callback:s})=>s!==r),dn(this,Dr,"f").set(e,i))}dispatchEvent(e){let r=super.dispatchEvent(e),n=dn(this,Dr,"f").get(e.type);return n==null||(n=n.filter(({once:i})=>!i),dn(this,Dr,"f").set(e.type,n)),r}safeDispatchEvent(e,r){return this.dispatchEvent(new Px(e,r))}};Dr=new WeakMap;var fu=class extends Event{constructor(e,r){super(e,r),this.detail=r?.detail}},Px=globalThis.CustomEvent??fu;var It;(function(t){t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_DATA_CHANNEL="ERR_DATA_CHANNEL",t.ERR_CONNECTION_CLOSED="ERR_CONNECTION_CLOSED",t.ERR_HASH_NOT_SUPPORTED="ERR_HASH_NOT_SUPPORTED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_INVALID_FINGERPRINT="ERR_INVALID_FINGERPRINT",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"})(It||(It={}));var $r=class extends ee{constructor(e,r){super(`WebRTC transport error: ${e}`,r??""),this.name="WebRTCTransportError"}};var lu=class extends $r{constructor(e,r){super(`[stream: ${e}] data channel error: ${r}`,It.ERR_DATA_CHANNEL),this.name="WebRTC/DataChannelError"}};function bu(t,e){return new lu(t,e)}var hu=class extends $r{constructor(e){super(`There was a problem with the Multiaddr which was passed in: ${e}`,It.ERR_INVALID_MULTIADDR),this.name="WebRTC/InappropriateMultiaddrError"}};function ri(t){return new hu(t)}var du=class extends $r{constructor(e){super(`There was a problem with a provided argument: ${e}`,It.ERR_INVALID_PARAMETERS),this.name="WebRTC/InvalidArgumentError"}};function ni(t){return new du(t)}var pu=class extends $r{constructor(e,r){super(`Invalid fingerprint "${e}" within ${r}`,It.ERR_INVALID_FINGERPRINT),this.name="WebRTC/InvalidFingerprintError"}};function gh(t,e){return new pu(t,e)}var yu=class extends $r{constructor(e){super(`A method (${e}) was called though it has been intentionally left unimplemented.`,It.ERR_NOT_IMPLEMENTED),this.name="WebRTC/UnimplementedError"}};function bh(t){return new yu(t)}var gu=class extends $r{constructor(e){super(`unsupported hash algorithm: ${e}`,It.ERR_HASH_NOT_SUPPORTED),this.name="WebRTC/UnsupportedHashAlgorithmError"}};function mh(t){return new gu(t)}var po=class extends ho{constructor(e){super(),this.opts=e,this.listeningAddrs=[]}getBaseAddress(e){let r=e.toString().split(es);if(r.length<2)throw ri("base address not found");return jn(r[0])}async listen(e){let r=this.getBaseAddress(e),i=this.opts.transportManager.transportForMultiaddr(r)?.createListener({...this.opts});await i?.listen(r);let s=e.encapsulate(`/p2p/${this.opts.peerId.toString()}`);this.listeningAddrs.push(s),i?.addEventListener("close",()=>{this.listeningAddrs=this.listeningAddrs.filter(o=>o!==s)})}getAddrs(){return this.listeningAddrs}async close(){}};var wh=Symbol.for("@achingbrain/uint8arraylist");function xh(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function yo(t){return!!t?.[wh]}var Me=class{constructor(...e){Object.defineProperty(this,wh,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(yo(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(yo(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=xh(this.bufs,e);return r.buf[r.index]}set(e,r){let n=xh(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(yo(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return pe(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:pe(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),s=new Me;return s.length=i,s.bufs=n,s}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,c=a+o.byteLength;if(i=c,e>=c)continue;let u=e>=a&&e<c,f=r>a&&r<=c;if(u&&f){if(e===a&&r===c){n.push(o);break}let l=e-a;n.push(o.subarray(l,l+(r-e)));break}if(u){if(e===0){n.push(o);continue}n.push(o.subarray(e-a));continue}if(f){if(r===c){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!yo(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let h=u;h>=0;h--){let p=this.get(l+h);if(n[h]!==p){f=Math.max(1,h-a[p]);break}}if(f===0)return l}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=Tt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=_r(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=Tt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=_r(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof Me)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Ve(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new Me;return n.bufs=e,r==null&&(r=e.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function go(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,r){t[e]=r}}:{get(e){return t.get(e)},set(e,r){t.set(e,r)}}}var vh=4294967296,Et=class{constructor(e=0,r=0){this.hi=e,this.lo=r}toBigInt(e){if(e===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){let e=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^e)>>>0,n=(this.hi>>>1^e)>>>0;return new Et(n,r)}zzEncode(){let e=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^e)>>>0,n=(this.lo<<1^e)>>>0;return new Et(r,n)}toBytes(e,r=0){let n=go(e);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(e){if(e===0n)return new Et;let r=e<0;r&&(e=-e);let n=Number(e>>32n)|0,i=Number(e-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>vh&&(i=0,++n>vh&&(n=0))),new Et(n,i)}static fromNumber(e){if(e===0)return new Et;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Et(i,n)}static fromBytes(e,r=0){let n=go(e),i=new Et,s=0;if(e.length-r>4){for(;s<4;++s)if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;s=0}else for(;s<4;++s){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i}if(e.length-r>4){for(;s<5;++s)if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}else if(r<e.byteLength)for(;s<5;++s){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var Ux=Math.pow(2,7),Fx=Math.pow(2,14),Mx=Math.pow(2,21),Kx=Math.pow(2,28),Vx=Math.pow(2,35),qx=Math.pow(2,42),zx=Math.pow(2,49),Hx=Math.pow(2,56),Gx=Math.pow(2,63),pt={encodingLength(t){return t<Ux?1:t<Fx?2:t<Mx?3:t<Kx?4:t<Vx?5:t<qx?6:t<zx?7:t<Hx?8:t<Gx?9:10},encode(t,e,r=0){if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return e==null&&(e=Tt(pt.encodingLength(t))),Et.fromNumber(t).toBytes(e,r),e},decode(t,e=0){return Et.fromBytes(t,e).toNumber(!0)}};function bo(t){return t[Symbol.asyncIterator]!=null}var mo=t=>{let e=pt.encodingLength(t),r=Tt(e);return pt.encode(t,r),mo.bytes=e,r};mo.bytes=0;function xo(t,e){e=e??{};let r=e.lengthEncoder??mo;function*n(i){let s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return bo(t)?async function*(){for await(let i of t)yield*n(i)}():function*(){for(let i of t)yield*n(i)}()}xo.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??mo;return new Me(r(t.byteLength),t)};var ii=W(wo(),1);var jx=8,$x=1024*1024*4,pn;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(pn||(pn={}));var xu=t=>{let e=pt.decode(t);return xu.bytes=pt.encodingLength(e),e};xu.bytes=0;function mu(t,e){let r=new Me,n=pn.LENGTH,i=-1,s=e?.lengthDecoder??xu,o=e?.maxLengthLength??jx,a=e?.maxDataLength??$x;function*c(){for(;r.byteLength>0;){if(n===pn.LENGTH)try{if(i=s(r),i<0)throw(0,ii.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,ii.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let u=s.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=pn.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>o)throw(0,ii.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw u}if(n===pn.DATA){if(r.byteLength<i)break;let u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=pn.LENGTH}}}return bo(t)?async function*(){for await(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,ii.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,ii.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}mu.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return mu(n,{...e??{},onLength:s=>{r=s}})};var vo=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},si=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new vo(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new vo(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function kt(t={}){return Yx(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Yx(t,e){e=e??{};let r=e.onEnd,n=new si,i,s,o,a=async()=>n.isEmpty()?o?{done:!0}:await new Promise((y,g)=>{s=b=>{s=null,n.push(b);try{y(t(n))}catch(v){g(v)}return i}}):t(n),c=y=>s!=null?s(y):(n.push(y),i),u=y=>(n=new si,s!=null?s({error:y}):(n.push({error:y}),i)),f=y=>{if(o)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:y})},l=y=>o?i:(o=!0,y!=null?u(y):c({done:!0})),h=()=>(n=new si,l(),{done:!0}),p=y=>(l(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:p,push:f,end:l,get readableLength(){return n.size}},r==null)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(y){return d.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return d.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(y){return d.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return d.readableLength}},i}var Eo=W(wo(),1),_h=t=>pt.decode(t);_h.bytes=0;function oi(t,e={}){let r=kt();t.sink(r).catch(o=>{r.end(o)}),t.sink=async o=>{for await(let a of o)r.push(a)};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());let i=new Me,s={read:async o=>{if(o==null){let{done:c,value:u}=await n.next();return c===!0?new Me:u}for(;i.byteLength<o;){let{value:c,done:u}=await n.next();if(u===!0)throw(0,Eo.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,o);return i.consume(o),a},readLP:async()=>{let o=-1,a=new Me,c=e?.lengthDecoder??_h;for(;;){a.append(await s.read(1));try{o=c(a)}catch(u){if(u instanceof RangeError)continue;throw u}if(o>-1)break;if(e?.maxLengthLength!=null&&a.byteLength>e.maxLengthLength)throw(0,Eo.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&o>e.maxDataLength)throw(0,Eo.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await s.read(o)},readPB:async o=>{let a=await s.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return o.decode(c)},write:o=>{o instanceof Uint8Array?r.push(o):r.push(o.subarray())},writeLP:o=>{s.write(xo.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:async()=>await s.readPB(o),write:a=>{s.writePB(a,o)},unwrap:()=>s}),unwrap:()=>{let o=t.source;return t.source=async function*(){yield*i,yield*o}(),t}};return s}function nr(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var _p=W(kh(),1);var Lu=W(Au(),1),md=W(fd(),1),xd=W(gn(),1),Ru=W(Nu(),1),wd=W(bd(),1);function aw(){xd.default._configure(),Lu.default._configure(md.default),Ru.default._configure(wd.default)}aw();var vd=["uint64","int64","sint64","fixed64","sfixed64"];function cw(t){for(let e of vd){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function Ou(t){return cw(new Lu.default(t))}function uw(t){for(let e of vd){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function Pu(){return uw(Ru.default.create())}function Tr(t,e){let r=Ou(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function Br(t,e){let r=Pu();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var ci;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(ci||(ci={}));function To(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function is(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(s,o){let a=e(s);o.int32(a)},n=function(s){let o=s.int32();return e(o)};return To("enum",ci.VARINT,r,n)}function Ir(t,e){return To("message",ci.LENGTH_DELIMITED,t,e)}var St;(function(t){let e;(function(i){i.SDP_OFFER="SDP_OFFER",i.SDP_ANSWER="SDP_ANSWER",i.ICE_CANDIDATE="ICE_CANDIDATE"})(e=t.Type||(t.Type={}));let r;(function(i){i[i.SDP_OFFER=0]="SDP_OFFER",i[i.SDP_ANSWER=1]="SDP_ANSWER",i[i.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(r||(r={})),function(i){i.codec=()=>is(r)}(e=t.Type||(t.Type={}));let n;t.codec=()=>(n==null&&(n=Ir((i,s,o={})=>{o.lengthDelimited!==!1&&s.fork(),i.type!=null&&(s.uint32(8),t.Type.codec().encode(i.type,s)),i.data!=null&&(s.uint32(18),s.string(i.data)),o.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{let o={},a=s==null?i.len:i.pos+s;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:o.type=t.Type.codec().decode(i);break;case 2:o.data=i.string();break;default:i.skipType(c&7);break}}return o})),n),t.encode=i=>Br(i,t.codec()),t.decode=i=>Tr(i,t.codec())})(St||(St={}));var Ud=W(Rd(),1),Od=(0,Ud.detect)(),Pd=Od!=null&&Od.name==="firefox",Bo=ft("libp2p:webrtc:peer:util"),Fu=async(t,e,r)=>{for(;;){let n=await Promise.race([t.promise,r.read()]);if(n instanceof Object){let i=n;if(i.type!==St.Type.ICE_CANDIDATE)throw new Error("expected only ice candidates");if(i.data==null||i.data===""){Bo.trace("end-of-candidates received");break}Bo.trace("received new ICE candidate: %s",i.data);try{await e.addIceCandidate(new RTCIceCandidate(JSON.parse(i.data)))}catch(s){throw Bo.error("bad candidate received: ",s),new Error("bad candidate received")}}else break}await t.promise};function Mu(t,e){t[Pd?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(Bo.trace("receiver peerConnectionState state: ",t.connectionState),Pd?t.iceConnectionState:t.connectionState){case"connected":e.resolve();break;case"failed":case"disconnected":case"closed":e.reject();break;default:break}}}var ss=class extends Error{constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Fd(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}function Md(t,e,r){let n=r??{},i=Fd(t);async function*s(){let o,a=()=>{o?.()};for(e.addEventListener("abort",a);;){let c;try{if(e.aborted){let{abortMessage:f,abortCode:l}=n;throw new ss(f,l)}let u=new Promise((f,l)=>{o=()=>{let{abortMessage:h,abortCode:p}=n;l(new ss(h,p))}});c=await Promise.race([u,i.next()]),o=null}catch(u){e.removeEventListener("abort",a);let f=u.type==="aborted"&&e.aborted;if(f&&n.onAbort!=null&&await n.onAbort(t),typeof i.return=="function")try{let l=i.return();l instanceof Promise&&l.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(l){n.onReturnError!=null&&n.onReturnError(l)}if(f&&n.returnOnAbort===!0)return;throw u}if(c.done===!0)break;yield c.value}e.removeEventListener("abort",a)}return s()}function gw(t,e,r){return n=>t(Md(n,e,r))}function Ku(t,e,r){return{sink:gw(t.sink,e,{...r,onAbort:void 0}),source:Md(t.source,e,r)}}function Kd(t){return globalThis?.Buffer?.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}var Io=t=>{let e=pt.encodingLength(t),r=Kd(e);return pt.encode(t,r),Io.bytes=e,r};Io.bytes=0;function os(t){t=t??{};let e=t.lengthEncoder??Io;return async function*(n){for await(let i of n){let s=e(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}}}os.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??Io;return new Me(r(t.byteLength),t)};var as=W(wo(),1),bw=8,mw=1024*1024*4,mn;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(mn||(mn={}));var Vu=t=>{let e=pt.decode(t);return Vu.bytes=pt.encodingLength(e),e};Vu.bytes=0;function xn(t){return async function*(r){let n=new Me,i=mn.LENGTH,s=-1,o=t?.lengthDecoder??Vu,a=t?.maxLengthLength??bw,c=t?.maxDataLength??mw;for await(let u of r)for(n.append(u);n.byteLength>0;){if(i===mn.LENGTH)try{if(s=o(n),s<0)throw(0,as.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(s>c)throw(0,as.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let f=o.bytes;n.consume(f),t?.onLength!=null&&t.onLength(s),i=mn.DATA}catch(f){if(f instanceof RangeError){if(n.byteLength>a)throw(0,as.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw f}if(i===mn.DATA){if(n.byteLength<s)break;let f=n.sublist(0,s);n.consume(s),t?.onData!=null&&t.onData(f),yield f,i=mn.LENGTH}}if(n.byteLength>0)throw(0,as.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}xn.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return xn({...e??{},onLength:s=>{r=s}})(n)};async function*cs(...t){let e=kt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async r=>{for await(let n of r)e.push(n)})),e.end()}catch(r){e.end(r)}}),yield*e}function ww(t){return t[Symbol.asyncIterator]!=null}function vw(...t){let e=[];for(let r of t)ww(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=kt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var Vd=vw;function qd(t,...e){if(t==null)throw new Error("Empty pipeline");if(qu(t)){let n=t;t=()=>n.source}else if(Hd(t)||zd(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&qu(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)qu(r[n])&&(r[n]=Sw(r[n]));return Ew(...r)}var Ew=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},zd=t=>t?.[Symbol.asyncIterator]!=null,Hd=t=>t?.[Symbol.iterator]!=null,qu=t=>t==null?!1:t.sink!=null&&t.source!=null,Sw=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=kt({objectMode:!0});r.then(()=>{n.end()},o=>{n.end(o)});let i,s=t.source;if(zd(s))i=async function*(){yield*s,n.end()};else if(Hd(s))i=function*(){yield*s,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return Vd(n,i())}return t.source};var p0=W(mi(),1),y0=W(mi(),1),vp=W(mi(),1),Ep=W(mi(),1),Sp=W(mi(),1),lt;(function(t){t[t.FIN=0]="FIN",t[t.STOP_SENDING=1]="STOP_SENDING",t[t.RESET=2]="RESET"})(lt||(lt={}));var g0=class extends Sp.MessageType{constructor(){super("webrtc.pb.Message",[{no:1,name:"flag",kind:"enum",opt:!0,T:()=>["webrtc.pb.Message.Flag",lt]},{no:2,name:"message",kind:"scalar",opt:!0,T:12}])}create(e){let r={};return globalThis.Object.defineProperty(r,Ep.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,vp.reflectionMergePartial)(this,r,e),r}internalBinaryRead(e,r,n,i){let s=i??this.create(),o=e.pos+r;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.flag=e.int32();break;case 2:s.message=e.bytes();break;default:let u=n.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let f=e.skip(c);u!==!1&&(u===!0?y0.UnknownFieldHandler.onRead:u)(this.typeName,s,a,c,f)}}return s}internalBinaryWrite(e,r,n){e.flag!==void 0&&r.tag(1,p0.WireType.Varint).int32(e.flag),e.message!==void 0&&r.tag(2,p0.WireType.LengthDelimited).bytes(e.message);let i=n.writeUnknownFields;return i!==!1&&(i==!0?y0.UnknownFieldHandler.onWrite:i)(this.typeName,e,r),r}},ca=new g0;var b0=ft("libp2p:webrtc:stream");var Y;(function(t){t[t.OPEN=0]="OPEN",t[t.READ_CLOSED=1]="READ_CLOSED",t[t.WRITE_CLOSED=2]="WRITE_CLOSED",t[t.CLOSED=3]="CLOSED"})(Y||(Y={}));function ua(t){throw new Error("Case not handled in switch")}var m0=class{constructor(){this.state=Y.OPEN}isWriteClosed(){return this.state===Y.CLOSED||this.state===Y.WRITE_CLOSED}transition({direction:e,flag:r}){let n=this.state;if(this.state===Y.CLOSED)return[n,Y.CLOSED];if(e==="inbound")switch(r){case lt.FIN:this.state===Y.OPEN?this.state=Y.READ_CLOSED:this.state===Y.WRITE_CLOSED&&(this.state=Y.CLOSED);break;case lt.STOP_SENDING:this.state===Y.OPEN?this.state=Y.WRITE_CLOSED:this.state===Y.READ_CLOSED&&(this.state=Y.CLOSED);break;case lt.RESET:this.state=Y.CLOSED;break;default:ua(r)}else switch(r){case lt.FIN:this.state===Y.OPEN?this.state=Y.WRITE_CLOSED:this.state===Y.READ_CLOSED&&(this.state=Y.CLOSED);break;case lt.STOP_SENDING:this.state===Y.OPEN?this.state=Y.READ_CLOSED:this.state===Y.WRITE_CLOSED&&(this.state=Y.CLOSED);break;case lt.RESET:this.state=Y.CLOSED;break;default:ua(r)}return[n,this.state]}},Gt=class{constructor(e){switch(this.streamState=new m0,this._innersrc=kt(),this.opened=nr(),this._sinkCalled=!1,this.closeWritePromise=nr(),this.channel=e.channel,this.id=this.channel.label,this.stat=e.stat,this.channel.readyState){case"open":this.opened.resolve();break;case"closed":case"closing":this.streamState.state=Y.CLOSED,(this.stat.timeline.close===void 0||this.stat.timeline.close===0)&&(this.stat.timeline.close=new Date().getTime()),this.opened.resolve();break;case"connecting":break;default:ua(this.channel.readyState)}this.metadata=e.metadata??{},this.channel.onopen=n=>{this.stat.timeline.open=new Date().getTime(),this.opened.resolve()},this.channel.onclose=n=>{this.close()},this.channel.onerror=n=>{let i=n.error;this.abort(i)};let r=this;this.channel.onmessage=async({data:n})=>{n===null||n.length===0||this._innersrc.push(new Uint8Array(n))},this._src=qd(this._innersrc,xn(),n=>async function*(){for await(let i of n){let s=r.processIncomingProtobuf(i.subarray());s!=null&&(yield new Me(s))}}())}set source(e){}get source(){return this._src}async sink(e){if(this._sinkCalled)throw new Error("sink already called on this stream");await this.opened.promise;try{await this._sink(e)}finally{this.closeWrite()}}async _sink(e){let r=this._closeWriteIterable();for await(let n of cs(r,e)){if(this.streamState.isWriteClosed())return;let i=ca.toBinary({message:n.subarray()}),s=os.single(i);this.channel.send(s.subarray())}}processIncomingProtobuf(e){let r=ca.fromBinary(e);if(r.flag!==void 0){let[n,i]=this.streamState.transition({direction:"inbound",flag:r.flag});if(n!==i)switch(i){case Y.READ_CLOSED:this._innersrc.end();break;case Y.WRITE_CLOSED:this.closeWritePromise.resolve();break;case Y.CLOSED:this.close();break;case Y.OPEN:break;default:ua(i)}}return r.message}close(){this.stat.timeline.close=new Date().getTime(),this.streamState.state=Y.CLOSED,this._innersrc.end(),this.closeWritePromise.resolve(),this.channel.close(),this.closeCb!==void 0&&this.closeCb(this)}closeRead(){let[e,r]=this.streamState.transition({direction:"outbound",flag:lt.STOP_SENDING});e!==r&&((e===Y.OPEN||e===Y.WRITE_CLOSED)&&(this._sendFlag(lt.STOP_SENDING),this._innersrc.end()),r===Y.CLOSED&&this.close())}closeWrite(){let[e,r]=this.streamState.transition({direction:"outbound",flag:lt.FIN});e!==r&&((e===Y.OPEN||e===Y.READ_CLOSED)&&(this._sendFlag(lt.FIN),this.closeWritePromise.resolve()),r===Y.CLOSED&&this.close())}abort(e){b0.error(`An error occurred, closing the stream for reading and writing: ${e.message}`),this.close()}reset(){let[e,r]=this.streamState.transition({direction:"outbound",flag:lt.RESET});e!==r&&(this._sendFlag(lt.RESET),this.close())}_sendFlag(e){try{b0.trace("Sending flag: %s",e.toString());let r=ca.toBinary({flag:e});this.channel.send(os.single(r).subarray())}catch(r){r instanceof Error&&b0.error(`Exception while sending flag ${e}: ${r.message}`)}}_closeWriteIterable(){let e=this;return{async*[Symbol.asyncIterator](){await e.closeWritePromise.promise,yield new Uint8Array(0)}}}eq(e){return e instanceof Gt?e.channel.id===this.channel.id:!1}};var En=class{constructor(e,r="/webrtc"){this.protocol=r,this.streamBuffer=[],this.peerConnection=e,this.peerConnection.ondatachannel=({channel:n})=>{let i=new Gt({channel:n,stat:{direction:"inbound",timeline:{open:0}},closeCb:s=>{this.streamBuffer=this.streamBuffer.filter(o=>!s.eq(o))}});this.streamBuffer.push(i)}}createStreamMuxer(e){return new x0(this.peerConnection,this.streamBuffer,this.protocol,e)}},x0=class{constructor(e,r,n="/webrtc",i){this.protocol=n,this.streams=[],this.close=()=>{},this.source=fo,this.sink=lo,this.init=i,this.peerConnection=e,this.peerConnection.ondatachannel=({channel:o})=>{let a=new Gt({channel:o,stat:{direction:"inbound",timeline:{open:0}},closeCb:this.wrapStreamEnd(i?.onIncomingStream)});this.streams.push(a),i?.onIncomingStream!=null&&i.onIncomingStream(a)},this.streams=r.filter(o=>o.stat.timeline.close==null).map(o=>(o.closeCb=this.wrapStreamEnd(i?.onStreamEnd),o));let s=i?.onIncomingStream;s!=null&&this.streams.forEach(o=>{s(o)})}newStream(){let e=this.peerConnection.createDataChannel(""),r=new Gt({channel:e,stat:{direction:"outbound",timeline:{open:0}},closeCb:this.wrapStreamEnd(this.init?.onStreamEnd)});return this.streams.push(r),r}wrapStreamEnd(e){let r=this;return n=>{r.streams=r.streams.filter(i=>!(n instanceof Gt&&n.eq(i))),e?.(n)}}};var Qv=30*1e3,xi=ft("libp2p:webrtc:peer");async function Ap({rtcConfiguration:t,stream:e}){let r=new _p.TimeoutController(Qv),n=r.signal,i=oi(Ku(e,r.signal)).pb(St),s=new RTCPeerConnection(t),o=new En(s),a=nr(),c=nr();n.onabort=()=>{a.reject()},s.onicecandidate=({candidate:h})=>{c.promise.then(()=>{i.write({type:St.Type.ICE_CANDIDATE,data:h!=null?JSON.stringify(h.toJSON()):""})},p=>{xi.error("cannot set candidate since sending answer failed",p)})},Mu(s,a);let u=await i.read();if(u.type!==St.Type.SDP_OFFER)throw new Error(`expected message type SDP_OFFER, received: ${u.type??"undefined"} `);let f=new RTCSessionDescription({type:"offer",sdp:u.data});await s.setRemoteDescription(f).catch(h=>{throw xi.error("could not execute setRemoteDescription",h),new Error("Failed to set remoteDescription")});let l=await s.createAnswer().catch(h=>{throw xi.error("could not execute createAnswer",h),c.reject(h),new Error("Failed to create answer")});return i.write({type:St.Type.SDP_ANSWER,data:l.sdp}),await s.setLocalDescription(l).catch(h=>{throw xi.error("could not execute setLocalDescription",h),c.reject(h),new Error("Failed to set localDescription")}),c.resolve(),await Fu(a,s,i),[s,o]}async function Cp({rtcConfiguration:t,signal:e,stream:r}){let n=oi(Ku(r,e)).pb(St),i=new RTCPeerConnection(t),s=new En(i),o=nr();Mu(i,o),e.onabort=o.reject;let a=i.createDataChannel("init");i.onicecandidate=({candidate:l})=>{n.write({type:St.Type.ICE_CANDIDATE,data:l!=null?JSON.stringify(l.toJSON()):""})};let c=await i.createOffer();n.write({type:St.Type.SDP_OFFER,data:c.sdp}),await i.setLocalDescription(c).catch(l=>{throw xi.error("could not execute setLocalDescription",l),new Error("Failed to set localDescription")});let u=await n.read();if(u.type!==St.Type.SDP_ANSWER)throw new Error("remote should send an SDP answer");let f=new RTCSessionDescription({type:"answer",sdp:u.data});return await i.setRemoteDescription(f).catch(l=>{throw xi.error("could not execute setRemoteDescription",l),new Error("Failed to set remoteDescription")}),await Fu(o,i,n),a.close(),[i,s]}var Dp=ft("libp2p:webrtc:peer"),es="/webrtc",w0="/webrtc-signaling/0.0.1",e3=de("webrtc").code,fa=class{constructor(e,r){this.components=e,this.init=r,this._started=!1}isStarted(){return this._started}async start(){await this.components.registrar.handle(w0,e=>{this._onProtocol(e).catch(r=>{Dp.error("failed to handle incoming connect from %p",e.connection.remotePeer,r)})}),this._started=!0}async stop(){await this.components.registrar.unhandle(w0),this._started=!1}createListener(e){return new po(this.components)}get[Symbol.toStringTag](){return"@libp2p/webrtc"}get[Js](){return!0}filter(e){return e.filter(r=>r.protoCodes().includes(e3))}splitAddr(e){let r=e.toString().split(`${es}/`);if(r.length!==2)throw new ee("invalid multiaddr",It.ERR_INVALID_MULTIADDR);let n=jn(r[0]),s=jn("/"+r[1]).getPeerId();if(s==null)throw new ee("bad destination",It.ERR_INVALID_MULTIADDR);let o=n.protos().pop();if(o===void 0)throw new ee("invalid multiaddr",It.ERR_INVALID_MULTIADDR);return o.name!=="p2p"&&(n=n.encapsulate(`/p2p/${s}`)),{baseAddr:n,peerId:Qi(s)}}async dial(e,r){Dp.trace("dialing address: ",e);let{baseAddr:n,peerId:i}=this.splitAddr(e);if(r.signal==null){let a=new AbortController;r.signal=a.signal}let o=await(await this.components.transportManager.dial(n)).newStream([w0],r);try{let[a,c]=await Cp({stream:o,rtcConfiguration:this.init.rtcConfiguration,signal:r.signal}),u=n.encapsulate(`${es}/p2p/${i.toString()}`),f=await r.upgrader.upgradeOutbound(new hn({peerConnection:a,timeline:{open:new Date().getTime()},remoteAddr:u}),{skipProtection:!0,skipEncryption:!0,muxerFactory:c});return o.close(),f}catch(a){throw o.reset(),a}}async _onProtocol({connection:e,stream:r}){try{let[n,i]=await Ap({rtcConfiguration:this.init.rtcConfiguration,connection:e,stream:r}),s=e.remoteAddr.getPeerId(),o=e.remoteAddr.encapsulate(`${es}/p2p/${s}`);await this.components.upgrader.upgradeInbound(new hn({peerConnection:n,timeline:{open:new Date().getTime()},remoteAddr:o}),{skipEncryption:!0,skipProtection:!0,muxerFactory:i})}catch(n){throw r.reset(),n}}};function v0(){let t=nr(),e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){yield*await t.promise}()}}function Tp(){let t=v0(),e=v0();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}var t3=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Bp=t=>t!=null&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),E0=t=>t!=null&&typeof t.sink=="function"&&Bp(t.source),r3=t=>e=>{let r=t.sink(e);if(r.then!=null){let n=kt({objectMode:!0});return r.then(()=>{n.end()},s=>{n.end(s)}),cs(n,async function*(){yield*t.source,n.end()}())}return t.source};function Ip(t,...e){if(E0(t)){let n=t;t=()=>n.source}else if(Bp(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&E0(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)E0(r[n])&&(r[n]=r3(r[n]));return t3(...r)}var kp=!!globalThis.process?.env?.DUMP_SESSION_KEYS;var ly=W(Fp(),1),vi=W(ry(),1),_a=W(iy(),1),M0=W(F0(),1),hy={hashSHA256(t){return(0,_a.hash)(t)},getHKDF(t,e){let i=new ly.HKDF(_a.SHA256,e,t).expand(96),s=i.subarray(0,32),o=i.subarray(32,64),a=i.subarray(64,96);return[s,o,a]},generateX25519KeyPair(){let t=vi.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519KeyPairFromSeed(t){let e=vi.generateKeyPairFromSeed(t);return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519SharedKey(t,e){return vi.sharedKey(t,e)},chaCha20Poly1305Encrypt(t,e,r,n){return new M0.ChaCha20Poly1305(n).seal(e,t,r)},chaCha20Poly1305Decrypt(t,e,r,n,i){return new M0.ChaCha20Poly1305(n).open(e,t,r,i)}};var K0=W(F0(),1);var l8=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),Ei=t=>{let e=l8(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,t,!1),e};Ei.bytes=2;var Ss=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof Uint8Array?new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1):t.getUint16(0)};Ss.bytes=2;function dy(t){return pe([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function py(t){return pe([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function yy(t){return pe([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function gy(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.subarray(0,32),ciphertext:t.subarray(32,t.length),ns:new Uint8Array(0)}}function by(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.subarray(0,32),ns:t.subarray(32,80),ciphertext:t.subarray(80,t.length)}}function my(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.subarray(0,48),ciphertext:t.subarray(48,t.length)}}function wy(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65519){let s=i+65519;s>n.length&&(s=n.length);let o=t.encrypt(n.subarray(i,s),t.session);e?.encryptedPackets.increment(),yield Ei(o.byteLength),yield o}}}function vy(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65535){let s=i+65535;if(s>n.length&&(s=n.length),s-K0.TAG_LENGTH<i)throw new Error("Invalid chunk");let o=n.subarray(i,s),a=n.subarray(i,s-K0.TAG_LENGTH),{plaintext:c,valid:u}=t.decrypt(o,t.session,a);if(!u)throw e?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");e?.decryptedPackets.increment(),yield c}}}var Sn=class extends Error{constructor(e="Unexpected Peer"){super(e),this.code=Sn.code}static get code(){return"ERR_UNEXPECTED_PEER"}},Pr=class extends Error{constructor(e="Invalid crypto exchange"){super(e),this.code=Pr.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}};var Ie;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(Ie||(Ie={}));var V0;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(V0||(V0={}));(function(t){t.codec=()=>is(V0)})(Ie||(Ie={}));var lr;(function(t){let e;t.codec=()=>(e==null&&(e=Ir((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ie.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=Ie.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Br(r,t.codec()),t.decode=r=>Tr(r,t.codec())})(lr||(lr={}));var hr;(function(t){let e;t.codec=()=>(e==null&&(e=Ir((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ie.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=Ie.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Br(r,t.codec()),t.decode=r=>Tr(r,t.codec())})(hr||(hr={}));var YN=W(Ts(),1),JN=W(U1(),1),E6=W(xe(),1);var U4={"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"},F4=Object.keys(U4),Jk=F4.join(" / ");var Bn=W(He("crypto"),1);function hf(t){let e=t?.algorithm??"aes-128-gcm",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"sha256",s=t?.saltLength??16,o=t?.iterations??32767,a=t?.algorithmTagLength??16;async function c(p,d){let y=Bn.default.randomBytes(n),g=Bn.default.createCipheriv(e,d,y),b=pe([g.update(p),g.final()]);return pe([y,b,g.getAuthTag()])}async function u(p,d){let y=Bn.default.randomBytes(s);typeof d=="string"&&(d=_e(d));let g=Bn.default.pbkdf2Sync(d,y,o,r,i);return pe([y,await c(Uint8Array.from(p),g)])}async function f(p,d){let y=p.subarray(0,n),g=p.subarray(n,p.length-a),b=p.subarray(g.length+n),v=Bn.default.createDecipheriv(e,d,y);return v.setAuthTag(b),pe([v.update(g),v.final()])}async function l(p,d){let y=p.subarray(0,s),g=p.subarray(s);typeof d=="string"&&(d=_e(d));let b=Bn.default.pbkdf2Sync(d,y,o,r,i);return await f(g,b)}return{encrypt:u,decrypt:l}}var Ef={};Je(Ef,{RsaPrivateKey:()=>Ri,RsaPublicKey:()=>Us,fromJwk:()=>f6,generateKeyPair:()=>l6,unmarshalRsaPrivateKey:()=>c6,unmarshalRsaPublicKey:()=>u6});var IN=W(z1(),1),Ps=W(xe(),1);var Ln=W(He("crypto"),1),s2=He("util");var K4=W(He("crypto"),1);var ne=BigInt(0),De=BigInt(1),on=BigInt(2),Ls=BigInt(3),H1=BigInt(8),Oe=Object.freeze({a:ne,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:De,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),G1=(t,e)=>(t+e/on)/e,qa={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){let{n:e}=Oe,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-De*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=G1(s*t,e),c=G1(-n*t,e),u=R(t-a*r-c*i,e),f=R(-a*n-c*s,e),l=u>o,h=f>o;if(l&&(u=e-u),h&&(f=e-f),u>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:h,k2:f}}},$t=32,Bi=32,V4=32,W1=$t+1,j1=2*$t+1;function $1(t){let{a:e,b:r}=Oe,n=R(t*t),i=R(n*t);return R(i+e*t+r)}var za=Oe.a===ne,Wa=class extends Error{constructor(e){super(e)}};function X1(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint expected")}var ae=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof ye))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ye.ZERO)?ae.ZERO:new ae(e.x,e.y,De)}static toAffineBatch(e){let r=W4(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return ae.toAffineBatch(e).map(ae.fromAffine)}equals(e){X1(e);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=e,c=R(i*i),u=R(a*a),f=R(r*u),l=R(s*c),h=R(R(n*a)*u),p=R(R(o*i)*c);return f===l&&h===p}negate(){return new ae(this.x,R(-this.y),this.z)}double(){let{x:e,y:r,z:n}=this,i=R(e*e),s=R(r*r),o=R(s*s),a=e+s,c=R(on*(R(a*a)-i-o)),u=R(Ls*i),f=R(u*u),l=R(f-on*c),h=R(u*(c-l)-H1*o),p=R(on*r*n);return new ae(l,h,p)}add(e){X1(e);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=e;if(s===ne||o===ne)return this;if(r===ne||n===ne)return e;let c=R(i*i),u=R(a*a),f=R(r*u),l=R(s*c),h=R(R(n*a)*u),p=R(R(o*i)*c),d=R(l-f),y=R(p-h);if(d===ne)return y===ne?this.double():ae.ZERO;let g=R(d*d),b=R(d*g),v=R(f*g),w=R(y*y-b-on*v),C=R(y*(v-w)-h*b),S=R(i*a*d);return new ae(w,C,S)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=ae.ZERO;if(typeof e=="bigint"&&e===ne)return r;let n=Z1(e);if(n===De)return this;if(!za){let l=r,h=this;for(;n>ne;)n&De&&(l=l.add(h)),h=h.double(),n>>=De;return l}let{k1neg:i,k1:s,k2neg:o,k2:a}=qa.splitScalar(n),c=r,u=r,f=this;for(;s>ne||a>ne;)s&De&&(c=c.add(f)),a&De&&(u=u.add(f)),f=f.double(),s>>=De,a>>=De;return i&&(c=c.negate()),o&&(u=u.negate()),u=new ae(R(u.x*qa.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let r=za?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(ae.BASE)&&(r=ye.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&gf.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=ae.normalizeZ(i),gf.set(r,i)));let s=ae.ZERO,o=ae.BASE,a=1+(za?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let p=h*c,d=Number(e&u);e>>=l,d>c&&(d-=f,e+=De);let y=p,g=p+Math.abs(d)-1,b=h%2!==0,v=d<0;d===0?o=o.add(Ha(b,i[y])):s=s.add(Ha(v,i[g]))}return{p:s,f:o}}multiply(e,r){let n=Z1(e),i,s;if(za){let{k1neg:o,k1:a,k2neg:c,k2:u}=qa.splitScalar(n),{p:f,f:l}=this.wNAF(a,r),{p:h,f:p}=this.wNAF(u,r);f=Ha(o,f),h=Ha(c,h),h=new ae(R(h.x*qa.beta),h.y,h.z),i=f.add(h),s=l.add(p)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return ae.normalizeZ([i,s])[0]}toAffine(e){let{x:r,y:n,z:i}=this,s=this.equals(ae.ZERO);e==null&&(e=s?H1:Ni(i));let o=e,a=R(o*o),c=R(a*o),u=R(r*a),f=R(n*c),l=R(i*o);if(s)return ye.ZERO;if(l!==De)throw new Error("invZ was invalid");return new ye(u,f)}};ae.BASE=new ae(Oe.Gx,Oe.Gy,De);ae.ZERO=new ae(ne,De,ne);function Ha(t,e){let r=e.negate();return t?r:e}var gf=new WeakMap,ye=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,gf.delete(this)}hasEvenY(){return this.y%on===ne}static fromCompressedHex(e){let r=e.length===32,n=an(r?e:e.subarray(1));if(!yf(n))throw new Error("Point is not on curve");let i=$1(n),s=G4(i),o=(s&De)===De;r?o&&(s=R(-s)):(e[0]&1)===1!==o&&(s=R(-s));let a=new ye(n,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=an(e.subarray(1,$t+1)),n=an(e.subarray($t+1,$t*2+1)),i=new ye(r,n);return i.assertValidity(),i}static fromHex(e){let r=ki(e),n=r.length,i=r[0];if(n===$t)return this.fromCompressedHex(r);if(n===W1&&(i===2||i===3))return this.fromCompressedHex(r);if(n===j1&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${W1} compressed bytes or ${j1} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return ye.BASE.multiply($a(e))}static fromSignature(e,r,n){let{r:i,s}=Q1(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let o=xf(ki(e)),{n:a}=Oe,c=n===2||n===3?i+a:i,u=Ni(c,a),f=R(-o*u,a),l=R(s*u,a),h=n&1?"03":"02",p=ye.fromHex(h+Di(c)),d=ye.BASE.multiplyAndAddUnsafe(p,f,l);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return kn(this.toHex(e))}toHex(e=!1){let r=Di(this.x);return e?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Di(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:n}=this;if(!yf(r)||!yf(n))throw new Error(e);let i=R(n*n),s=$1(r);if(R(i-s)!==ne)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ye(this.x,R(-this.y))}double(){return ae.fromAffine(this).double().toAffine()}add(e){return ae.fromAffine(this).add(ae.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ae.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){let i=ae.fromAffine(this),s=r===ne||r===De||this!==ye.BASE?i.multiplyUnsafe(r):i.multiply(r),o=ae.fromAffine(e).multiplyUnsafe(n),a=s.add(o);return a.equals(ae.ZERO)?void 0:a.toAffine()}};ye.BASE=new ye(Oe.Gx,Oe.Gy);ye.ZERO=new ye(ne,ne);function Y1(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function J1(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Ii(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:an(r),left:t.subarray(e+2)}}function q4(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Ii(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=J1(t.subarray(2)),{data:n,left:i}=J1(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ii(i)}`);return{r:e,s:n}}var xr=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Ii(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new xr(ja(i.slice(0,64)),ja(i.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=q4(r?e:kn(e));return new xr(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Os(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Os(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=Oe.n>>De;return this.s>e}normalizeS(){return this.hasHighS()?new xr(this.r,R(-this.s,Oe.n)):this}toDERRawBytes(){return kn(this.toDERHex())}toDERHex(){let e=Y1(Ns(this.s)),r=Y1(Ns(this.r)),n=e.length/2,i=r.length/2,s=Ns(n),o=Ns(i);return`30${Ns(i+n+4)}02${o}${r}02${s}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return kn(this.toCompactHex())}toCompactHex(){return Di(this.r)+Di(this.s)}};function sn(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}var z4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ii(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=z4[t[r]];return e}var H4=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Di(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(ne<=t&&t<H4))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function bf(t){let e=kn(Di(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Ns(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ja(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function kn(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function an(t){return ja(Ii(t))}function ki(t){return t instanceof Uint8Array?Uint8Array.from(t):kn(t)}function Z1(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Os(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(t,e=Oe.P){let r=t%e;return r>=ne?r:e+r}function Pt(t,e){let{P:r}=Oe,n=t;for(;e-- >ne;)n*=n,n%=r;return n}function G4(t){let{P:e}=Oe,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=Pt(u,Ls)*u%e,l=Pt(f,Ls)*u%e,h=Pt(l,on)*c%e,p=Pt(h,n)*h%e,d=Pt(p,i)*p%e,y=Pt(d,o)*d%e,g=Pt(y,a)*y%e,b=Pt(g,o)*d%e,v=Pt(b,Ls)*u%e,w=Pt(v,s)*p%e,C=Pt(w,r)*c%e,S=Pt(C,on);if(S*S%e!==t)throw new Error("Cannot find square root");return S}function Ni(t,e=Oe.P){if(t===ne||e<=ne)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=R(t,e),n=e,i=ne,s=De,o=De,a=ne;for(;r!==ne;){let u=n/r,f=n%r,l=i-o*u,h=s-a*u;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==De)throw new Error("invert: does not exist");return R(i,e)}function W4(t,e=Oe.P){let r=new Array(t.length),n=t.reduce((s,o,a)=>o===ne?s:(r[a]=s,R(s*o,e)),De),i=Ni(n,e);return t.reduceRight((s,o,a)=>o===ne?s:(r[a]=R(s*r[a],e),R(s*o,e)),i),r}function j4(t){let e=t.length*8-Bi*8,r=an(t);return e>0?r>>BigInt(e):r}function xf(t,e=!1){let r=j4(t);if(e)return r;let{n}=Oe;return r>=n?r-n:r}var Ti,Rs,mf=class{constructor(e,r){if(this.hashLen=e,this.qByteLen=r,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Xt.hmacSha256(this.k,...e)}hmacSync(...e){return Rs(this.k,...e)}checkSync(){if(typeof Rs!="function")throw new Wa("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return sn(...r)}generateSync(){this.checkSync(),this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return sn(...r)}};function Os(t){return ne<t&&t<Oe.n}function yf(t){return ne<t&&t<Oe.P}function $4(t,e,r,n=!0){let{n:i}=Oe,s=xf(t,!0);if(!Os(s))return;let o=Ni(s,i),a=ye.BASE.multiply(s),c=R(a.x,i);if(c===ne)return;let u=R(o*R(e+r*c,i),i);if(u===ne)return;let f=new xr(c,u),l=(a.x===f.r?0:2)|Number(a.y&De);return n&&f.hasHighS()&&(f=f.normalizeS(),l^=1),{sig:f,recovery:l}}function $a(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Bi)throw new Error("Expected 32 bytes of private key");e=ja(t)}else if(t instanceof Uint8Array){if(t.length!==Bi)throw new Error("Expected 32 bytes of private key");e=an(t)}else throw new TypeError("Expected valid private key");if(!Os(e))throw new Error("Expected private key: 0 < key < n");return e}function X4(t){return t instanceof ye?(t.assertValidity(),t):ye.fromHex(t)}function Q1(t){if(t instanceof xr)return t.assertValidity(),t;try{return xr.fromDER(t)}catch{return xr.fromCompact(t)}}function wf(t,e=!1){return ye.fromPrivateKey(t).toRawBytes(e)}function e2(t){let e=t.length>$t?t.slice(0,$t):t;return an(e)}function Y4(t){let e=e2(t),r=R(e,Oe.n);return t2(r<ne?e:r)}function t2(t){return bf(t)}function J4(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let n=ki(t),i=$a(e),s=[t2(i),Y4(n)];if(r!=null){r===!0&&(r=Xt.randomBytes($t));let c=ki(r);if(c.length!==$t)throw new Error(`sign: Expected ${$t} bytes of extra data`);s.push(c)}let o=sn(...s),a=e2(n);return{seed:o,m:a,d:i}}function Z4(t,e){let{sig:r,recovery:n}=t,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},e),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}async function r2(t,e,r={}){let{seed:n,m:i,d:s}=J4(t,e,r.extraEntropy),o=new mf(V4,Bi);await o.reseed(n);let a;for(;!(a=$4(await o.generate(),i,s,r.canonical));)await o.reseed();return Z4(a,r)}var Q4={strict:!0};function n2(t,e,r,n=Q4){let i;try{i=Q1(t),e=ki(e)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let a=xf(e),c;try{c=X4(r)}catch{return!1}let{n:u}=Oe,f=Ni(o,u),l=R(a*f,u),h=R(s*f,u),p=ye.BASE.multiplyAndAddUnsafe(c,l,h);return p?R(p.x,u)===s:!1}ye.BASE._setWindowSize(8);var Ct={node:K4,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Ga={},Xt={bytesToHex:Ii,hexToBytes:kn,concatBytes:sn,mod:R,invert:Ni,isValidPrivateKey(t){try{return $a(t),!0}catch{return!1}},_bigintTo32Bytes:bf,_normalizePrivateKey:$a,hashToPrivateKey:t=>{t=ki(t);let e=Bi+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=R(an(t),Oe.n-De)+De;return bf(r)},randomBytes:(t=32)=>{if(Ct.web)return Ct.web.getRandomValues(new Uint8Array(t));if(Ct.node){let{randomBytes:e}=Ct.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Xt.hashToPrivateKey(Xt.randomBytes(Bi+8)),precompute(t=8,e=ye.BASE){let r=e===ye.BASE?e:new ye(e.x,e.y);return r._setWindowSize(t),r.multiply(Ls),r},sha256:async(...t)=>{if(Ct.web){let e=await Ct.web.subtle.digest("SHA-256",sn(...t));return new Uint8Array(e)}else if(Ct.node){let{createHash:e}=Ct.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Ct.web){let r=await Ct.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=sn(...e),i=await Ct.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Ct.node){let{createHmac:r}=Ct.node,n=r("sha256",t);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=Ga[t];if(r===void 0){let n=await Xt.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=sn(n,n),Ga[t]=r}return Xt.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof Ti!="function")throw new Wa("sha256Sync is undefined, you need to set it");let r=Ga[t];if(r===void 0){let n=Ti(Uint8Array.from(t,i=>i.charCodeAt(0)));r=sn(n,n),Ga[t]=r}return Ti(r,...e)},_JacobianPoint:ae};Object.defineProperties(Xt,{sha256Sync:{configurable:!1,get(){return Ti},set(t){Ti||(Ti=t)}},hmacSha256Sync:{configurable:!1,get(){return Rs},set(t){Rs||(Rs=t)}}});function Xa(t){if(isNaN(t)||t<=0)throw new ee("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Xt.randomBytes(t)}var Nn={};Je(Nn,{jwkToPkcs1:()=>n6,jwkToPkix:()=>s6,pkcs1ToJwk:()=>r6,pkixToJwk:()=>i6});var gN=W(Ts(),1),bN=W(lf(),1),Kr=W(xe(),1);var fN=W(Ke(),1),lN=W(Ma(),1),i2=W(xe(),1);function Yt(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=pe([new Uint8Array(e-r.length),r])}return $(r,"base64url")}function Jt(t){let e=t6(t);return new i2.default.jsbn.BigInteger($(e,"base16"),16)}function t6(t,e){let r=_e(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=pe([new Uint8Array(e-r.length),r])}return r}function r6(t){let e=Kr.default.asn1.fromDer($(t,"ascii")),r=Kr.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Yt(r.n),e:Yt(r.e),d:Yt(r.d),p:Yt(r.p),q:Yt(r.q),dp:Yt(r.dP),dq:Yt(r.dQ),qi:Yt(r.qInv),alg:"RS256"}}function n6(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ee("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Kr.default.pki.privateKeyToAsn1({n:Jt(t.n),e:Jt(t.e),d:Jt(t.d),p:Jt(t.p),q:Jt(t.q),dP:Jt(t.dp),dQ:Jt(t.dq),qInv:Jt(t.qi)});return _e(Kr.default.asn1.toDer(e).getBytes(),"ascii")}function i6(t){let e=Kr.default.asn1.fromDer($(t,"ascii")),r=Kr.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Yt(r.n),e:Yt(r.e)}}function s6(t){if(t.n==null||t.e==null)throw new ee("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Kr.default.pki.publicKeyToAsn1({n:Jt(t.n),e:Jt(t.e)});return _e(Kr.default.asn1.toDer(e).getBytes(),"ascii")}var o6=(0,s2.promisify)(Ln.default.generateKeyPair);async function o2(t){let e=await o6("rsa",{modulusLength:t,publicKeyEncoding:{type:"pkcs1",format:"jwk"},privateKeyEncoding:{type:"pkcs1",format:"jwk"}});return{privateKey:e.privateKey,publicKey:e.publicKey}}async function vf(t){if(t==null)throw new ee("Missing key parameter","ERR_MISSING_KEY");return{privateKey:t,publicKey:{kty:t.kty,n:t.n,e:t.e}}}async function a2(t,e){return Ln.default.createSign("RSA-SHA256").update(e).sign({format:"jwk",key:t})}async function c2(t,e,r){return Ln.default.createVerify("RSA-SHA256").update(r).verify({format:"jwk",key:t},e)}var u2=Ln.default.constants.RSA_PKCS1_PADDING;function f2(t,e){return Ln.default.publicEncrypt({format:"jwk",key:t,padding:u2},e)}function l2(t,e){return Ln.default.privateDecrypt({format:"jwk",key:t,padding:u2},e)}async function Li(t,e){let n=await hf().encrypt(t,e);return qn.encode(n)}var Us=class{constructor(e){this._key=e}async verify(e,r){return await c2(this._key,r,e)}marshal(){return Nn.jwkToPkix(this._key)}get bytes(){return lr.encode({Type:Ie.RSA,Data:this.marshal()}).subarray()}encrypt(e){return f2(this._key,e)}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}},Ri=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Xa(16)}async sign(e){return await a2(this._key,e)}get public(){if(this._publicKey==null)throw new ee("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Us(this._publicKey)}decrypt(e){return l2(this._key,e)}marshal(){return Nn.jwkToPkcs1(this._key)}get bytes(){return hr.encode({Type:Ie.RSA,Data:this.marshal()}).subarray()}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}async id(){let e=await this.public.hash();return $(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Ps.default.util.ByteBuffer(this.marshal()),i=Ps.default.asn1.fromDer(n),s=Ps.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Ps.default.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return await Li(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function c6(t){let e=Nn.pkcs1ToJwk(t),r=await vf(e);return new Ri(r.privateKey,r.publicKey)}function u6(t){let e=Nn.pkixToJwk(t);return new Us(e)}async function f6(t){let e=await vf(t);return new Ri(e.privateKey,e.publicKey)}async function l6(t){let e=await o2(t);return new Ri(e.privateKey,e.publicKey)}var Sf={};Je(Sf,{Ed25519PrivateKey:()=>Pn,Ed25519PublicKey:()=>Fs,generateKeyPair:()=>b6,generateKeyPairFromSeed:()=>x2,unmarshalEd25519PrivateKey:()=>y6,unmarshalEd25519PublicKey:()=>g6});var Rn=W(He("crypto"),1),h2=He("util");var h6=(0,h2.promisify)(Rn.default.generateKeyPair),On=32,wr=64,Ya=32,d6=64;function d2(t){let r=Rn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",x:"",d:$(t,"base64url"),kty:"OKP"}}).export({format:"jwk"});if(r.x==null||r.x==="")throw new Error("Could not export JWK public key");return _e(r.x,"base64url")}async function p2(){let t=await h6("ed25519",{publicKeyEncoding:{type:"spki",format:"jwk"},privateKeyEncoding:{type:"pkcs8",format:"jwk"}}),e=_e(t.privateKey.d,"base64url"),r=_e(t.privateKey.x,"base64url");return{privateKey:m2(e,r),publicKey:r}}async function y2(t){if(t.length!==Ya)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=d2(t);return{privateKey:m2(t,e),publicKey:e}}async function g2(t,e){if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');let r,n;if(t.byteLength===wr)r=t.subarray(0,32),n=t.subarray(32);else if(t.byteLength===Ya)r=t.subarray(0,32),n=d2(r);else throw new TypeError('"key" must be 64 or 32 bytes in length.');let i=Rn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",d:$(r,"base64url"),x:$(n,"base64url"),kty:"OKP"}});return Rn.default.sign(null,e,i)}async function b2(t,e,r){if(t.byteLength!==On)throw new TypeError('"key" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');if(e.byteLength!==d6)throw new TypeError('"sig" must be 64 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"sig" must be a node.js Buffer, or Uint8Array.');let n=Rn.default.createPublicKey({format:"jwk",key:{crv:"Ed25519",x:$(t,"base64url"),kty:"OKP"}});return Rn.default.verify(null,r,n,e)}function m2(t,e){let r=new Uint8Array(wr);for(let n=0;n<Ya;n++)r[n]=t[n],r[Ya+n]=e[n];return r}var Fs=class{constructor(e){this._key=Oi(e,On)}async verify(e,r){return await b2(this._key,r,e)}marshal(){return this._key}get bytes(){return lr.encode({Type:Ie.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}},Pn=class{constructor(e,r){this._key=Oi(e,wr),this._publicKey=Oi(r,On)}async sign(e){return await g2(this._key,e)}get public(){return new Fs(this._publicKey)}marshal(){return this._key}get bytes(){return hr.encode({Type:Ie.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}async id(){let e=Gr.digest(this.public.bytes);return Pe.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return await Li(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function y6(t){if(t.length>wr){t=Oi(t,wr+On);let n=t.subarray(0,wr),i=t.subarray(wr,t.length);return new Pn(n,i)}t=Oi(t,wr);let e=t.subarray(0,wr),r=t.subarray(On);return new Pn(e,r)}function g6(t){return t=Oi(t,On),new Fs(t)}async function b6(){let{privateKey:t,publicKey:e}=await p2();return new Pn(t,e)}async function x2(t){let{privateKey:e,publicKey:r}=await y2(t);return new Pn(e,r)}function Oi(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ee(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var Af={};Je(Af,{Secp256k1PrivateKey:()=>Ks,Secp256k1PublicKey:()=>Ms,generateKeyPair:()=>v6,unmarshalSecp256k1PrivateKey:()=>x6,unmarshalSecp256k1PublicKey:()=>w6});function w2(){return Xt.randomPrivateKey()}async function v2(t,e){let{digest:r}=await Ze.digest(e);try{return await r2(r,t)}catch(n){throw new ee(String(n),"ERR_INVALID_INPUT")}}async function E2(t,e,r){try{let{digest:n}=await Ze.digest(r);return n2(e,n,t)}catch(n){throw new ee(String(n),"ERR_INVALID_INPUT")}}function S2(t){return ye.fromHex(t).toRawBytes(!0)}function _2(t){try{wf(t,!0)}catch(e){throw new ee(String(e),"ERR_INVALID_PRIVATE_KEY")}}function _f(t){try{ye.fromHex(t)}catch(e){throw new ee(String(e),"ERR_INVALID_PUBLIC_KEY")}}function A2(t){try{return wf(t,!0)}catch(e){throw new ee(String(e),"ERR_INVALID_PRIVATE_KEY")}}var Ms=class{constructor(e){_f(e),this._key=e}async verify(e,r){return await E2(this._key,r,e)}marshal(){return S2(this._key)}get bytes(){return lr.encode({Type:Ie.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}},Ks=class{constructor(e,r){this._key=e,this._publicKey=r??A2(e),_2(this._key),_f(this._publicKey)}async sign(e){return await v2(this._key,e)}get public(){return new Ms(this._publicKey)}marshal(){return this._key}get bytes(){return hr.encode({Type:Ie.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Ve(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ze.digest(this.bytes);return e}async id(){let e=await this.public.hash();return $(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return await Li(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function x6(t){return new Ks(t)}function w6(t){return new Ms(t)}async function v6(){let t=w2();return new Ks(t)}var Un={rsa:Ef,ed25519:Sf,secp256k1:Af};function C2(t){let e=Object.keys(Un).join(" / ");return new ee(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function D2(t){let e=lr.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Ie.RSA:return Un.rsa.unmarshalRsaPublicKey(r);case Ie.Ed25519:return Un.ed25519.unmarshalEd25519PublicKey(r);case Ie.Secp256k1:return Un.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw C2(e.Type??"RSA")}}async function T2(t){let e=hr.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Ie.RSA:return await Un.rsa.unmarshalRsaPrivateKey(r);case Ie.Ed25519:return Un.ed25519.unmarshalEd25519PrivateKey(r);case Ie.Secp256k1:return Un.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw C2(e.Type??"RSA")}}var Ja;(function(t){let e;t.codec=()=>(e==null&&(e=Ir((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(let s of r.webtransportCerthashes)n.uint32(10),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={webtransportCerthashes:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.webtransportCerthashes.push(r.bytes());break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Br(r,t.codec()),t.decode=r=>Tr(r,t.codec())})(Ja||(Ja={}));var Vs;(function(t){let e;t.codec=()=>(e==null&&(e=Ir((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.identityKey!=null&&r.identityKey.byteLength>0)&&(n.uint32(10),n.bytes(r.identityKey??new Uint8Array(0))),(i.writeDefaults===!0||r.identitySig!=null&&r.identitySig.byteLength>0)&&(n.uint32(18),n.bytes(r.identitySig??new Uint8Array(0))),r.extensions!=null&&(n.uint32(34),Ja.codec().encode(r.extensions,n,{writeDefaults:!1})),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.identityKey=r.bytes();break;case 2:i.identitySig=r.bytes();break;case 4:i.extensions=Ja.codec().decode(r,r.uint32());break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Br(r,t.codec()),t.decode=r=>Tr(r,t.codec())})(Vs||(Vs={}));async function B2(t,e,r){let n=await _6(t,I2(e));if(t.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return S6(t.publicKey,n,r)}function S6(t,e,r){return Vs.encode({identityKey:t,identitySig:e,extensions:r??{webtransportCerthashes:[]}}).subarray()}async function _6(t,e){if(t.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return await(await T2(t.privateKey)).sign(e)}async function Cf(t){return await ou(t.identityKey)}function Df(t){return Vs.decode(t)}function I2(t){let e=_e("noise-libp2p-static-key:");return pe([e,t],e.length+t.length)}async function Tf(t,e,r){let n=await ou(e.identityKey);if(!n.equals(r))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${r.toString()}`);let i=I2(t);if(n.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(e.identitySig==null)throw new Error("Signature was missing from message");if(!await D2(n.publicKey).verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function qs(t){return!(!(t instanceof Uint8Array)||t.length!==32)}var Xe=ft("libp2p:noise");var Ut;kp?Ut=Xe:Ut=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function k2(t){Ut(`LOCAL_STATIC_PUBLIC_KEY ${$(t.publicKey,"hex")}`),Ut(`LOCAL_STATIC_PRIVATE_KEY ${$(t.privateKey,"hex")}`)}function Bf(t){t?(Ut(`LOCAL_PUBLIC_EPHEMERAL_KEY ${$(t.publicKey,"hex")}`),Ut(`LOCAL_PRIVATE_EPHEMERAL_KEY ${$(t.privateKey,"hex")}`)):Ut("Missing local ephemeral keys.")}function N2(t){Ut(`REMOTE_STATIC_PUBLIC_KEY ${$(t,"hex")}`)}function If(t){Ut(`REMOTE_EPHEMERAL_PUBLIC_KEY ${$(t,"hex")}`)}function L2(t){t.cs1&&t.cs2?(Ut(`CIPHER_STATE_1 ${t.cs1.n.getUint64()} ${$(t.cs1.k,"hex")}`),Ut(`CIPHER_STATE_2 ${t.cs2.n.getUint64()} ${$(t.cs2.k,"hex")}`)):Ut("Missing cipher state.")}var A6="Cipherstate has reached maximum n, a new handshake must be performed",Za=class{constructor(e=0){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error(A6)}};var Qa=class{constructor(e){this.crypto=e}encryptWithAd(e,r,n){let i=this.encrypt(e.k,e.n,r,n);return e.n.increment(),i}decryptWithAd(e,r,n,i){let{plaintext:s,valid:o}=this.decrypt(e.k,e.n,r,n,i);return o&&e.n.increment(),{plaintext:s,valid:o}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){let r=this.createEmptyKey();return Ve(r,e)}encrypt(e,r,n,i){return r.assertValue(),this.crypto.chaCha20Poly1305Encrypt(i,r.getBytes(),n,e)}encryptAndHash(e,r){let n;return this.hasKey(e.cs)?n=this.encryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,n),n}decrypt(e,r,n,i,s){r.assertValue();let o=this.crypto.chaCha20Poly1305Decrypt(i,r.getBytes(),n,e,s);return o?{plaintext:o,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,r){let n,i=!0;return this.hasKey(e.cs)?{plaintext:n,valid:i}=this.decryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,r),{plaintext:n,valid:i}}dh(e,r){try{let n=this.crypto.generateX25519SharedKey(e,r);return n.length===32?n:n.subarray(0,32)}catch(n){let i=n;return Xe.error(i),new Uint8Array(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){return this.crypto.hashSHA256(pe([e,r],e.length+r.length))}mixKey(e,r){let[n,i]=this.crypto.getHKDF(e.ck,r);e.cs=this.initializeKey(i),e.ck=n}initializeKey(e){return{k:e,n:new Za}}initializeSymmetric(e){let r=_e(e,"utf-8"),n=this.hashProtocolName(r),i=n,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:i,h:n}}hashProtocolName(e){if(e.length<=32){let r=new Uint8Array(32);return r.set(e),r}else return this.getHash(e,new Uint8Array(0))}split(e){let[r,n]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),i=this.initializeKey(r),s=this.initializeKey(n);return{cs1:i,cs2:s}}writeMessageRegular(e,r){let n=this.encryptWithAd(e,new Uint8Array(0),r),i=this.createEmptyKey(),s=new Uint8Array(0);return{ne:i,ns:s,ciphertext:n}}readMessageRegular(e,r){return this.decryptWithAd(e,new Uint8Array(0),r.ciphertext)}};var ec=class extends Qa{initializeInitiator(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=new Uint8Array(32);return{ss:o,s:r,rs:n,psk:i,re:a}}initializeResponder(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=new Uint8Array(32);return{ss:o,s:r,rs:n,psk:i,re:a}}writeMessageA(e,r,n){let i=new Uint8Array(0);n!==void 0?e.e=n:e.e=this.crypto.generateX25519KeyPair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:i,ciphertext:o}}writeMessageB(e,r){e.e=this.crypto.generateX25519KeyPair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let i=e.s.publicKey,s=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:n,ns:s,ciphertext:o}}writeMessageC(e,r){let n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:i,ciphertext:s},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return qs(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(qs(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);i&&qs(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:i&&o}}readMessageC(e,r){let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);if(i&&qs(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:i&&o,cs1:a,cs2:c}}initSession(e,r,n){let i=this.createEmptyKey(),s=new Uint8Array(32),o;return e?o=this.initializeInitiator(r,n,s,i):o=this.initializeResponder(r,n,s,i),{hs:o,i:e,mc:0}}sendMessage(e,r,n){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r,n);else if(e.mc===1)i=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);i=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let n=new Uint8Array(0),i=!1;if(e.mc===0)({plaintext:n,valid:i}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:n,valid:i}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);n=o,i=a,e.h=s,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:n,valid:i}}};var tc=class{constructor(e,r,n,i,s,o,a,c){this.remoteExtensions={webtransportCerthashes:[]},this.isInitiator=e,this.payload=r,this.prologue=n,this.staticKeypair=s,this.connection=o,a&&(this.remotePeer=a),this.xx=c??new ec(i),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(k2(this.session.hs.s),this.isInitiator){Xe.trace("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(dy(e)),Xe.trace("Stage 0 - Initiator finished sending first message."),Bf(this.session.hs.e)}else{Xe.trace("Stage 0 - Responder waiting to receive first message...");let e=gy((await this.connection.readLP()).subarray()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Pr("xx handshake stage 0 validation fail");Xe.trace("Stage 0 - Responder received first message."),If(this.session.hs.re)}}async exchange(){if(this.isInitiator){Xe.trace("Stage 1 - Initiator waiting to receive first message from responder...");let e=by((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Pr("xx handshake stage 1 validation fail");Xe.trace("Stage 1 - Initiator received the message."),If(this.session.hs.re),N2(this.session.hs.rs),Xe.trace("Initiator going to check remote's signature...");try{let i=Df(r);this.remotePeer=this.remotePeer||await Cf(i),await Tf(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let s=i;throw new Sn(`Error occurred while verifying signed payload: ${s.message}`)}Xe.trace("All good with the signature!")}else{Xe.trace("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(py(e)),Xe.trace("Stage 1 - Responder sent the second handshake message with signed payload."),Bf(this.session.hs.e)}}async finish(){if(this.isInitiator){Xe.trace("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(yy(e)),Xe.trace("Stage 2 - Initiator sent message with signed payload.")}else{Xe.trace("Stage 2 - Responder waiting for third handshake message...");let e=my((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Pr("xx handshake stage 2 validation fail");Xe.trace("Stage 2 - Responder received the message, finished handshake.");try{let i=Df(r);this.remotePeer=this.remotePeer||await Cf(i),await Tf(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let s=i;throw new Sn(`Error occurred while verifying signed payload: ${s.message}`)}}L2(this.session)}encrypt(e,r){let n=this.getCS(r);return this.xx.encryptWithAd(n,new Uint8Array(0),e)}decrypt(e,r,n){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),e,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Pr("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}};function R2(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var rc=class{constructor(e={}){this.protocol="/noise";let{staticNoiseKey:r,extensions:n,crypto:i,prologueBytes:s,metrics:o}=e;this.crypto=i??hy,this.extensions=n,this.metrics=o?R2(o):void 0,r?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(r):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=s??new Uint8Array(0)}async secureOutbound(e,r,n){let i=oi(r,{lengthEncoder:Ei,lengthDecoder:Ss,maxDataLength:65535}),s=await this.performHandshake({connection:i,isInitiator:!0,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remoteExtensions:s.remoteExtensions,remotePeer:s.remotePeer}}async secureInbound(e,r,n){let i=oi(r,{lengthEncoder:Ei,lengthDecoder:Ss,maxDataLength:65535}),s=await this.performHandshake({connection:i,isInitiator:!1,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remotePeer:s.remotePeer,remoteExtensions:s.remoteExtensions}}async performHandshake(e){let r=await B2(e.localPeer,this.staticKeys.publicKey,this.extensions);return await this.performXXHandshake(e,r)}async performXXHandshake(e,r){let{isInitiator:n,remotePeer:i,connection:s}=e,o=new tc(n,r,this.prologue,this.crypto,this.staticKeys,s,i);try{await o.propose(),await o.exchange(),await o.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){if(this.metrics?.xxHandshakeErrors.increment(),a instanceof Error)throw a.message=`Error occurred during XX handshake: ${a.message}`,a}return o}async createSecureConnection(e,r){let[n,i]=Tp(),s=e.unwrap();return await Ip(n,wy(r,this.metrics),s,xn({lengthDecoder:Ss}),vy(r,this.metrics),n),i}};function O2(t={}){return()=>new rc(t)}var ub=W(nl(),1);var ob=W(nl(),1);var Z_=ft("libp2p:webrtc:sdp"),il=Object.values(tr).map(t=>t.decoder).reduce((t,e)=>t.or(e));function Q_(t){for(let e of t.protoNames())if(e.startsWith("ip"))return e.toUpperCase();return Z_("Warning: multiaddr does not appear to contain IP4 or IP6, defaulting to IP6",t),"IP6"}function Ec(t){let r=t.stringTuples().filter(n=>n[0]===al).map(n=>n[1])[0];if(r===void 0||r==="")throw ri(`Couldn't find a certhash component of multiaddr: ${t.toString()}`);return r}function sl(t){let e=il.decode(t);return ob.decode(e)}function eA(t){let e=sl(Ec(t)),r=ol(e.name),n=e.digest.reduce((s,o)=>s+o.toString(16).padStart(2,"0"),""),i=n.match(/.{1,2}/g);if(i==null)throw gh(n,t.toString());return[`${r.toUpperCase()} ${i.join(":").toUpperCase()}`,n]}function ol(t){switch(t){case"sha1":return"sha-1";case"sha2-256":return"sha-256";case"sha2-512":return"sha-512";default:throw mh(t)}}function tA(t,e){let{host:r,port:n}=t.toOptions(),i=Q_(t),[s]=eA(t);return`v=0
o=- 0 0 IN ${i} ${r}
s=-
c=IN ${i} ${r}
t=0 0
a=ice-lite
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:passive
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:${s}
a=sctp-port:5000
a=max-message-size:100000
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host\r
`}function ab(t,e){return{type:"answer",sdp:tA(t,e)}}function cb(t,e){if(t.sdp===void 0)throw ni("Can't munge a missing SDP");return t.sdp=t.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+e+`
`).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+e+`
`),t}var cl=ft("libp2p:webrtc:transport"),nA=1e4,iA=de("webrtc-direct").code,al=de("certhash").code,Sc=class{constructor(e){this.components=e}async dial(e,r){let n=await this._connect(e,r);return cl(`dialing address - ${e.toString()}`),n}createListener(e){throw bh("WebRTCTransport.createListener")}filter(e){return e.filter(sA)}get[Symbol.toStringTag](){return"@libp2p/webrtc-direct"}get[Js](){return!0}async _connect(e,r){let n=e.getPeerId();if(n===null)throw ri("we need to have the remote's PeerId");let i=Qi(n),s=sl(Ec(e)),o=await RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256",hash:ol(s.name)}),a=new RTCPeerConnection({certificates:[o]}),c=new Promise((S,_)=>{let T=a.createDataChannel("",{negotiated:!0,id:0}),I=setTimeout(()=>{let O=`Data channel was never opened: state: ${T.readyState}`;cl.error(O),_(bu("data",O))},nA);T.onopen=O=>{clearTimeout(I),S(T)},T.onerror=O=>{clearTimeout(I);let z=`Error opening a data channel for handshaking: ${O.target?.toString()??"not specified"}`;cl.error(z),_(bu("data",z))}}),u="libp2p+webrtc+v1/"+yh(32),f=await a.createOffer(),l=cb(f,u);await a.setLocalDescription(l);let h=ab(e,u);await a.setRemoteDescription(h);let p=await c,d=this.components.peerId,y=this.generateNoisePrologue(a,s.code,e),g=O2({prologueBytes:y})(),b=new Gt({channel:p,stat:{direction:"inbound",timeline:{open:1}}}),v={...b,sink:b.sink.bind(b),source:{[Symbol.asyncIterator]:async function*(){for await(let S of b.source)yield S.subarray()}}},w=new hn({peerConnection:a,remoteAddr:e,timeline:{open:new Date().getTime()}}),C=new En(a);return await g.secureInbound(d,v,i),await r.upgrader.upgradeOutbound(w,{skipProtection:!0,skipEncryption:!0,muxerFactory:C})}generateNoisePrologue(e,r,n){if(e.getConfiguration().certificates?.length===0)throw ni("no local certificate");let i=e.getConfiguration().certificates?.at(0);if(i===void 0||i.getFingerprints().length===0)throw ni("no fingerprint on local certificate");let s=i.getFingerprints()[0];if(s.value===void 0)throw ni("no fingerprint on local certificate");let o=s.value.replace(/:/g,""),a=_e(o,"hex"),c=ub.encode(a,r),u=il.decode(Ec(n)),f=_e("libp2p-webrtc-noise:");return pe([f,c,u])}};function sA(t){let e=t.protoCodes();return e.includes(iA)&&e.includes(al)&&t.getPeerId()!=null&&!e.includes(de("p2p-circuit").code)}function oA(){return t=>new Sc(t)}function aA(t){return e=>new fa(e,t??{})}return yb(cA);})();
/*! Bundled license information:

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PWebrtc}));
